<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>MF&#39;s Blogs</title>
  
  
  <link href="http://marigold0225.github.io/atom.xml" rel="self"/>
  
  <link href="http://marigold0225.github.io/"/>
  <updated>2025-06-12T05:58:11.992Z</updated>
  <id>http://marigold0225.github.io/</id>
  
  <author>
    <name>marigold</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>CuLH note</title>
    <link href="http://marigold0225.github.io/2025/01/17/CuLH-note/"/>
    <id>http://marigold0225.github.io/2025/01/17/CuLH-note/</id>
    <published>2025-01-17T05:33:49.000Z</published>
    <updated>2025-06-12T05:58:11.992Z</updated>
    
    <content type="html"><![CDATA[<p>关于CuLH这个代码的一些注释。我整理了两个源代码分别是CuLH_box.cuf和CuLH_fireball.cuf，代表box计算和火球计算，分别都包含了完整的计算轻核的chanel。这两个代码的区别如下：</p><figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">! 计算的chanel不一样，fireball多了SCpiDt和599两个关于共振态的过程,并且只测试deuteron</span></span><br><span class="line"><span class="keyword">INTEGER</span>, <span class="keyword">DIMENSION</span>(NSPC) :: SPC = [SCpi,SCpiDt,SCdPC,<span class="number">599</span>], SPCR, od    <span class="comment">! fireball -&gt;res d </span></span><br><span class="line"><span class="keyword">INTEGER</span>, <span class="keyword">DIMENSION</span>(NSPC) :: SPC = [SCpi,SCdPC,SCthPC,SCaPC], SPCR, od    <span class="comment">! box -&gt; d t he3 he4</span></span><br><span class="line"><span class="comment">! 初始化函数不一样：</span></span><br><span class="line"><span class="keyword">CALL</span> INIT_hydro(NTmx,dt,<span class="number">3.0</span>,<span class="number">0</span>)</span><br><span class="line"><span class="keyword">CALL</span> INITNM_Bzm_free2 </span><br><span class="line"><span class="comment">! 周期性边界条件不一样，一个开一个关，BOX size不一样</span></span><br><span class="line"><span class="keyword">INTEGER</span>, <span class="keyword">PARAMETER</span> :: PBC = <span class="number">0</span>    <span class="comment">! 1 for periodic condiditon</span></span><br><span class="line"><span class="keyword">INTEGER</span>, <span class="keyword">PARAMETER</span> :: mxx = <span class="number">10</span>, mxz = <span class="number">10</span>, mxpx = <span class="number">4</span>, mxpz = <span class="number">4</span></span><br></pre></td></tr></table></figure><span id="more"></span><h1 id="怎么run"><a href="#怎么run" class="headerlink" title="怎么run"></a>怎么run</h1><p>fortran的cuda代码需要nvfortran编译器，组里服务器安装的有，不建议自己本地配置。首先登录到组里服务器，然后切换到gpu的节点：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ssh -Y gpufarm211</span><br><span class="line"><span class="comment">## 输自己的密码，这个节点有五张GPU,nvidia-smi</span></span><br><span class="line"><span class="comment">## 编译命令</span></span><br><span class="line">nvfortran CuLH.cuf <span class="comment">## 会出来一个a.out可执行文件</span></span><br><span class="line"><span class="comment">## 运行</span></span><br><span class="line"><span class="built_in">echo</span> 0 | ./a.out &gt;&gt; output &amp;</span><br><span class="line"><span class="comment">## 上面这步是用编号为0的gpu来计算并将结果保存到output文件内，避免输出到屏幕。</span></span><br></pre></td></tr></table></figure><p>编译确保自己的当前目录里有后缀为cuf的源文件代码，运行确保当前目录有input文件SP-IN.dat。</p><h1 id="chanel"><a href="#chanel" class="headerlink" title="chanel"></a>chanel</h1><p>首先定位到代码最后的主函数。<br>代码的各种Chanel用数组来记录，比如SCpi，表示piN到delta的chanel，包含了10个chanel，具体的过程通过具体的元素可以搜索到。然后将要计算的chanel添加到SPC这个数组：</p><figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INTEGER</span>, <span class="keyword">DIMENSION</span>(NSPC) :: SPC = [SCpi,SCdPC,SCthPC,SCaPC], SPCR, od    <span class="comment">! 这四个chanel分别是piN-&gt;delta,delta+N-&gt;pi+d, delta+NN-&gt;pi+t/he3,以及he4.</span></span><br></pre></td></tr></table></figure><p>最后在主函数开始的地方，修改NSPC这个参数，值等于所有chanel的数量之和，比如上面的box计算轻核的chanel，就是10+9+16+9&#x3D;44<br><img src="/2025/01/17/CuLH-note/chanels.png"></p><h1 id="box计算"><a href="#box计算" class="headerlink" title="box计算"></a>box计算</h1><p>几个重要的函数：</p><figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">INTEGER</span>, <span class="keyword">PARAMETER</span> :: PBC = <span class="number">0</span>    <span class="comment">!line:4425. 1 for periodic condiditon</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">INTEGER</span>, <span class="keyword">PARAMETER</span> :: mxx = <span class="number">10</span>, mxz = <span class="number">10</span>, mxpx = <span class="number">4</span>, mxpz = <span class="number">4</span> <span class="comment">!line:4434. box size</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">CALL</span> INITNM_Bzm_free2 <span class="comment">!line:28159  初始化box的函数，里面可以修改sample粒子的数目，这个数目是乘以test particle的数目，比如想初始化480个pi0，主函数里test particle是100，这个函数里pi0就是48000。</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">CALL</span> yld(-<span class="number">0.5</span>) <span class="comment">!line:28200 是否对最后的产额结果统计rapidity的cut，加个负号表示不作任何cut，0.5表示取快度在+-0.5之间。</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">SUBROUTINE</span></span> SPC4PClcl_d <span class="comment">!line:18392. 这个函数的最后，在所有-68的case下可以给he4的prb乘以一个因子增大统计量。 </span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">SUBROUTINE</span></span> SPC3PClcl_d <span class="comment">!line:17847. 同理这个函数给triton/he3增大prb。</span></span><br></pre></td></tr></table></figure><h1 id="fireball-计算"><a href="#fireball-计算" class="headerlink" title="fireball 计算"></a>fireball 计算</h1><p>fireball的计算为了不让delta跑出fireball外面，需要增大box的size。</p><figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CALL</span> INIT_hydro(NTmx,dt,<span class="number">3.0</span>,<span class="number">0</span>) <span class="comment">!计算fireball的初始化程序。参数分别是总步长，dt，快度cut，是否读取轻核。</span></span><br><span class="line">NE = <span class="number">8000</span>; NTmx = <span class="number">500</span>; dnstp = <span class="number">500</span>; dt = <span class="number">0.1</span> <span class="comment">!这一行第一个参数是test particle数目，第二个是步数，第三个决定多少步输出一次相空间数据，第四个dt。</span></span><br></pre></td></tr></table></figure><h1 id="output"><a href="#output" class="headerlink" title="output"></a>output</h1><p>主要看CuLH_yld.dat这个文件，分别是dt,p,n,delta++,delta+,delta0,delta-,pi+,pi0,pi-,d,he3,t,he4,he41st, he42st, he43st<br>rp0000.dat是初态分布，rp0500.dat是末态分布。 </p>]]></content>
    
    
    <summary type="html">&lt;p&gt;关于CuLH这个代码的一些注释。我整理了两个源代码分别是CuLH_box.cuf和CuLH_fireball.cuf，代表box计算和火球计算，分别都包含了完整的计算轻核的chanel。这两个代码的区别如下：&lt;/p&gt;
&lt;figure class=&quot;highlight fortran&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;! 计算的chanel不一样，fireball多了SCpiDt和599两个关于共振态的过程,并且只测试deuteron&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;INTEGER&lt;/span&gt;, &lt;span class=&quot;keyword&quot;&gt;DIMENSION&lt;/span&gt;(NSPC) :: SPC = [SCpi,SCpiDt,SCdPC,&lt;span class=&quot;number&quot;&gt;599&lt;/span&gt;], SPCR, od    &lt;span class=&quot;comment&quot;&gt;! fireball -&amp;gt;res d &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;INTEGER&lt;/span&gt;, &lt;span class=&quot;keyword&quot;&gt;DIMENSION&lt;/span&gt;(NSPC) :: SPC = [SCpi,SCdPC,SCthPC,SCaPC], SPCR, od    &lt;span class=&quot;comment&quot;&gt;! box -&amp;gt; d t he3 he4&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;! 初始化函数不一样：&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;CALL&lt;/span&gt; INIT_hydro(NTmx,dt,&lt;span class=&quot;number&quot;&gt;3.0&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;CALL&lt;/span&gt; INITNM_Bzm_free2 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;! 周期性边界条件不一样，一个开一个关，BOX size不一样&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;INTEGER&lt;/span&gt;, &lt;span class=&quot;keyword&quot;&gt;PARAMETER&lt;/span&gt; :: PBC = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;    &lt;span class=&quot;comment&quot;&gt;! 1 for periodic condiditon&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;INTEGER&lt;/span&gt;, &lt;span class=&quot;keyword&quot;&gt;PARAMETER&lt;/span&gt; :: mxx = &lt;span class=&quot;number&quot;&gt;10&lt;/span&gt;, mxz = &lt;span class=&quot;number&quot;&gt;10&lt;/span&gt;, mxpx = &lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;, mxpz = &lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    
    <category term="cuda" scheme="http://marigold0225.github.io/tags/cuda/"/>
    
  </entry>
  
  <entry>
    <title>cuda-1</title>
    <link href="http://marigold0225.github.io/2024/08/17/cuda-1/"/>
    <id>http://marigold0225.github.io/2024/08/17/cuda-1/</id>
    <published>2024-08-17T07:16:16.000Z</published>
    <updated>2025-06-12T05:58:11.992Z</updated>
    
    <content type="html"><![CDATA[<p>编程过程中一般都是这样一个流程：本地有data，有config文件需要先读取到CPU，然后计算逻辑写在GPU，将data和config的配置文件传给GPU，算完之后的结果再传给CPU，最后CPU再写入到本地。所以第一件事就是搞清楚数据在cpu和gpu上的传输。</p><span id="more"></span><h1 id="第一章-获取GPU数据"><a href="#第一章-获取GPU数据" class="headerlink" title="第一章 获取GPU数据"></a>第一章 获取GPU数据</h1><h2 id="cudaMalloc"><a href="#cudaMalloc" class="headerlink" title="cudaMalloc"></a>cudaMalloc</h2><p>前面提到，<code>__global__</code>函数不能有返回值，类型必须要void，那么我们怎么获得GPU的数据呢？答案是指针：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cuda_runtime.h&gt;</span></span></span><br><span class="line"><span class="function">__global__ <span class="type">void</span> <span class="title">kernel</span><span class="params">(<span class="type">int</span> *pret)</span> </span>&#123; *pret = <span class="number">42</span>; &#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">auto</span> <span class="title">main</span><span class="params">()</span> -&gt; <span class="type">int</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> ret = <span class="number">0</span>; (栈上分配)</span><br><span class="line">    kernel&lt;&lt;&lt;<span class="number">1</span>, <span class="number">1</span>&gt;&gt;&gt;(&amp;ret);</span><br><span class="line">    <span class="comment">//int *pret = (int *)malloc(sizeof(int)); (堆上分配)</span></span><br><span class="line">    <span class="comment">//kernel&lt;&lt;&lt;1, 1&gt;&gt;&gt;(pret);</span></span><br><span class="line">    <span class="built_in">cudaDeviceSynchronize</span>();</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, ret);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这段代码无论是栈上分配内存还是堆上分配内存，传给GPU都不会改变传入的指针的值，根本原因在于这都是cpu上的内存，而cpu和GPU有着各自独立的内存，分别称为主机内存和设备内存，后者也叫显存，为什么要独立的显存，因为cpu上的内存太慢，所以GPU自己搭载了一块内存。因此无论是栈上还是堆上，都是cpu的内存，GPU自然无法访问到，需要cuda特有的内存分配函数cudaMalloc：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cuda_runtime.h&gt;</span></span></span><br><span class="line"><span class="function">__global__ <span class="type">void</span> <span class="title">kernel</span><span class="params">(<span class="type">int</span> *pret)</span> </span>&#123; *pret = <span class="number">42</span>; &#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">auto</span> <span class="title">main</span><span class="params">()</span> -&gt; <span class="type">int</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> *pret;</span><br><span class="line">    <span class="built_in">cudaMalloc</span>(&amp;pret, <span class="built_in">sizeof</span>(<span class="type">int</span>));</span><br><span class="line">    kernel&lt;&lt;&lt;<span class="number">1</span>, <span class="number">1</span>&gt;&gt;&gt;(pret);</span><br><span class="line">    <span class="built_in">cudaDeviceSynchronize</span>();</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> ret;</span><br><span class="line">    <span class="built_in">cudaMemcpy</span>(&amp;ret, pret, <span class="built_in">sizeof</span>(<span class="type">int</span>), cudaMemcpyDeviceToHost);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, ret);</span><br><span class="line">    <span class="built_in">cudaFree</span>(pret);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">❯ ./a.out</span><br><span class="line"><span class="number">42</span></span><br></pre></td></tr></table></figure><p>上述代码，先通过cudaMalloc在GPU上分配内存，此时kernel函数便能访问到这块地址，但是这块地址cpu是不能访问的！所以我们还需要cudaMemcpy拷贝数据到cpu。最后cudaFree释放掉GPU上的内存。<br>看起来好像很麻烦，拷来拷去，不就影响性能了吗？</p><h2 id="Unified-Memory"><a href="#Unified-Memory" class="headerlink" title="Unified Memory"></a>Unified Memory</h2><p>有一种新的特性，叫统一内存(managed)，cudaMallocManaged代替cudaMalloc，这样会同时在cpu和gpu上分配地址，并且内存地址使一模一样的，假如gpu上有数据写入到这个地址，cpu上的地址会自动同步数据，这样就省略了手动调用cudaMemcpy。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cuda_runtime.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function">__global__ <span class="type">void</span> <span class="title">kernel</span><span class="params">(<span class="type">int</span> *pret)</span> </span>&#123; *pret = <span class="number">42</span>; &#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">auto</span> <span class="title">main</span><span class="params">()</span> -&gt; <span class="type">int</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> *pret;</span><br><span class="line">    <span class="built_in">cudaMallocManaged</span>(&amp;pret, <span class="built_in">sizeof</span>(<span class="type">int</span>));</span><br><span class="line">    kernel&lt;&lt;&lt;<span class="number">1</span>, <span class="number">1</span>&gt;&gt;&gt;(pret);</span><br><span class="line">    <span class="built_in">cudaDeviceSynchronize</span>();</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;result = %d\n&quot;</span>, *pret);</span><br><span class="line">    <span class="built_in">cudaFree</span>(pret);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">❯ ./a.out</span><br><span class="line">result = <span class="number">42</span></span><br></pre></td></tr></table></figure><h2 id="分配数组"><a href="#分配数组" class="headerlink" title="分配数组"></a>分配数组</h2><p>可以用<code>n*sizeof(int)</code>分配大小为n的整形数组，这样会有n个连续的int数据排列在内存中，arr指向起始地址，将arr传入核函数，就可以通过下标访问数组元素：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cuda_runtime.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function">__global__ <span class="type">void</span> <span class="title">kernel</span><span class="params">(<span class="type">int</span> *arr, <span class="type">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++) arr[i] = i;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">auto</span> <span class="title">main</span><span class="params">()</span> -&gt; <span class="type">int</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span>  n   = <span class="number">4</span>;</span><br><span class="line">    <span class="type">int</span> *arr = <span class="literal">nullptr</span>;</span><br><span class="line">    <span class="built_in">cudaMallocManaged</span>(&amp;arr, n * <span class="built_in">sizeof</span>(<span class="type">int</span>));</span><br><span class="line">    kernel&lt;&lt;&lt;<span class="number">1</span>, <span class="number">1</span>&gt;&gt;&gt;(arr, n);</span><br><span class="line">    <span class="built_in">cudaDeviceSynchronize</span>();</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++) <span class="built_in">printf</span>(<span class="string">&quot;arr[%d]: %d\n&quot;</span>, i, arr[i]);</span><br><span class="line">    <span class="built_in">cudaFree</span>(arr);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">❯ ./a.out</span><br><span class="line">arr[<span class="number">0</span>]: <span class="number">0</span></span><br><span class="line">arr[<span class="number">1</span>]: <span class="number">1</span></span><br><span class="line">arr[<span class="number">2</span>]: <span class="number">2</span></span><br><span class="line">arr[<span class="number">3</span>]: <span class="number">3</span></span><br></pre></td></tr></table></figure><p>上面的代码只启动了一个线程一个block，核函数内部的for循环是串行的，这里可以因为数组大小是n，我们可以把线程数量设置为n，将数组下标转化为线程的编号，这样就扔掉了for循环：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cuda_runtime.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function">__global__ <span class="type">void</span> <span class="title">kernel</span><span class="params">(<span class="type">int</span> *arr, <span class="type">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> i  = threadIdx.x;</span><br><span class="line">    arr[i] = i;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">auto</span> <span class="title">main</span><span class="params">()</span> -&gt; <span class="type">int</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span>  n   = <span class="number">4</span>;</span><br><span class="line">    <span class="type">int</span> *arr = <span class="literal">nullptr</span>;</span><br><span class="line">    <span class="built_in">cudaMallocManaged</span>(&amp;arr, n * <span class="built_in">sizeof</span>(<span class="type">int</span>));</span><br><span class="line">    kernel&lt;&lt;&lt;<span class="number">1</span>, n&gt;&gt;&gt;(arr, n);</span><br><span class="line">    <span class="built_in">cudaDeviceSynchronize</span>();</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++) <span class="built_in">printf</span>(<span class="string">&quot;arr[%d]: %d\n&quot;</span>, i, arr[i]);</span><br><span class="line">    <span class="built_in">cudaFree</span>(arr);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">❯ ./a.out</span><br><span class="line">arr[<span class="number">0</span>]: <span class="number">0</span></span><br><span class="line">arr[<span class="number">1</span>]: <span class="number">1</span></span><br><span class="line">arr[<span class="number">2</span>]: <span class="number">2</span></span><br><span class="line">arr[<span class="number">3</span>]: <span class="number">3</span></span><br></pre></td></tr></table></figure><p>网格</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;编程过程中一般都是这样一个流程：本地有data，有config文件需要先读取到CPU，然后计算逻辑写在GPU，将data和config的配置文件传给GPU，算完之后的结果再传给CPU，最后CPU再写入到本地。所以第一件事就是搞清楚数据在cpu和gpu上的传输。&lt;/p&gt;</summary>
    
    
    
    
    <category term="cuda" scheme="http://marigold0225.github.io/tags/cuda/"/>
    
  </entry>
  
  <entry>
    <title>cuda 入门</title>
    <link href="http://marigold0225.github.io/2024/08/16/cuda-%E5%85%A5%E9%97%A8/"/>
    <id>http://marigold0225.github.io/2024/08/16/cuda-%E5%85%A5%E9%97%A8/</id>
    <published>2024-08-16T11:57:12.000Z</published>
    <updated>2025-06-12T05:58:11.992Z</updated>
    
    <content type="html"><![CDATA[<p>学习cuda的一些笔记。</p><span id="more"></span><h1 id="第0章"><a href="#第0章" class="headerlink" title="第0章"></a>第0章</h1><p>cuda有两套API，cuda runtime API和cuda driver API，前者简单兼顾性能，无需手动编译kernel，但不够灵活，后者灵活多变，但是操作繁琐，适合有特殊需求的用户，这个笔记只记录比较易懂，使用最多的runtime API。<br>先阐述一些概念和语法</p><h2 id="global-host-device"><a href="#global-host-device" class="headerlink" title="global host device"></a>global host device</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cuda_runtime.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function">__device__ <span class="type">void</span> <span class="title">say_hello_device</span><span class="params">()</span> </span>&#123; <span class="built_in">printf</span>(<span class="string">&quot;hello world from GPU!\n&quot;</span>); &#125;</span><br><span class="line"></span><br><span class="line"><span class="function">__host__ <span class="type">void</span> <span class="title">say_hello_host</span><span class="params">()</span> </span>&#123; <span class="built_in">printf</span>(<span class="string">&quot;hello world from CPU!\n&quot;</span>); &#125;</span><br><span class="line"></span><br><span class="line"><span class="function">__host__ __device__ <span class="type">void</span> <span class="title">say_hello</span><span class="params">()</span> </span>&#123; <span class="built_in">printf</span>(<span class="string">&quot;hello world!\n&quot;</span>); &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function">__host__ __device__ <span class="type">void</span> <span class="title">say_hello_select</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">ifdef</span> __CUDA_ARCH__</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;hello world from GPU!\n&quot;</span>);</span><br><span class="line"><span class="meta">#<span class="keyword">else</span></span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;hello world from CPU!\n&quot;</span>);</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function">__global__ <span class="type">void</span> <span class="title">cuda_hello</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="built_in">say_hello_device</span>();</span><br><span class="line">  <span class="built_in">say_hello</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">auto</span> <span class="title">main</span><span class="params">()</span> -&gt; <span class="type">int</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cuda_hello&lt;&lt;&lt;<span class="number">1</span>, <span class="number">10</span>&gt;&gt;&gt;();</span><br><span class="line">    <span class="built_in">cudaDeviceSynchronize</span>();</span><br><span class="line">    <span class="built_in">say_hello_host</span>();</span><br><span class="line">    <span class="built_in">say_hello</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><code>__global__</code>修饰的函数叫核函数，是可以在main函数中调用的，运行在GPU(device)上，需要指定特殊的参数&lt;&lt;&lt;a,b&gt;&gt;&gt;。</li><li><code>__device__</code>修饰的函数叫设备函数，只能在GPU上运行，main函数内无法调用,只能由device函数或者global函数调用。</li><li><code>__host__</code>修饰的函数是host函数，定义在cpu上。cuda完全兼容c++，任何函数默认都是host。</li><li>host和device可以一起用，相当于同时把函数定义在cpu和gpu上。也可以使用<code>__CUDA_ARCH__</code>宏生成两份源代码。</li><li><code>__global__</code>函数可以有参数，但不能有返回值，只能是void类型。也就是说，我们不可能从核函数通过返回值来获取GPU数据。</li><li><code>__global__</code>是异步的，所以每个global函数执行完后必须加cudaDeviceSynchronize等待GPU计算完毕</li></ul><h2 id="CUDA-ARCH"><a href="#CUDA-ARCH" class="headerlink" title="CUDA_ARCH"></a><strong>CUDA_ARCH</strong></h2><p>如果打印<code>__CUDA_ARCH__</code>，会发现这是一个整数，代表的是版本号:</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">__host__ __device__ <span class="type">void</span> <span class="title">say_hello</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="meta">#<span class="keyword">ifdef</span> __CUDA_ARCH__</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;Hello, world GPU arch %d!\n&quot;</span>, __CUDA_ARCH__);</span><br><span class="line"><span class="meta">#<span class="keyword">else</span></span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;Hello, world CPU!\n&quot;</span>);</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line">&#125;</span><br><span class="line">Hello, world GPU arch <span class="number">520</span>!</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>这里的520代表版本号是5.2.0，默认是兼容最老的版本52，也就是GTX900以上，有了这个就可以根据不同的GPU架构来编译出不同的源码：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">__host__ __device__ <span class="title">func</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="meta">#<span class="keyword">ifdef</span> __CUDA_ARCH__ &gt;= 700</span></span><br><span class="line">    <span class="comment">// device code path for compute capability 7.x</span></span><br><span class="line"><span class="meta">#<span class="keyword">elif</span> __CUDA_ARCH__ &gt;=600</span></span><br><span class="line">    <span class="comment">// device code path for compute capability 6.x</span></span><br><span class="line"><span class="comment">// others</span></span><br><span class="line"><span class="meta">#<span class="keyword">elif</span> !defined(__CUDA_ARCH__)</span></span><br><span class="line">    <span class="comment">//host code</span></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在cmake中，可以指定native来检测本地机器的计算能力，也可以自动设定为特定的版本：</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">set</span>(CMAKE_CUDA_ARCHITECTURES <span class="string">&quot;native&quot;</span>)</span><br><span class="line"><span class="keyword">set</span>(CMAKE_CUDA_ARCHITECTURES <span class="number">52</span>;<span class="number">70</span>;<span class="number">75</span>;<span class="number">86</span>)</span><br></pre></td></tr></table></figure><h2 id="constexpr"><a href="#constexpr" class="headerlink" title="constexpr"></a>constexpr</h2><p>相当于把constexpr 函数自动变成cpu和gpu都可以调用，通常都是一些可以内联的函数，数学表达式，不依赖cpu和gpu，没有外部副作用:</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cuda_runtime.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">constexpr</span> <span class="keyword">auto</span> <span class="title">cuthead</span><span class="params">(<span class="type">const</span> <span class="type">char</span> *p)</span> -&gt; <span class="type">const</span> <span class="type">char</span> * </span>&#123; <span class="keyword">return</span> p + <span class="number">1</span>; &#125;</span><br><span class="line"></span><br><span class="line"><span class="function">__global__ <span class="type">void</span> <span class="title">kernel</span><span class="params">()</span> </span>&#123; <span class="built_in">printf</span>(<span class="built_in">cuthead</span>(<span class="string">&quot;Hello, world!\n&quot;</span>)); &#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">auto</span> <span class="title">main</span><span class="params">()</span> -&gt; <span class="type">int</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    kernel&lt;&lt;&lt;<span class="number">1</span>, <span class="number">1</span>&gt;&gt;&gt;();</span><br><span class="line">    <span class="built_in">cudaDeviceSynchronize</span>();</span><br><span class="line">    <span class="built_in">printf</span>(<span class="built_in">cuthead</span>(<span class="string">&quot;Hello, world!\n&quot;</span>));</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>编译需要添加参数:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">nvcc -ccbin gcc-13 constexpr.cu --expt-relaxed-constexpr</span><br><span class="line">./a.out</span><br><span class="line">ello, world!</span><br><span class="line">ello, world!</span><br></pre></td></tr></table></figure><p>constexpr没法调用printf，也不能用__syncthreads之类的GPU函数，所以也不能完全代替<code>__host__</code>和<code>__device__</code>。</p><h2 id="thread-block-grid"><a href="#thread-block-grid" class="headerlink" title="thread block grid"></a>thread block grid</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cuda_runtime.h&gt;</span></span></span><br><span class="line"><span class="function">__global__ <span class="type">void</span> <span class="title">kernel</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;Hello, world!\n&quot;</span>));</span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;threadIdx.x %d of %d\n&quot;</span>, threadIdx.x, blockDim.x);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">auto</span> <span class="title">main</span><span class="params">()</span> -&gt; <span class="type">int</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    kernel&lt;&lt;&lt;<span class="number">1</span>, <span class="number">3</span>&gt;&gt;&gt;();</span><br><span class="line">    <span class="built_in">cudaDeviceSynchronize</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"># 输出</span><br><span class="line">hello world from GPU!</span><br><span class="line">hello world from GPU!</span><br><span class="line">hello world from GPU!</span><br><span class="line">threadIdx.x <span class="number">0</span> of <span class="number">3</span></span><br><span class="line">threadIdx.x <span class="number">1</span> of <span class="number">3</span></span><br><span class="line">threadIdx.x <span class="number">2</span> of <span class="number">3</span></span><br></pre></td></tr></table></figure><p>运行这个代码会打印三次，这个很奇怪的语法&lt;&lt;&lt;1,3&gt;&gt;&gt;是核函数独有的参数，第二个参数代表了线程的数量。GPU是为了并行而生的，可以启动相当大的线程数量，不像cpu有核数的限制。第二个打印语句中的threadIdx.x，就是CUDA的特殊变量，只有在核函数中才可以访问，可以看到打印出了0，1，2三个数字，因为我们指定了线程数为3，代表了线程的编号，第二个blockDIm则代表了线程的数量，也就是尖括号内指定的3，为什么有个.x后缀呢？如果我们把尖括号的第一个参数改成2呢？</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cuda_runtime.h&gt;</span></span></span><br><span class="line"><span class="function">__global__ <span class="type">void</span> <span class="title">kernel</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;threadIdx.x %d of %d\n&quot;</span>, threadIdx.x, blockDim.x);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">auto</span> <span class="title">main</span><span class="params">()</span> -&gt; <span class="type">int</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    kernel&lt;&lt;&lt;<span class="number">2</span>, <span class="number">3</span>&gt;&gt;&gt;();</span><br><span class="line">    <span class="built_in">cudaDeviceSynchronize</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">threadIdx.x <span class="number">0</span> of <span class="number">3</span></span><br><span class="line">threadIdx.x <span class="number">1</span> of <span class="number">3</span></span><br><span class="line">threadIdx.x <span class="number">2</span> of <span class="number">3</span></span><br><span class="line">threadIdx.x <span class="number">0</span> of <span class="number">3</span></span><br><span class="line">threadIdx.x <span class="number">1</span> of <span class="number">3</span></span><br><span class="line">threadIdx.x <span class="number">2</span> of <span class="number">3</span></span><br></pre></td></tr></table></figure><p>这里就是CUDA的另一个概念，block，这是一个比线程更大的概念，block可以组织线程，一个block可以由多个线程组成，blockDim就代表一个block的维度大小，而block的数量可以用尖括号第一个参数指定。&lt;&lt;&lt;2,3&gt;&gt;&gt;代表我们启动了两个block，每个block启动3个线程，一共6个线程。同样，要获取block的编号类似线程编号，使用blockIdx.x，获取block的数量，则使用gridDim.x。那么这个grid又是什么呢？</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">__global__ <span class="type">void</span> <span class="title">cuda_hello</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;blockIdx.x %d of %d, threadIdx.x %d of %d\n&quot;</span>, blockIdx.x, gridDim.x, threadIdx.x, blockDim.x);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">auto</span> <span class="title">main</span><span class="params">()</span> -&gt; <span class="type">int</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cuda_hello&lt;&lt;&lt;<span class="number">2</span>, <span class="number">3</span>&gt;&gt;&gt;();</span><br><span class="line">    <span class="built_in">cudaDeviceSynchronize</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">blockIdx.x <span class="number">1</span> of <span class="number">2</span>, threadIdx.x <span class="number">0</span> of <span class="number">3</span></span><br><span class="line">blockIdx.x <span class="number">1</span> of <span class="number">2</span>, threadIdx.x <span class="number">1</span> of <span class="number">3</span></span><br><span class="line">blockIdx.x <span class="number">1</span> of <span class="number">2</span>, threadIdx.x <span class="number">2</span> of <span class="number">3</span></span><br><span class="line">blockIdx.x <span class="number">0</span> of <span class="number">2</span>, threadIdx.x <span class="number">0</span> of <span class="number">3</span></span><br><span class="line">blockIdx.x <span class="number">0</span> of <span class="number">2</span>, threadIdx.x <span class="number">1</span> of <span class="number">3</span></span><br><span class="line">blockIdx.x <span class="number">0</span> of <span class="number">2</span>, threadIdx.x <span class="number">2</span> of <span class="number">3</span></span><br></pre></td></tr></table></figure><p>从这里就可以看出，CUDA中由block组织线程，由grid组织block，这里一共6个线程。总结一下：</p><ul><li>thread：最小并行单位</li><li>block：组织若干线程</li><li>grid：组织整个任务，包含若干block</li><li>调用语法：&lt;&lt;&lt;gridDim,blockDim&gt;&gt;&gt;</li></ul><p>一个有用的技巧，扁平化处理这些线程和block：<br>总线程数量：blockDim x gridDim<br>总线程编号：blockDim x blockIdx + threadIdx(其实就是二维数组的一维索引)</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">__global__ <span class="type">void</span> <span class="title">cuda_hello</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">unsigned</span> <span class="type">int</span> tnum = gridDim.x * blockDim.x;</span><br><span class="line">    <span class="type">unsigned</span> <span class="type">int</span> tid = threadIdx.x + blockIdx.x * blockDim.x;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;tid %d of %d\n&quot;</span>, tid, tnum);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">auto</span> <span class="title">main</span><span class="params">()</span> -&gt; <span class="type">int</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cuda_hello&lt;&lt;&lt;<span class="number">2</span>, <span class="number">3</span>&gt;&gt;&gt;();</span><br><span class="line">    <span class="built_in">cudaDeviceSynchronize</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">tid <span class="number">3</span> of <span class="number">6</span></span><br><span class="line">tid <span class="number">4</span> of <span class="number">6</span></span><br><span class="line">tid <span class="number">5</span> of <span class="number">6</span></span><br><span class="line">tid <span class="number">0</span> of <span class="number">6</span></span><br><span class="line">tid <span class="number">1</span> of <span class="number">6</span></span><br><span class="line">tid <span class="number">2</span> of <span class="number">6</span></span><br></pre></td></tr></table></figure><p>可以看到，我们设置了6个线程，并且每个线程的id都正确的计算了，下面的示意图展示了其中的关系：<br><img src="/2024/08/16/cuda-%E5%85%A5%E9%97%A8/grid.png"></p><h3 id="3D-grid-and-block"><a href="#3D-grid-and-block" class="headerlink" title="3D grid and block"></a>3D grid and block</h3><p>根据上面block和thread的后缀.x可以猜测，肯定有.y和.z的后缀吧。cuda支持三维的block和线程区间，只需要将尖括号内改成dim3类型即可:</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cuda_runtime.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function">__global__ <span class="type">void</span> <span class="title">kernel</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;Block (%d, %d, %d) of (%d, %d, %d), Thread (%d, %d, %d) of (%d, %d, &quot;</span></span><br><span class="line">           <span class="string">&quot;%d)\n&quot;</span>,</span><br><span class="line">           blockIdx.x, blockIdx.y, blockIdx.z, gridDim.x, gridDim.y, gridDim.z, threadIdx.x,</span><br><span class="line">           threadIdx.y, threadIdx.z, blockDim.x, blockDim.y, blockDim.z);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">auto</span> <span class="title">main</span><span class="params">()</span> -&gt; <span class="type">int</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    kernel&lt;&lt;&lt;<span class="built_in">dim3</span>(<span class="number">2</span>, <span class="number">1</span>, <span class="number">3</span>), <span class="built_in">dim3</span>(<span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>)&gt;&gt;&gt;();</span><br><span class="line">    <span class="built_in">cudaDeviceSynchronize</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">Block (0, 0, 1) of (2, 1, 3), Thread (0, 0, 0) of (2, 2, 2)</span><br><span class="line">Block (0, 0, 1) of (2, 1, 3), Thread (1, 0, 0) of (2, 2, 2)</span><br><span class="line">Block (0, 0, 1) of (2, 1, 3), Thread (0, 1, 0) of (2, 2, 2)</span><br><span class="line">Block (0, 0, 1) of (2, 1, 3), Thread (1, 1, 0) of (2, 2, 2)</span><br><span class="line">Block (0, 0, 1) of (2, 1, 3), Thread (0, 0, 1) of (2, 2, 2)</span><br><span class="line">Block (0, 0, 1) of (2, 1, 3), Thread (1, 0, 1) of (2, 2, 2)</span><br><span class="line">Block (0, 0, 1) of (2, 1, 3), Thread (0, 1, 1) of (2, 2, 2)</span><br><span class="line">Block (0, 0, 1) of (2, 1, 3), Thread (1, 1, 1) of (2, 2, 2)</span><br><span class="line">Block (1, 0, 0) of (2, 1, 3), Thread (0, 0, 0) of (2, 2, 2)</span><br><span class="line">Block (1, 0, 0) of (2, 1, 3), Thread (1, 0, 0) of (2, 2, 2)</span><br><span class="line">Block (1, 0, 0) of (2, 1, 3), Thread (0, 1, 0) of (2, 2, 2)</span><br><span class="line">Block (1, 0, 0) of (2, 1, 3), Thread (1, 1, 0) of (2, 2, 2)</span><br><span class="line">Block (1, 0, 0) of (2, 1, 3), Thread (0, 0, 1) of (2, 2, 2)</span><br><span class="line">Block (1, 0, 0) of (2, 1, 3), Thread (1, 0, 1) of (2, 2, 2)</span><br><span class="line">Block (1, 0, 0) of (2, 1, 3), Thread (0, 1, 1) of (2, 2, 2)</span><br><span class="line">Block (1, 0, 0) of (2, 1, 3), Thread (1, 1, 1) of (2, 2, 2)</span><br><span class="line">Block (1, 0, 1) of (2, 1, 3), Thread (0, 0, 0) of (2, 2, 2)</span><br><span class="line">Block (1, 0, 1) of (2, 1, 3), Thread (1, 0, 0) of (2, 2, 2)</span><br><span class="line">Block (1, 0, 1) of (2, 1, 3), Thread (0, 1, 0) of (2, 2, 2)</span><br><span class="line">Block (1, 0, 1) of (2, 1, 3), Thread (1, 1, 0) of (2, 2, 2)</span><br><span class="line">Block (1, 0, 1) of (2, 1, 3), Thread (0, 0, 1) of (2, 2, 2)</span><br><span class="line">Block (1, 0, 1) of (2, 1, 3), Thread (1, 0, 1) of (2, 2, 2)</span><br><span class="line">Block (1, 0, 1) of (2, 1, 3), Thread (0, 1, 1) of (2, 2, 2)</span><br><span class="line">Block (1, 0, 1) of (2, 1, 3), Thread (1, 1, 1) of (2, 2, 2)</span><br><span class="line">Block (1, 0, 2) of (2, 1, 3), Thread (0, 0, 0) of (2, 2, 2)</span><br><span class="line">Block (1, 0, 2) of (2, 1, 3), Thread (1, 0, 0) of (2, 2, 2)</span><br><span class="line">Block (1, 0, 2) of (2, 1, 3), Thread (0, 1, 0) of (2, 2, 2)</span><br><span class="line">Block (1, 0, 2) of (2, 1, 3), Thread (1, 1, 0) of (2, 2, 2)</span><br><span class="line">Block (1, 0, 2) of (2, 1, 3), Thread (0, 0, 1) of (2, 2, 2)</span><br><span class="line">Block (1, 0, 2) of (2, 1, 3), Thread (1, 0, 1) of (2, 2, 2)</span><br><span class="line">Block (1, 0, 2) of (2, 1, 3), Thread (0, 1, 1) of (2, 2, 2)</span><br><span class="line">Block (1, 0, 2) of (2, 1, 3), Thread (1, 1, 1) of (2, 2, 2)</span><br><span class="line">Block (0, 0, 0) of (2, 1, 3), Thread (0, 0, 0) of (2, 2, 2)</span><br><span class="line">Block (0, 0, 0) of (2, 1, 3), Thread (1, 0, 0) of (2, 2, 2)</span><br><span class="line">Block (0, 0, 0) of (2, 1, 3), Thread (0, 1, 0) of (2, 2, 2)</span><br><span class="line">Block (0, 0, 0) of (2, 1, 3), Thread (1, 1, 0) of (2, 2, 2)</span><br><span class="line">Block (0, 0, 0) of (2, 1, 3), Thread (0, 0, 1) of (2, 2, 2)</span><br><span class="line">Block (0, 0, 0) of (2, 1, 3), Thread (1, 0, 1) of (2, 2, 2)</span><br><span class="line">Block (0, 0, 0) of (2, 1, 3), Thread (0, 1, 1) of (2, 2, 2)</span><br><span class="line">Block (0, 0, 0) of (2, 1, 3), Thread (1, 1, 1) of (2, 2, 2)</span><br><span class="line">Block (0, 0, 2) of (2, 1, 3), Thread (0, 0, 0) of (2, 2, 2)</span><br><span class="line">Block (0, 0, 2) of (2, 1, 3), Thread (1, 0, 0) of (2, 2, 2)</span><br><span class="line">Block (0, 0, 2) of (2, 1, 3), Thread (0, 1, 0) of (2, 2, 2)</span><br><span class="line">Block (0, 0, 2) of (2, 1, 3), Thread (1, 1, 0) of (2, 2, 2)</span><br><span class="line">Block (0, 0, 2) of (2, 1, 3), Thread (0, 0, 1) of (2, 2, 2)</span><br><span class="line">Block (0, 0, 2) of (2, 1, 3), Thread (1, 0, 1) of (2, 2, 2)</span><br><span class="line">Block (0, 0, 2) of (2, 1, 3), Thread (0, 1, 1) of (2, 2, 2)</span><br><span class="line">Block (0, 0, 2) of (2, 1, 3), Thread (1, 1, 1) of (2, 2, 2)</span><br></pre></td></tr></table></figure><p>因为GPU的业务常常涉及到图形学和二维图像，所以有3维结构处理会比较方便。也可以将所有线程的id展开为一维索引，本质没有区别。<br>初看可能很疑惑，我只需要6个线程，直接线程数设置为6就行了，为什么要分block和grid呢？还搞成3d这样复杂的结构？其实这正是cuda编程的核心，同样的代码，如果线程的结构组织不一样，运行效率天差地别。</p><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>介绍一些cuda编程的基本概念与语法，主机端和设备端的函数区别，了解线程的组织关系。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">虽然cuda基于C++，但是runtime的api依然是仿c风格的接口，可能是为了照顾从c转过来的土木老哥，也有可能是为了方便被第三方二次封装</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;p&gt;学习cuda的一些笔记。&lt;/p&gt;</summary>
    
    
    
    
    <category term="cuda" scheme="http://marigold0225.github.io/tags/cuda/"/>
    
  </entry>
  
  <entry>
    <title>scoop</title>
    <link href="http://marigold0225.github.io/2024/08/06/scoop/"/>
    <id>http://marigold0225.github.io/2024/08/06/scoop/</id>
    <published>2024-08-06T08:09:02.000Z</published>
    <updated>2025-06-12T05:58:12.012Z</updated>
    
    <content type="html"><![CDATA[<p>Windows 下的一些配置，包括powershell，scoop，wsl2等。</p><span id="more"></span><h1 id="windows"><a href="#windows" class="headerlink" title="windows"></a>windows</h1><h2 id="安装powershell7"><a href="#安装powershell7" class="headerlink" title="安装powershell7"></a>安装powershell7</h2><p><a href="https://github.com/PowerShell/PowerShell/releases">选择win-x64-msi安装</a><br>or</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">winget search Microsoft.PowerShell</span><br><span class="line">winget install --<span class="built_in">id</span> Microsoft.PowerShell --<span class="built_in">source</span> winget</span><br></pre></td></tr></table></figure><h2 id="install-scoop"><a href="#install-scoop" class="headerlink" title="install scoop"></a>install scoop</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope CurrentUser</span><br><span class="line">Invoke-RestMethod -Uri https://get.scoop.sh | Invoke-Expression</span><br></pre></td></tr></table></figure><h3 id="关于scoop"><a href="#关于scoop" class="headerlink" title="关于scoop"></a>关于scoop</h3><p>scoop是windows上的一个强大的包管理，可惜默认的软件仓库(main bucket)数量有限，因此我们需要添加额外的软件仓库：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># list support bucket</span></span><br><span class="line">❯ scoop bucket known</span><br><span class="line">main</span><br><span class="line">extras</span><br><span class="line">versions</span><br><span class="line">nirsoft</span><br><span class="line">sysinternals</span><br><span class="line">php</span><br><span class="line">nerd-fonts</span><br><span class="line">nonportable</span><br><span class="line">java</span><br><span class="line">games</span><br><span class="line"><span class="comment"># list bucket local</span></span><br><span class="line">❯ scoop bucket list</span><br><span class="line"></span><br><span class="line">Name   Source                                    Updated           Manifests</span><br><span class="line">----   ------                                    -------           ---------</span><br><span class="line">main   https://github.com/ScoopInstaller/Main    2024/8/6 12:29:26      1337</span><br><span class="line">extras https://gitee.com/scoop-bucket/extras.git 2024/8/6 8:35:51       2053</span><br></pre></td></tr></table></figure><p>一般来说只需要一个main和extras就够了</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scoop bucket add extras</span><br></pre></td></tr></table></figure><p>在scoop安装的过程中可能需要配置scoop的安装路径，但是我建议是都安装c盘，因为安装的基本都是常用而且比较小的，如编译器，rust构建的系统工具等等</p><h3 id="scoop-常用命令"><a href="#scoop-常用命令" class="headerlink" title="scoop 常用命令"></a>scoop 常用命令</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">scoop update * <span class="comment">#更新所有包</span></span><br><span class="line">scoop config proxy 127.0.0.1:7890 <span class="comment">#设置代理</span></span><br><span class="line">scoop uninstall appname</span><br><span class="line">scoop search appname</span><br><span class="line">scoop install appname</span><br><span class="line">scoop reset appname/* <span class="comment">#恢复app或者所有app</span></span><br></pre></td></tr></table></figure><p>下面是一些常用软件，包括编译器，rust小工具以及一些系统级工具(无需mingw和msys2，直接就能安装gcc和llvm，不花里胡哨)</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line">scoop list</span><br><span class="line">Installed apps:</span><br><span class="line"></span><br><span class="line">Name          Version                  Source Updated             Info</span><br><span class="line">----          -------                  ------ -------             ----</span><br><span class="line">7zip          24.07                    main   2024-06-20 21:02:13</span><br><span class="line">bat           0.24.0                   main   2023-11-29 20:48:29</span><br><span class="line">bottom        0.10.2                   main   2024-08-06 15:21:29</span><br><span class="line">broot         1.41.1                   main   2024-08-05 10:24:13</span><br><span class="line">cacert        2024-07-02               main   2024-07-03 10:43:22</span><br><span class="line">cmake         3.30.2                   main   2024-08-04 12:29:32</span><br><span class="line">curl          8.9.1_1                  main   2024-08-04 12:29:37</span><br><span class="line">dark          3.14                     main   2024-07-19 13:40:25</span><br><span class="line">delta         0.17.0                   main   2024-03-18 14:19:35</span><br><span class="line">duf           0.8.1                    main   2023-12-09 16:24:31</span><br><span class="line">dust          1.1.1                    main   2024-07-18 11:34:03</span><br><span class="line">eza           0.18.24                  main   2024-08-04 12:29:42</span><br><span class="line">fastfetch     2.21.0                   main   2024-08-05 16:54:07</span><br><span class="line">fd            10.1.0                   main   2024-05-10 10:55:01</span><br><span class="line">file          5.45                     main   2023-12-28 11:53:11</span><br><span class="line">fzf           0.54.3                   main   2024-08-04 12:29:48</span><br><span class="line">gcc           13.2.0                   main   2024-08-05 22:11:32</span><br><span class="line">gdu           5.29.0                   main   2024-07-16 15:09:31</span><br><span class="line">git           2.46.0                   main   2024-07-30 17:48:02</span><br><span class="line">glow          1.5.1                    main   2024-06-22 13:37:17</span><br><span class="line">go            1.22.5                   main   2024-07-03 10:44:28</span><br><span class="line">grex          1.4.5                    main   2024-03-09 13:16:11</span><br><span class="line">gsudo         2.5.1                    main   2024-05-31 15:47:23</span><br><span class="line">helix         24.07                    main   2024-07-15 11:32:41</span><br><span class="line">hyperfine     1.18.0                   main   2023-12-09 17:08:18</span><br><span class="line">imagemagick   7.1.1-36                 main   2024-08-02 10:41:01</span><br><span class="line">innounp       0.50                     main   2024-06-16 18:35:29</span><br><span class="line">jq            1.7.1                    main   2023-12-27 16:15:36</span><br><span class="line">keyviz        1.0.6                    extras 2024-06-16 18:35:35</span><br><span class="line">lazygit       0.43.1                   extras 2024-07-14 12:15:12</span><br><span class="line">less          661                      main   2024-07-01 20:00:40</span><br><span class="line">llvm          18.1.8                   main   2024-08-05 22:12:57</span><br><span class="line">lua           5.4.7-2                  main   2024-07-27 11:33:03</span><br><span class="line">luarocks      3.11.1                   main   2024-07-16 01:04:19</span><br><span class="line">make          4.4.1                    main   2023-11-29 21:01:44</span><br><span class="line">miller        6.12.0                   main   2024-06-22 13:41:01</span><br><span class="line">miniconda3    24.5.0-0                 extras 2024-07-19 13:49:32</span><br><span class="line">mpv           0.38.0                   extras 2024-06-19 21:20:39</span><br><span class="line">neovide       0.13.3                   extras 2024-07-18 11:34:07</span><br><span class="line">neovim        0.10.1                   main   2024-07-27 12:15:40</span><br><span class="line">ninja         1.12.1                   main   2024-05-18 13:33:50</span><br><span class="line">nodejs        22.5.1                   main   2024-07-21 17:02:34</span><br><span class="line">onefetch      2.21.0                   extras 2024-06-27 16:02:02</span><br><span class="line">ouch          0.5.1                    main   2024-06-22 13:43:50</span><br><span class="line">poppler       24.07.0-0                main   2024-07-27 22:41:12</span><br><span class="line">procs         0.14.6                   main   2024-07-30 17:51:00</span><br><span class="line">ripgrep       14.1.0                   main   2024-01-09 20:52:55</span><br><span class="line">ruby          3.3.4-1                  main   2024-07-12 11:28:59</span><br><span class="line">rust-analyzer 2024-08-05               main   2024-08-05 16:54:10</span><br><span class="line">scoop-search  1.5.0                    main   2024-07-10 10:40:35</span><br><span class="line">sd            1.0.0                    main   2023-12-09 16:55:11</span><br><span class="line">starship      1.20.1                   main   2024-07-27 22:42:34</span><br><span class="line">tealdeer      1.6.1                    main   2023-12-09 16:26:07</span><br><span class="line">tokei         12.1.2                   main   2023-11-29 20:46:57</span><br><span class="line">tree-sitter   0.22.6                   main   2024-05-10 10:55:49</span><br><span class="line">unar          1.8.1                    main   2023-12-27 16:15:44</span><br><span class="line">wezterm       20240203-110809-5046fc22 extras 2024-03-06 17:29:06</span><br><span class="line">wget          1.21.4                   main   2023-11-29 22:29:31</span><br><span class="line"><span class="built_in">which</span>         2.20                     main   2023-12-02 14:27:18</span><br><span class="line">whkd          0.2.1                    extras 2024-04-11 16:23:03</span><br><span class="line">yarn          1.22.22                  main   2024-05-25 22:07:31</span><br><span class="line">zoxide        0.9.4                    main   2024-02-22 12:17:08</span><br></pre></td></tr></table></figure><h2 id="安装-wezterm"><a href="#安装-wezterm" class="headerlink" title="安装 wezterm"></a>安装 wezterm</h2><p>wezterm是一个强大的跨平台终端模拟器，采用rust编写，在这个赛道有多个竞品，如alacritty，windows terminal，其中WT是json格式的config，alacritty作者摆烂，相比之下wezterm的作者就很勤快了，更重要的一个原因，wezterm是目前少数可以绕过windows下的ConPTY的terminal，它采用ssh的特性，使得wsl内可以实现很多原生linux才有的功能。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scoop install wezterm</span><br></pre></td></tr></table></figure><p>配置文件参考<a href="https://github.com/marigold0225/wezterm">wezterm</a>，位于~&#x2F;.config&#x2F;wezterm<br><img src="/2024/08/06/scoop/wezterm.png"></p><h2 id="powershell-配置"><a href="#powershell-配置" class="headerlink" title="powershell 配置"></a>powershell 配置</h2><p>在使用下面的配置文件之前，至少准备这些软件，都可以通过scoop安装：</p><ul><li>starship # rust 构建的shell外观美化</li><li>yazi # rust 构建的终端文件管理器</li><li>exa # rust 构建的系统工具，代替ls命令</li><li>zoxide # rust 构建的系统工具，代替cd命令</li></ul><p>也可以注释掉相应的部分来避免下载这些软件，接着打开powershell配置文件：notepad $PROFILE</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line">Import-Module PSReadLine</span><br><span class="line">Invoke-Expression (&amp;starship init powershell)</span><br><span class="line">Import-Module -Name Terminal-Icons</span><br><span class="line"></span><br><span class="line">Set-PSReadLineOption -EditMode Emacs</span><br><span class="line">Set-PSReadLineOption -PredictionSource HistoryAndPlugin</span><br><span class="line">Set-PSReadLineOption -HistorySearchCursorMovesToEnd</span><br><span class="line">Set-PSReadLineOption -HistorySaveStyle SaveIncrementally</span><br><span class="line">Set-PSReadLineOption -PredictionViewStyle ListView</span><br><span class="line">Set-PSReadLineOption -PredictionSource History</span><br><span class="line">Set-PSReadLineOption -BellStyle None</span><br><span class="line">Set-PSReadLineKeyHandler -Key <span class="string">&#x27;Tab&#x27;</span> -Function MenuComplete</span><br><span class="line">Set-PSReadLineKeyHandler -Key <span class="string">&#x27;Ctrl+z&#x27;</span> -Function undo</span><br><span class="line"></span><br><span class="line"><span class="comment"># Set-PSReadLineKeyHandler -Key &#x27;Tab&#x27; -Function Complete</span></span><br><span class="line"></span><br><span class="line">Set-PSReadLineKeyHandler -Key <span class="string">&#x27;Ctrl+k&#x27;</span> -Function HistorySearchBackward</span><br><span class="line">Set-PSReadLineKeyHandler -Key <span class="string">&#x27;Ctrl+j&#x27;</span> -Function HistorySearchForward</span><br><span class="line"></span><br><span class="line"><span class="comment">## open current folder</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> OpenCurrentFolder &#123;</span><br><span class="line">param (</span><br><span class="line"><span class="variable">$Path</span> = <span class="string">&#x27;.&#x27;</span></span><br><span class="line">)</span><br><span class="line">Invoke-Item <span class="variable">$Path</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">## yazi</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> yy &#123;</span><br><span class="line"><span class="variable">$tmp</span> = [System.IO.Path]::GetTempFileName()</span><br><span class="line">    yazi <span class="variable">$args</span> --cwd-file=<span class="string">&quot;<span class="variable">$tmp</span>&quot;</span></span><br><span class="line"><span class="variable">$cwd</span> = Get-Content -Path <span class="variable">$tmp</span></span><br><span class="line">    <span class="keyword">if</span> (-not [String]::IsNullOrEmpty(<span class="variable">$cwd</span>) -and <span class="variable">$cwd</span> -ne <span class="variable">$PWD</span>.Path) &#123;</span><br><span class="line">Set-Location -LiteralPath <span class="variable">$cwd</span></span><br><span class="line">&#125;</span><br><span class="line">Remove-Item -Path <span class="variable">$tmp</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">## k is a function to kill a process by its ID</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> k &#123;</span><br><span class="line">Stop-Process -Id <span class="variable">$args</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">## exa replace ls</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="built_in">ls</span> &#123;</span><br><span class="line">exa --icons --group-directories-first --color-scale --color=always --git --long --all --header --time-style=long-iso --group --classify <span class="variable">$args</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> l &#123;</span><br><span class="line">exa -lbah @args</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> ll &#123;</span><br><span class="line">exa -lbg @args</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> la &#123;</span><br><span class="line">exa -lbahg @args</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">## Set-Alias</span></span><br><span class="line"></span><br><span class="line">Set-Alias -Name vi -Value nvim</span><br><span class="line">Set-Alias -Name br -Value broot</span><br><span class="line">Set-Alias -Name open -Value OpenCurrentFolder</span><br><span class="line">Set-Alias -Name nide -Value neovide</span><br><span class="line"></span><br><span class="line">Invoke-Expression (&amp; &#123; (zoxide init powershell | Out-String) &#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="WSL2-CUDA"><a href="#WSL2-CUDA" class="headerlink" title="WSL2 CUDA"></a>WSL2 CUDA</h1><p>wsl2的安装不作介绍，两个概念：nvidia-smi是驱动,是nvidia显卡正常使用所必须的环境，nvcc是runtime，用于编译cpp和cu代码，NVIDIA官方建议在wsl2中无需安装任何cuda驱动，因为windows内安装完驱动之后，wsl内能自动识别到驱动：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">which</span> nvidia-smi</span><br><span class="line">/usr/lib/wsl/lib/nvidia-smi</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>要在wsl内安装nvcc，则需要单独安装cuda-toolkit，但是一些linux发行版默认的包管理器安装cuda，会包含驱动，为了避免驱动覆盖，我们只需要单独安装cuda-toolkit，幸运的是，archlinux的pacman内的两个package均不含驱动，直接安装即可，如果是其他发行版，移步<a href="https://developer.nvidia.com/cuda-downloads?target_os=Linux&target_arch=x86_64">NVIDIA</a>，选择特定的版本安装。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> pacman -S cuda cuda-tools</span><br><span class="line"><span class="built_in">sudo</span> pacman -Ss cuda</span><br><span class="line">extra/cuda 12.5.1-1 [installed]</span><br><span class="line">NVIDIA<span class="string">&#x27;s GPU programming toolkit</span></span><br><span class="line"><span class="string">extra/cuda-tools 12.5.1-1 [installed]</span></span><br><span class="line"><span class="string">NVIDIA&#x27;</span>s GPU programming toolkit (extra tools: nvvp, nsight)</span><br></pre></td></tr></table></figure><p>该安装可能会额外下载一个gcc-13或者其他版本，因为nvcc也对gcc版本有要求，这时候如果我们默认的gcc版本不兼容，我们需要指定环境变量cuda_host_CXX：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># nvidia hpc-sdk 用来编译fortran, 需要单独下载，搜索hpc-sdk</span></span><br><span class="line"><span class="built_in">export</span> NVARCH=`<span class="built_in">uname</span> -s`_`<span class="built_in">uname</span> -m`</span><br><span class="line"><span class="built_in">export</span> NVCOMPILERS=/opt/nvidia/hpc_sdk</span><br><span class="line"><span class="built_in">export</span> MANPATH=<span class="variable">$MANPATH</span>:<span class="variable">$NVCOMPILERS</span>/<span class="variable">$NVARCH</span>/24.7/compilers/man</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$NVCOMPILERS</span>/<span class="variable">$NVARCH</span>/24.7/compilers/bin:<span class="variable">$PATH</span></span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$NVCOMPILERS</span>/<span class="variable">$NVARCH</span>/24.7/comm_libs/mpi/bin:<span class="variable">$PATH</span></span><br><span class="line"><span class="built_in">export</span> MANPATH=<span class="variable">$MANPATH</span>:<span class="variable">$NVCOMPILERS</span>/<span class="variable">$NVARCH</span>/24.7/comm_libs/mpi/man</span><br><span class="line"><span class="built_in">export</span> MODULEPATH=<span class="variable">$NVCOMPILERS</span>/modulefiles:<span class="variable">$MODULEPATH</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## cuda</span></span><br><span class="line"><span class="built_in">export</span> CUDADIR=/opt/cuda</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$CUDADIR</span>/bin:<span class="variable">$PATH</span></span><br><span class="line"><span class="built_in">export</span> LD_LIBRARY_PATH=<span class="variable">$&#123;LD_LIBRARY_PATH:+$LD_LIBRARY_PATH:&#125;</span><span class="variable">$CUDADIR</span>/lib</span><br><span class="line"><span class="built_in">export</span> CPLUS_INCLUDE_PATH=<span class="variable">$CUDADIR</span>/include:<span class="variable">$CPLUS_INCLUDE_PATH</span></span><br><span class="line"><span class="built_in">export</span> CUDA_HOME=/opt/cuda</span><br><span class="line"><span class="comment">## cuda_host_CXX</span></span><br><span class="line"><span class="built_in">export</span> NVCC-CCBIN=/usr/bin/g++-13</span><br></pre></td></tr></table></figure><p>以上hpc-sdk和cuda都内置了nvcc，且版本一致，那为什么要下载两个呢？首先nvcc虽然看上去是一个cuda编译器，但是它实际上是一个驱动，用于调用g++编译cpp代码并且和cu代码链接起来，形成最终的可执行程序。它本身并不编译cpp，并且cuda toolkit内置了一系列cuda库，包括cuBLAS，cuFFT，cuDNN，TensorRT，一系列调试和性能分析工具，多用于机器学习，数据分析和科学计算中，而hpc-sdk是包含了CUDA的部分componet以及一系列编译器，nvfortran(没错，我就是为了这个下载的，并且hpc-sdk不支持windows)，nvc，nvc++，这个nvc++就可以直接编译cu文件。<br>hpc-sdk内置的编译器：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">❯ <span class="built_in">which</span> nvcc                          </span><br><span class="line">/opt/nvidia/hpc_sdk/Linux_x86_64/24.7/compilers/bin/nvcc</span><br><span class="line">❯ nvc -V                              </span><br><span class="line"></span><br><span class="line">nvc 24.7-0 64-bit target on x86-64 Linux -tp alderlake </span><br><span class="line">NVIDIA Compilers and Tools</span><br><span class="line">Copyright (c) 2024, NVIDIA CORPORATION &amp; AFFILIATES.  All rights reserved.</span><br><span class="line">❯ nvc++ -V</span><br><span class="line"></span><br><span class="line">nvc++ 24.7-0 64-bit target on x86-64 Linux -tp alderlake </span><br><span class="line">NVIDIA Compilers and Tools</span><br><span class="line">Copyright (c) 2024, NVIDIA CORPORATION &amp; AFFILIATES.  All rights reserved.</span><br><span class="line">❯ nvcc -V                   </span><br><span class="line">nvcc: NVIDIA (R) Cuda compiler driver</span><br><span class="line">Copyright (c) 2005-2024 NVIDIA Corporation</span><br><span class="line">Built on Thu_Jun__6_02:18:23_PDT_2024</span><br><span class="line">Cuda compilation tools, release 12.5, V12.5.82</span><br><span class="line">Build cuda_12.5.r12.5/compiler.34385749_0</span><br><span class="line">❯ nvfortran -V                         </span><br><span class="line"></span><br><span class="line">nvfortran 24.7-0 64-bit target on x86-64 Linux -tp alderlake </span><br><span class="line">NVIDIA Compilers and Tools</span><br><span class="line">Copyright (c) 2024, NVIDIA CORPORATION &amp; AFFILIATES.  All rights reserved.</span><br></pre></td></tr></table></figure><p>看上去hpc-sdk的编译器(nvcc,nvc,nvc++,nvfortran)比cuda的编译器(nvcc)完整，但是cuda的头文件比hpc-sdk内置cuda头文件更完整：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 在cuda和hpc-sdk的安装目录下，我们分别查看头文件库，可以发现数量是不一致的，比如curand.h这个头文件hpc-sdk就没有:</span></span><br><span class="line">❯ <span class="built_in">pwd</span></span><br><span class="line">/opt/cuda/include</span><br><span class="line">❯ <span class="built_in">ls</span> | <span class="built_in">wc</span> -l</span><br><span class="line">156</span><br><span class="line">❯ <span class="built_in">ls</span> | rg cur</span><br><span class="line">curand.h</span><br><span class="line">curand_discrete.h</span><br><span class="line">curand_discrete2.h</span><br><span class="line">curand_globals.h</span><br><span class="line">curand_kernel.h</span><br><span class="line">curand_lognormal.h</span><br><span class="line">curand_mrg32k3a.h</span><br><span class="line">curand_mtgp32.h</span><br><span class="line">curand_mtgp32_host.h</span><br><span class="line">curand_mtgp32_kernel.h</span><br><span class="line">curand_mtgp32dc_p_11213.h</span><br><span class="line">curand_normal.h</span><br><span class="line">curand_normal_static.h</span><br><span class="line">curand_philox4x32_x.h</span><br><span class="line">curand_poisson.h</span><br><span class="line">curand_precalc.h</span><br><span class="line">curand_uniform.h</span><br><span class="line">❯ <span class="built_in">pwd</span></span><br><span class="line">/opt/nvidia/hpc_sdk/Linux_x86_64/2024/cuda/include</span><br><span class="line">❯ <span class="built_in">ls</span> | <span class="built_in">wc</span> -l </span><br><span class="line">119</span><br><span class="line">❯ <span class="built_in">ls</span> | rg cur</span><br></pre></td></tr></table></figure><p>所以一般来说只需要下载cuda就够了(除非需要用到特定的编译器)，上面hpc-sdk的部分可以先注释掉</p><h2 id="测试代码"><a href="#测试代码" class="headerlink" title="测试代码"></a>测试代码</h2><p>首先是CMakeLists:</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">cmake_minimum_required</span>(VERSION <span class="number">3.28</span>)</span><br><span class="line"><span class="keyword">set</span>(CMAKE_CUDA_ARCHITECTURES <span class="string">&quot;native&quot;</span>)</span><br><span class="line"><span class="keyword">project</span>(<span class="keyword">test</span> CUDA)</span><br><span class="line"></span><br><span class="line"><span class="keyword">set</span>(CMAKE_CUDA_STANDARD <span class="number">20</span>)</span><br><span class="line"><span class="keyword">add_executable</span>(<span class="keyword">test</span> main.cu)</span><br><span class="line"></span><br><span class="line"><span class="keyword">set_target_properties</span>(<span class="keyword">test</span> PROPERTIES CUDA_SEPARABLE_COMPILATION <span class="keyword">ON</span>)</span><br></pre></td></tr></table></figure><p>main.cu:</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cuda_runtime.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function">__global__ <span class="type">void</span> <span class="title">cuda_hello</span><span class="params">()</span> </span>&#123; <span class="built_in">printf</span>(<span class="string">&quot;hello world from GPU!\n&quot;</span>); &#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">auto</span> <span class="title">main</span><span class="params">()</span> -&gt; <span class="type">int</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cuda_hello&lt;&lt;&lt;<span class="number">1</span>, <span class="number">10</span>&gt;&gt;&gt;();</span><br><span class="line">    <span class="built_in">cudaDeviceReset</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>首先，如果没有环境变量NVCC-CCBIN&#x3D;&#x2F;usr&#x2F;bin&#x2F;g++-13，直接使用nvcc编译，你可能会得到错误:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">❯ nvcc main.cu </span><br><span class="line">In file included from /opt/nvidia/hpc_sdk/Linux_x86_64/24.7/cuda/12.5/include/cuda_runtime.h:82,</span><br><span class="line">                 from &lt;command-line&gt;:</span><br><span class="line">/opt/nvidia/hpc_sdk/Linux_x86_64/24.7/cuda/12.5/include/crt/host_config.h:143:2: error: <span class="comment">#error -</span></span><br><span class="line">- unsupported GNU version! gcc versions later than 13 are not supported! The nvcc flag <span class="string">&#x27;-allow-u</span></span><br><span class="line"><span class="string">nsupported-compiler&#x27;</span> can be used to override this version check; however, using an unsupported h</span><br><span class="line">ost compiler may cause compilation failure or incorrect run time execution. Use at your own risk</span><br><span class="line">.</span><br><span class="line">  143 | <span class="comment">#error -- unsupported GNU version! gcc versions later than 13 are not supported! The nvc</span></span><br><span class="line">c flag <span class="string">&#x27;-allow-unsupported-compiler&#x27;</span> can be used to override this version check; however, using </span><br><span class="line">an unsupported host compiler may cause compilation failure or incorrect run time execution. Use </span><br><span class="line">at your own risk.</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>大概意思就是gcc版本不对，此时我们加上参数-ccbin gcc-13，这个gcc-13是下载cuda时自带的:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"> nvcc -ccbin gcc-13 main.cu</span><br><span class="line"> ./a.out</span><br><span class="line">hello world from GPU!</span><br><span class="line">hello world from GPU!</span><br><span class="line">hello world from GPU!</span><br><span class="line">hello world from GPU!</span><br><span class="line">hello world from GPU!</span><br><span class="line">hello world from GPU!</span><br><span class="line">hello world from GPU!</span><br><span class="line">hello world from GPU!</span><br><span class="line">hello world from GPU!</span><br><span class="line">hello world from GPU!</span><br></pre></td></tr></table></figure><p>也可以直接用nvc++编译(如果下载的有hpc-sdk的话)：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">❯ nvc++ main.cu</span><br><span class="line">❯ ./a.out</span><br><span class="line">hello world from GPU!</span><br><span class="line">hello world from GPU!</span><br><span class="line">hello world from GPU!</span><br><span class="line">hello world from GPU!</span><br><span class="line">hello world from GPU!</span><br><span class="line">hello world from GPU!</span><br><span class="line">hello world from GPU!</span><br><span class="line">hello world from GPU!</span><br><span class="line">hello world from GPU!</span><br><span class="line">hello world from GPU!</span><br></pre></td></tr></table></figure><p>如果在.cu的程序内包含了c++的标准库(比如各种STL)，需要指定c++链接库，因为nvcc并不处理c++的依赖：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cuda_runtime.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="function">__global__ <span class="type">void</span> <span class="title">cuda_hello</span><span class="params">()</span> </span>&#123; <span class="built_in">printf</span>(<span class="string">&quot;hello world from GPU!\n&quot;</span>); &#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">auto</span> <span class="title">main</span><span class="params">()</span> -&gt; <span class="type">int</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cuda_hello&lt;&lt;&lt;<span class="number">1</span>, <span class="number">10</span>&gt;&gt;&gt;();</span><br><span class="line">    <span class="built_in">cudaDeviceReset</span>();</span><br><span class="line"></span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Hello world from CPU use STL!&quot;</span> &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>此时继续编译会报错：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">❯ nvcc -ccbin gcc-13 main.cu</span><br><span class="line">/usr/sbin/ld: /tmp/tmpxft_0001c412_00000000-11_main.o: warning: relocation again</span><br><span class="line">st `_ZSt4cout<span class="string">&#x27; in read-only section `.text&#x27;</span></span><br><span class="line">/usr/sbin/ld: /tmp/tmpxft_0001c412_00000000-11_main.o: <span class="keyword">in</span> <span class="keyword">function</span> `main<span class="string">&#x27;:</span></span><br><span class="line"><span class="string">tmpxft_0001c412_00000000-6_main.cudafe1.cpp:(.text+0xa6): undefined reference to</span></span><br><span class="line"><span class="string"> `std::cout&#x27;</span></span><br><span class="line">/usr/sbin/ld: tmpxft_0001c412_00000000-6_main.cudafe1.cpp:(.text+0xae): undefine</span><br><span class="line">d reference to `std::basic_ostream&lt;char, std::char_traits&lt;char&gt; &gt;&amp; std::operator</span><br><span class="line">&lt;&lt; &lt;std::char_traits&lt;char&gt; &gt;(std::basic_ostream&lt;char, std::char_traits&lt;char&gt; &gt;&amp;,</span><br><span class="line"> char const*)<span class="string">&#x27;</span></span><br><span class="line"><span class="string">/usr/sbin/ld: tmpxft_0001c412_00000000-6_main.cudafe1.cpp:(.text+0xb5): undefine</span></span><br><span class="line"><span class="string">d reference to `std::basic_ostream&lt;char, std::char_traits&lt;char&gt; &gt;&amp; std::endl&lt;cha</span></span><br><span class="line"><span class="string">r, std::char_traits&lt;char&gt; &gt;(std::basic_ostream&lt;char, std::char_traits&lt;char&gt; &gt;&amp;)&#x27;</span></span><br><span class="line">/usr/sbin/ld: tmpxft_0001c412_00000000-6_main.cudafe1.cpp:(.text+0xc0): undefine</span><br><span class="line">d reference to `std::ostream::operator&lt;&lt;(std::ostream&amp; (*)(std::ostream&amp;))<span class="string">&#x27;</span></span><br><span class="line"><span class="string">/usr/sbin/ld: warning: creating DT_TEXTREL in a PIE</span></span><br><span class="line"><span class="string">collect2: error: ld returned 1 exit status</span></span><br></pre></td></tr></table></figure><p>加上-lstdc++命令之后成功：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">❯ nvcc -ccbin gcc-13 main.cu -lstdc++</span><br><span class="line">❯ ./a.out</span><br><span class="line">hello world from GPU!</span><br><span class="line">hello world from GPU!</span><br><span class="line">hello world from GPU!</span><br><span class="line">hello world from GPU!</span><br><span class="line">hello world from GPU!</span><br><span class="line">hello world from GPU!</span><br><span class="line">hello world from GPU!</span><br><span class="line">hello world from GPU!</span><br><span class="line">hello world from GPU!</span><br><span class="line">hello world from GPU!</span><br><span class="line">Hello world from CPU use STL!</span><br></pre></td></tr></table></figure><p>所以最好用NVCC-CCBIN环境变量来指定host端的c++compiler，这样直接使用nvcc编译，也会自动链接到对应的库<br>如果使用cmake编译：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"> cmake .. &amp;&amp; make -j</span><br><span class="line">-- The CUDA compiler identification is NVIDIA 12.5.82</span><br><span class="line">-- Detecting CUDA compiler ABI info</span><br><span class="line">-- Detecting CUDA compiler ABI info - <span class="keyword">done</span></span><br><span class="line">-- Check <span class="keyword">for</span> working CUDA compiler: /opt/cuda/bin/nvcc - skipped</span><br><span class="line">-- Detecting CUDA compile features</span><br><span class="line">-- Detecting CUDA compile features - <span class="keyword">done</span></span><br><span class="line">-- Configuring <span class="keyword">done</span> (3.7s)</span><br><span class="line">-- Generating <span class="keyword">done</span> (0.0s)</span><br><span class="line">-- Build files have been written to: /home/mafu/Documents/cuda/0/build</span><br><span class="line">[ 33%] Building CUDA object CMakeFiles/test.dir/main.cu.o</span><br><span class="line">[ 66%] Linking CUDA device code CMakeFiles/test.dir/cmake_device_link.o</span><br><span class="line">[100%] Linking CUDA executable <span class="built_in">test</span></span><br><span class="line">[100%] Built target <span class="built_in">test</span></span><br><span class="line"> ./test</span><br><span class="line">hello world from GPU!</span><br><span class="line">hello world from GPU!</span><br><span class="line">hello world from GPU!</span><br><span class="line">hello world from GPU!</span><br><span class="line">hello world from GPU!</span><br><span class="line">hello world from GPU!</span><br><span class="line">hello world from GPU!</span><br><span class="line">hello world from GPU!</span><br><span class="line">hello world from GPU!</span><br><span class="line">hello world from GPU!</span><br></pre></td></tr></table></figure><p>（同样，如果包含c++标准库请在CMakelists.txt末尾添加: target_link_libraries(test stdc++)<br>但是假如我们把NVCC-CCBIN变量从zshrc内移除：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"> <span class="built_in">echo</span> <span class="variable">$NVCC</span>-CCBIN (无输出)</span><br><span class="line"></span><br><span class="line"> cmake .. &amp;&amp; make -j</span><br><span class="line">CMake Error at /usr/share/cmake/Modules/CMakeDetermineCompilerId.cmake:838 (message):</span><br><span class="line">  Compiling the CUDA compiler identification <span class="built_in">source</span> file</span><br><span class="line">  <span class="string">&quot;CMakeCUDACompilerId.cu&quot;</span> failed.</span><br><span class="line"></span><br><span class="line">  Compiler: /opt/cuda/bin/nvcc</span><br><span class="line"></span><br><span class="line">  Build flags:</span><br><span class="line"></span><br><span class="line">  Id flags: --keep;--keep-dir;tmp -v</span><br></pre></td></tr></table></figure><p>一大堆看不懂的错误，此时要想正常编译，需要以下参数指定版本:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cmake -DCMAKE_CUDA_FLAGS=<span class="string">&quot;-ccbin /usr/bin/gcc-13&quot;</span> ..</span><br></pre></td></tr></table></figure><p>总而言之，cmake貌似默认使用nvcc作为编译器，wsl下要想编译cu代码，请使用以下命令:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">nvcc -ccbin gcc-13 main.cu -lstdc++</span><br><span class="line">nvcc main.cu <span class="comment">#(指定NVCC-CCBIN)</span></span><br><span class="line"><span class="comment"># or</span></span><br><span class="line">nvc++ main.cu</span><br><span class="line"><span class="comment"># or cmake (with export NVCC-CCBIN=/usr/bin/g++-13)</span></span><br><span class="line">cmake .. &amp;&amp; make</span><br><span class="line"><span class="comment"># or without NVCC-CCBIN</span></span><br><span class="line">cmake -DCMAKE_CUDA_FLAGS=<span class="string">&quot;-ccbin /usr/bin/gcc-13&quot;</span> ..</span><br><span class="line"><span class="comment"># 即注意nvcc支持的gcc版本以及c++标准库</span></span><br></pre></td></tr></table></figure><h2 id="测试代码2（c-和cuda混合编译）"><a href="#测试代码2（c-和cuda混合编译）" class="headerlink" title="测试代码2（c++和cuda混合编译）"></a>测试代码2（c++和cuda混合编译）</h2><p>CMakeLists</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">cmake_minimum_required</span>(VERSION <span class="number">3.28</span>)</span><br><span class="line"><span class="keyword">set</span>(CMAKE_CUDA_ARCHITECTURES <span class="string">&quot;native&quot;</span>)</span><br><span class="line"><span class="keyword">project</span>(cuda_project CUDA CXX)</span><br><span class="line"></span><br><span class="line"><span class="keyword">set</span>(CMAKE_CUDA_STANDARD <span class="number">17</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">add_executable</span>(cuda_project main.cpp kernel1.cu kernel2.cu)</span><br><span class="line"></span><br><span class="line"><span class="keyword">set_target_properties</span>(cuda_project PROPERTIES CUDA_SEPARABLE_COMPILATION <span class="keyword">ON</span>)</span><br></pre></td></tr></table></figure><p>main.cpp</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">kernel1</span><span class="params">()</span></span>;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">kernel2</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">auto</span> <span class="title">main</span><span class="params">()</span> -&gt; <span class="type">int</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Calling kernel1&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    <span class="built_in">kernel1</span>();</span><br><span class="line"></span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Calling kernel2&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    <span class="built_in">kernel2</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>kernel1</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function">__global__ <span class="type">void</span> <span class="title">kernel1_func</span><span class="params">()</span> </span>&#123; <span class="built_in">printf</span>(<span class="string">&quot;Hello from kernel1\n&quot;</span>); &#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">kernel1</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    kernel1_func&lt;&lt;&lt;<span class="number">1</span>, <span class="number">1</span>&gt;&gt;&gt;();</span><br><span class="line">    <span class="built_in">cudaDeviceSynchronize</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>kernel2</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function">__global__ <span class="type">void</span> <span class="title">kernel2_func</span><span class="params">()</span> </span>&#123; <span class="built_in">printf</span>(<span class="string">&quot;Hello from kernel2\n&quot;</span>); &#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">kernel2</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    kernel2_func&lt;&lt;&lt;<span class="number">1</span>, <span class="number">1</span>&gt;&gt;&gt;();</span><br><span class="line">    <span class="built_in">cudaDeviceSynchronize</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>编译</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">❯ cmake .. &amp;&amp; make -j</span><br><span class="line">-- The CUDA compiler identification is NVIDIA <span class="number">12.5</span>.<span class="number">82</span></span><br><span class="line">-- The CXX compiler identification is GNU <span class="number">14.2</span>.<span class="number">1</span></span><br><span class="line">-- Detecting CUDA compiler ABI info</span><br><span class="line">-- Detecting CUDA compiler ABI info - done</span><br><span class="line">-- Check for working CUDA compiler: /opt/cuda/bin/nvcc - skipped</span><br><span class="line">-- Detecting CUDA compile features</span><br><span class="line">-- Detecting CUDA compile features - done</span><br><span class="line">-- Detecting CXX compiler ABI info</span><br><span class="line">-- Detecting CXX compiler ABI info - done</span><br><span class="line">-- Check for working CXX compiler: /usr/sbin/c++ - skipped</span><br><span class="line">-- Detecting CXX compile features</span><br><span class="line">-- Detecting CXX compile features - done</span><br><span class="line">-- Configuring done (<span class="number">4.7</span>s)</span><br><span class="line">-- Generating done (<span class="number">0.0</span>s)</span><br><span class="line">-- Build files have been written to: /home/mafu/Documents/cuda/<span class="keyword">test</span>/build</span><br><span class="line">[ <span class="number">40</span>%] Building CUDA object CMakeFiles/cuda_project.dir/kernel1.cu.o</span><br><span class="line">[ <span class="number">40</span>%] Building CXX object CMakeFiles/cuda_project.dir/main.cpp.o</span><br><span class="line">[ <span class="number">60</span>%] Building CUDA object CMakeFiles/cuda_project.dir/kernel2.cu.o</span><br><span class="line">[ <span class="number">80</span>%] Linking CUDA device code CMakeFiles/cuda_project.dir/cmake_device_link.o</span><br><span class="line">[<span class="number">100</span>%] Linking CXX executable cuda_project</span><br><span class="line">[<span class="number">100</span>%] Built <span class="keyword">target</span> cuda_project</span><br><span class="line">❯ ./cuda_project</span><br><span class="line">Calling kernel1</span><br><span class="line">Hello from kernel1</span><br><span class="line">Calling kernel2</span><br><span class="line">Hello from kernel2</span><br></pre></td></tr></table></figure><p>另外，可能你已经发现了cmake的输出信息，显示识别到CXX编译器版本是GNU 14.2.1，并不是gcc-13，这是为什么呢？因为我们的环境变量里指定了export NVCC-CCBIN&#x3D;&#x2F;usr&#x2F;bin&#x2F;g++-13，虽然识别到gcc14，但是编译还是使用的gcc13，不信可以将这个变量取消验证，cmake会报错的，提示没有set cxx编译器。</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;Windows 下的一些配置，包括powershell，scoop，wsl2等。&lt;/p&gt;</summary>
    
    
    
    
    <category term="windows" scheme="http://marigold0225.github.io/tags/windows/"/>
    
    <category term="wsl2" scheme="http://marigold0225.github.io/tags/wsl2/"/>
    
  </entry>
  
  <entry>
    <title>latex-tikz</title>
    <link href="http://marigold0225.github.io/2021/11/28/latex-tikz/"/>
    <id>http://marigold0225.github.io/2021/11/28/latex-tikz/</id>
    <published>2021-11-28T06:29:49.000Z</published>
    <updated>2025-06-12T05:58:12.002Z</updated>
    
    <content type="html"><![CDATA[<p>latex下tikz作图</p><span id="more"></span><h2 id="在线编辑"><a href="#在线编辑" class="headerlink" title="在线编辑"></a>在线编辑</h2><p>直接给两个网址<a href="https://tikzcd.yichuanshen.de/">tikzcd-editor</a>,<a href="http://www.tlhiv.org/ltxpreview/">latex-preview</a>.</p><h2 id="一些例子"><a href="#一些例子" class="headerlink" title="一些例子"></a>一些例子</h2><p>展示下tikz能做的图</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">\begin&#123;tikzpicture&#125;[domain=0:4]</span><br><span class="line">  \draw[very thin,color=gray] (-0.1,-1.1) grid (3.9,3.9);</span><br><span class="line">  \draw[-&gt;] (-0.2,0) -- (4.2,0) node[right] &#123;$x$&#125;;</span><br><span class="line">  \draw[-&gt;] (0,-1.2) -- (0,4.2) node[above] &#123;$f(x)$&#125;;</span><br><span class="line">  \draw[color=red]    plot (\x,\x)             node[right] &#123;$f(x) =x$&#125;;</span><br><span class="line">  \draw[color=blue]   plot (\x,&#123;sin(\x r)&#125;)    node[right] &#123;$f(x) = \sin x$&#125;;</span><br><span class="line">  \draw[color=orange] plot (\x,&#123;0.05*exp(\x)&#125;) node[right] &#123;$f(x) = \frac&#123;1&#125;&#123;20&#125; \mathrm e^x$&#125;;</span><br><span class="line">\end&#123;tikzpicture&#125;</span><br></pre></td></tr></table></figure><p><img src="/2021/11/28/latex-tikz/1.svg"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">\usetikzlibrary&#123;decorations.pathmorphing&#125;</span><br><span class="line">\begin&#123;tikzpicture&#125;[line width=0.2mm,scale=1.0545]\small</span><br><span class="line">\tikzset&#123;&gt;=stealth&#125;</span><br><span class="line">\tikzset&#123;snake it/.style=&#123;-&gt;,semithick,</span><br><span class="line">decoration=&#123;snake,amplitude=.3mm,segment length=2.5mm,post length=0.9mm&#125;,decorate&#125;&#125;</span><br><span class="line">\def\h&#123;3&#125;</span><br><span class="line">\def\d&#123;0.2&#125;</span><br><span class="line">\def\ww&#123;1.4&#125;</span><br><span class="line">\def\w&#123;1+\ww&#125;</span><br><span class="line">\def\p&#123;1.5&#125;</span><br><span class="line">\def\r&#123;0.7&#125;</span><br><span class="line">\coordinate[label=below:$A_1$] (A1) at (\ww,\p);</span><br><span class="line">\coordinate[label=above:$B_1$] (B1) at (\ww,\p+\h);</span><br><span class="line">\coordinate[label=below:$A_2$] (A2) at (\w,\p);</span><br><span class="line">\coordinate[label=above:$B_2$] (B2) at (\w,\p+\h);</span><br><span class="line">\coordinate[label=left:$C$] (C1) at (0,0);</span><br><span class="line">\coordinate[label=left:$D$] (D) at (0,\h);</span><br><span class="line">\draw[fill=blue!14](A2)--(B2)-- ++(\d,0)-- ++(0,-\h)--cycle;</span><br><span class="line">\draw[gray,thin](C1)-- +(\w+\d,0);</span><br><span class="line">\draw[dashed,gray,fill=blue!5](A1)-- (B1)-- ++(\d,0)-- ++(0,-\h)-- cycle;</span><br><span class="line">\draw[dashed,line width=0.14mm](A1)--(C1)--(D)--(B1);</span><br><span class="line">\draw[snake it](C1)--(A2) node[pos=0.6,below] &#123;$c\Delta t$&#125;;</span><br><span class="line">\draw[-&gt;,semithick](\ww,\p+0.44*\h)-- +(\w-\ww,0) node[pos=0.6,above] &#123;$v\Delta t$&#125;;</span><br><span class="line">\draw[snake it](D)--(B2);</span><br><span class="line">\draw[thin](\r,0) arc (0:atan2(\p,\w):\r) node[midway,right,yshift=0.06cm] &#123;$\theta$&#125;;</span><br><span class="line">\draw[opacity=0](-0.40,-0.14)-- ++(0,5.06);</span><br><span class="line">\end&#123;tikzpicture&#125;</span><br></pre></td></tr></table></figure><p><img src="/2021/11/28/latex-tikz/2.svg"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">\begin&#123;tikzcd&#125; T</span><br><span class="line">\arrow[drr, bend left, &quot;x&quot;]</span><br><span class="line">\arrow[ddr, bend right, &quot;y&quot;]</span><br><span class="line">\arrow[dr, dotted, &quot;&#123;(x,y)&#125;&quot;] &amp; &amp; \\</span><br><span class="line">&amp; X \times_Z Y \arrow[r, &quot;p&quot;] \arrow[d, &quot;q&quot;]&amp; X \arrow[d, &quot;f&quot;] \\</span><br><span class="line">&amp; Y \arrow[r, &quot;g&quot;]&amp; Z</span><br><span class="line">\end&#123;tikzcd&#125;</span><br></pre></td></tr></table></figure><p><img src="/2021/11/28/latex-tikz/5.svg"><br>甚至！</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">\usetikzlibrary&#123;positioning, arrows.meta&#125;</span><br><span class="line">\tikzset&#123;</span><br><span class="line">  rect1/.style = &#123;</span><br><span class="line">    shape = rectangle,</span><br><span class="line">    draw = green,</span><br><span class="line">    text width = 3cm,</span><br><span class="line">    align = center,</span><br><span class="line">    minimum height = 1cm,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">\tikzset&#123;</span><br><span class="line">  arrow1/.style = &#123;</span><br><span class="line">    draw = purple, thick, -&#123;Latex[length = 4mm, width = 1.5mm]&#125;,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">\tikzset&#123;</span><br><span class="line">  arrow2/.style = &#123;</span><br><span class="line">    draw = purple, thick, &#123;Latex[length = 4mm, width = 1.5mm]&#125;-&#123;Latex[length = 4mm, width = 1.5mm]&#125;,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">\begin&#123;center&#125;</span><br><span class="line">  \begin&#123;tikzpicture&#125;</span><br><span class="line">    \node[rect1, fill = green!60!white](lexical)&#123;lexical analysis&#125;;</span><br><span class="line">    \node[rect1, fill = green!40!white, below = of lexical](Gramma)&#123;Gramma analysis&#125;;</span><br><span class="line">    \node[rect1, fill = green!20!white, below = of Gramma, text width = 5cm](Semantic middle)&#123;Semantic Analysis、Intermediate representation&#125;;</span><br><span class="line">    \node[rect1, fill = green!60!black, below = of Semantic middle](optimization)&#123;\color&#123;white&#125;Code optimization&#125;;</span><br><span class="line">    \node[rect1, fill = green!30!black, below = of optimization](generate)&#123;\color&#123;white&#125;Code generation&#125;;</span><br><span class="line">    \node[rectangle, fill = red!20!white, draw = red, text width = 2.0cm, minimum height = 4cm, align = center, left = 2cm of Semantic middle](Symbol)&#123;Symbol table management&#125;;</span><br><span class="line">    \node[rectangle, fill = blue!20!white, draw = blue, text width = 2.0cm, minimum height = 4cm, align = center, right = 2cm of Semantic middle](Error handling)&#123;Error handling&#125;;</span><br><span class="line">    \draw[arrow1](0, 50pt)node[right, yshift = -15pt]&#123;Input source program&#125; -- (lexical);</span><br><span class="line">    \draw[arrow1](lexical) -- node[right]&#123;Word flow&#125;(Gramma);</span><br><span class="line">    \draw[arrow1](Gramma) -- node[right]&#123;grammar&#125;(Semantic middle);</span><br><span class="line">    \draw[arrow1](Semantic middle) -- node[right]&#123;Middle representation&#125;(optimization);</span><br><span class="line">    \draw[arrow1](optimization) -- node[right]&#123;Middle representation after optimization&#125;(generate);</span><br><span class="line">    \draw[arrow1](generate) -- node[right, yshift = 5pt, xshift = 5pt]&#123;Object code&#125;++(0, -50pt);</span><br><span class="line">    \draw[arrow2](Symbol) -- (lexical.west);</span><br><span class="line">    \draw[arrow2](Symbol) -- (Gramma.west);</span><br><span class="line">    \draw[arrow2](Symbol) -- (Semantic middle);</span><br><span class="line">    \draw[arrow2](Symbol) -- (optimization.west);</span><br><span class="line">    \draw[arrow2](Symbol) -- (generate.west);</span><br><span class="line">    \draw[arrow2](Error handling) -- (lexical.east);</span><br><span class="line">    \draw[arrow2](Error handling) -- (Gramma.east);</span><br><span class="line">    \draw[arrow2](Error handling) -- (Semantic middle);</span><br><span class="line">    \draw[arrow2](Error handling) -- (optimization.east);</span><br><span class="line">    \draw[arrow2](Error handling) -- (generate.east);</span><br><span class="line">    \draw[thick, dashed, draw = purple](-125pt, 27pt)node[below right]&#123;Compiler front end&#125; -- (125pt, 27pt) -- (125pt, -250pt) -- (-125pt, -250pt)node[above right]&#123;Compiler backend&#125; -- (-125pt, 27pt);</span><br><span class="line">    \draw[thick, dashed, draw = purple](-125pt, -135pt) -- (125pt, -135pt);</span><br><span class="line">  \end&#123;tikzpicture&#125;</span><br><span class="line">  \\ fig.1 Compiler structure diagram</span><br><span class="line">\end&#123;center&#125;</span><br></pre></td></tr></table></figure><p><img src="/2021/11/28/latex-tikz/3.svg"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line">\usetikzlibrary&#123;positioning, arrows.meta, calc&#125;</span><br><span class="line">\tikzset&#123;</span><br><span class="line">  arrow1/.style = &#123;</span><br><span class="line">    draw = purple, thick, -&#123;Latex[length = 4mm, width = 1.5mm]&#125;,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">\tikzset&#123;</span><br><span class="line">  nonterminal/.style = &#123;</span><br><span class="line">    rectangle,</span><br><span class="line">    align = center,</span><br><span class="line">    minimum size = 6mm,</span><br><span class="line">    very thick,</span><br><span class="line">    draw = red!50!black!50,</span><br><span class="line">    top color = white,</span><br><span class="line">    bottom color = red!50!black!20,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">\tikzset&#123;</span><br><span class="line">  terminal/.style = &#123;</span><br><span class="line">    rectangle,</span><br><span class="line">    align = center,</span><br><span class="line">    minimum size = 6mm,</span><br><span class="line">    rounded corners = 3mm,</span><br><span class="line">    very thick,</span><br><span class="line">    draw = black!50,</span><br><span class="line">    top color = white,</span><br><span class="line">    bottom color = black!20,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">\hspace&#123;-3cm&#125;&#123;</span><br><span class="line">\begin&#123;minipage&#125;&#123;15.4cm&#125;</span><br><span class="line">  \begin&#123;tikzpicture&#125;[node distance = 0.7cm]</span><br><span class="line">    \node[terminal](function)&#123;FUNCTION&#125;;</span><br><span class="line">    \node[nonterminal, right = of function](name1)&#123;Function name&#125;;</span><br><span class="line">    \node[terminal, right = of name1](left)&#123;(&#125;;</span><br><span class="line">    \node[terminal, right = of left](var)&#123;VAR&#125;;</span><br><span class="line">    \node[nonterminal, right = of var](para)&#123;Formal parameters&#125;;</span><br><span class="line">    \node[terminal, right = of para](colon1)&#123;:&#125;;</span><br><span class="line">    \node[nonterminal, right = of colon1](type1)&#123;Type name&#125;;</span><br><span class="line">    \node[terminal, right = of type1](right)&#123;)&#125;;</span><br><span class="line">    \node[terminal, right = of right](colon2)&#123;:&#125;;</span><br><span class="line">    \node[nonterminal, right = of colon2](type2)&#123;Type name&#125;;</span><br><span class="line">    \node[terminal, right = of type2](semicolon1)&#123;;&#125;;</span><br><span class="line">    \node[terminal, below = of para](semicolon2)&#123;;&#125;;</span><br><span class="line">% ----------------------------------------------------------</span><br><span class="line">    \draw[arrow1](function)--(name1);</span><br><span class="line">    \draw[arrow1](name1)--(left);</span><br><span class="line">    \draw[arrow1](left)--(var);</span><br><span class="line">    \draw[arrow1](var)--(para);</span><br><span class="line">    \draw[arrow1](para)--(colon1);</span><br><span class="line">    \draw[arrow1](colon1)--(type1);</span><br><span class="line">    \draw[arrow1](type1)--(right);</span><br><span class="line">    \draw[arrow1](right)--(colon2);</span><br><span class="line">    \draw[arrow1](colon2)--(type2);</span><br><span class="line">    \draw[arrow1](type2)--(semicolon1);</span><br><span class="line">    \draw[arrow1]($ (var.west)+(-3mm, 0) $)--++(0, 6mm)-|($ (var.east)+(3mm, 0) $);</span><br><span class="line">    \draw[arrow1]($ (type1.east)+(3mm, 0) $)|-(semicolon2);</span><br><span class="line">    \draw[arrow1](semicolon2)-|($ (var.west)-(3mm, 0) $);</span><br><span class="line">    \draw[arrow1]($ (name1.east)+(3mm, 0) $)--++(0, -20mm)-|($ (right.east)+(3mm, 0) $);</span><br><span class="line">% ----------------------------------------------------------</span><br><span class="line">    \node[nonterminal, below = 2.7cm of function, xshift = 1cm](description)&#123;Description section&#125;;</span><br><span class="line">    \node[terminal, right = of description](begin)&#123;BEGIN&#125;;</span><br><span class="line">    \node[nonterminal, right = of begin, text width = 1.6cm](statement)&#123;Statement&#125;;</span><br><span class="line">    \node[terminal, right = of statement](semicolon3)&#123;;&#125;;</span><br><span class="line">    \node[terminal, right = of semicolon3, text width = 1.6cm](end)&#123;END&#125;;</span><br><span class="line">    \node[terminal, right = of end](semicolon4)&#123;;&#125;;</span><br><span class="line">% ----------------------------------------------------------</span><br><span class="line">    \draw[arrow1](description)--(begin);</span><br><span class="line">    \draw[arrow1](begin)--(statement);</span><br><span class="line">    \draw[arrow1](statement)--(semicolon3);</span><br><span class="line">    \draw[arrow1](semicolon3)--(end);</span><br><span class="line">    \draw[arrow1](end)--(semicolon4);</span><br><span class="line">    \draw[arrow1](semicolon4)--++(30pt, 0);</span><br><span class="line">    \draw[arrow1](semicolon1)--++(0, -2.5cm)-|(description);</span><br><span class="line">    \draw[arrow1]($ (semicolon3.east)+(3mm, 0) $)--++(0, -6mm)-|($ (begin.east)+(3mm, 0) $);</span><br><span class="line">  \end&#123;tikzpicture&#125;</span><br><span class="line">\end&#123;minipage&#125;</span><br></pre></td></tr></table></figure><p><img src="/2021/11/28/latex-tikz/4.svg"></p><h2 id="结尾"><a href="#结尾" class="headerlink" title="结尾"></a>结尾</h2><p>画简单的流程图，函数图和费曼图没什么问题，但是数据做图还是老老实实用作图软件.</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;latex下tikz作图&lt;/p&gt;</summary>
    
    
    
    
    <category term="latex" scheme="http://marigold0225.github.io/tags/latex/"/>
    
  </entry>
  
  <entry>
    <title>windows_scoop</title>
    <link href="http://marigold0225.github.io/2021/11/23/windows-scoop/"/>
    <id>http://marigold0225.github.io/2021/11/23/windows-scoop/</id>
    <published>2021-11-23T13:25:19.000Z</published>
    <updated>2025-06-12T05:58:12.022Z</updated>
    
    <content type="html"><![CDATA[<p>Windows ternimal 配置</p><span id="more"></span><h1 id="scoop"><a href="#scoop" class="headerlink" title="scoop"></a>scoop</h1><h2 id="安装windows-terminal"><a href="#安装windows-terminal" class="headerlink" title="安装windows terminal"></a>安装windows terminal</h2><p>直接去microsoft store下载</p><h2 id="安装powershell7"><a href="#安装powershell7" class="headerlink" title="安装powershell7"></a>安装powershell7</h2><p><a href="https://github.com/PowerShell/PowerShell/releases">powershell7</a>选择win-x64-msi安装</p><h2 id="scoop-1"><a href="#scoop-1" class="headerlink" title="scoop"></a>scoop</h2><p>获取权限</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope CurrentUser</span><br></pre></td></tr></table></figure><p>下载</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iwr -useb get.scoop.sh | iex</span><br></pre></td></tr></table></figure><p>常用命令</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">scoop update #更新</span><br><span class="line">scoop config set proxy 127.0.0.1:7890 #设置代理</span><br><span class="line">scoop config rm proxy #删除代理</span><br><span class="line"># bucket 源</span><br><span class="line">scoop bucket add main # 默认</span><br><span class="line">scoop bucket add extras # 推荐</span><br><span class="line">scoop bucket add versions</span><br><span class="line">scoop bucket add nightlies</span><br><span class="line">scoop bucket add nirsoft</span><br><span class="line">scoop bucket add php</span><br><span class="line">scoop bucket add nerd-fonts</span><br><span class="line">scoop bucket add nonportable</span><br><span class="line">scoop bucket add java</span><br><span class="line">scoop bucket add games</span><br><span class="line">scoop bucket add jetbrains # 推荐</span><br><span class="line"># 常用软件</span><br><span class="line">scoop install aria2</span><br><span class="line">scoop install vim</span><br><span class="line">scoop install python</span><br><span class="line">scoop install go</span><br><span class="line">scoop install vscode</span><br><span class="line">scoop install sublime-text</span><br><span class="line">scoop install wget</span><br></pre></td></tr></table></figure><h2 id="oh-my-posh-安装"><a href="#oh-my-posh-安装" class="headerlink" title="oh my posh 安装"></a>oh my posh 安装</h2><p>安装</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Set-ExecutionPolicy Bypass</span><br><span class="line">Install-Module oh-my-posh -Scope CurrentUser</span><br><span class="line">Install-Module posh-git -Scope CurrentUser</span><br></pre></td></tr></table></figure><p>查看主题</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$PROFILE</span><br><span class="line">if (!(Test-Path -Path $PROFILE )) &#123; New-Item -Type File -Path $PROFILE -Force &#125;</span><br><span class="line">notepad $PROFILE</span><br><span class="line"></span><br><span class="line">#在打开的文件中输入</span><br><span class="line">Import-Module posh-git</span><br><span class="line">Import-Module oh-my-posh</span><br><span class="line">Set-Theme Honukai</span><br></pre></td></tr></table></figure><h1 id="WSL2"><a href="#WSL2" class="headerlink" title="WSL2"></a>WSL2</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">dism.exe /online /enable-feature /featurename:Microsoft-Windows-Subsystem-Linux /all /norestart</span><br><span class="line"></span><br><span class="line">dism.exe /online /enable-feature /featurename:VirtualMachinePlatform /all /norestart</span><br><span class="line"></span><br><span class="line">wsl --set-default-version 2</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;p&gt;Windows ternimal 配置&lt;/p&gt;</summary>
    
    
    
    <category term="linux" scheme="http://marigold0225.github.io/categories/linux/"/>
    
    
    <category term="scoop" scheme="http://marigold0225.github.io/tags/scoop/"/>
    
    <category term="wsl" scheme="http://marigold0225.github.io/tags/wsl/"/>
    
  </entry>
  
  <entry>
    <title>tidal_deformability</title>
    <link href="http://marigold0225.github.io/2021/11/22/tidal-deformability/"/>
    <id>http://marigold0225.github.io/2021/11/22/tidal-deformability/</id>
    <published>2021-11-22T11:16:38.000Z</published>
    <updated>2025-06-12T05:58:12.022Z</updated>
    
    <content type="html"><![CDATA[<p>Tidal deformability of neutron star</p><span id="more"></span><h1 id="various-tidal-love-number-of-compact-star"><a href="#various-tidal-love-number-of-compact-star" class="headerlink" title="various tidal love number of compact star"></a>various tidal love number of compact star</h1><p>When spherical star placed in a static external quadrupolar tidal field $\varepsilon_{ij}$ then the star will be deformed and quadrupole deformation will be the leading order perturbation. Such a deformation is defined as the radio of the mass quadrupole moment of a star $Q_{ij}$ to the external tidal field $\varepsilon_{ij}$:<br>$$<br>\begin{equation}<br>\lambda&#x3D;\frac{Q_{ij} } {\varepsilon_{ij} }<br>\end{equation}<br>$$<br>Specifically, the observable of the tidal deformability parameter $\lambda$ depends on the EOS via the neutron star(NS) radius and a dimensionless quantity $k_{2}$, called the Love number and is given by the relation:<br>$$<br>\begin{equation}<br>\lambda&#x3D;\frac{2}{3}k_{2}R^{5},<br>\end{equation}<br>$$<br>and the dimensionless tidal-deformability($\Lambda$) is related with the compactness parameter $C&#x3D;M&#x2F;R$ as:<br>$$<br>\begin{equation}<br>\lambda&#x3D;\frac{2 k_{2} } {3 C^{5} },<br>\end{equation}<br>$$<br>where R is the radius of the star in isolation. We have to get $k_{2}$ for the calculation of the deformability parameter $\lambda$.<br>To estimate the love number $k_{l}(l&#x3D;2,3,4)$, along with the evaluation of the TOV equations, we have to compute $y&#x3D;y_{l}(R)$ with initial boundary condition $y(0)&#x3D;l$ from the following first order different equation iteratively:<br>$$<br>\begin{equation}<br>r\frac{dy(r)}{dr}+y(r)^{2}+y(r)F(r)+r^{2}Q(r)&#x3D;0,<br>\end{equation}<br>$$<br>with,<br><br>$$<br>\begin{equation}<br>F(r)&#x3D;\frac{r-4\pi r^{3}[\varepsilon(r)-P(r)]}{r-2M(r)},<br>\end{equation}<br>$$<br>$$<br>\begin{equation}<br>Q(r)&#x3D;\frac{4\pi(5\varepsilon(r)+9P(r)+\frac{\varepsilon(r)<br>+P(r)}{\partial P(r)&#x2F;\varepsilon(r)}-\frac{l(l+1)}{4\pi r^{2}})}{r-2M(r)}-<br>4[\frac{M(r)+4\pi r^{3}P(r)}{r^{2}(1-2M(r)&#x2F;r)}]^{2}.<br>\end{equation}<br>$$<br>once,we know the value of $y&#x3D;y_{l}(R)$, the love numbers $k_{l}$ are found from the following expression:<br>$$<br>\displaylines{k_{2}&#x3D;\frac{8}{5}(1-2C)^{2}C^{5}[2C(y_{2}-1)-y_{2}+2]{2C(4(y_{2}+1)C^{4}+(6y_{2}-4)C^{3}+ \<br>(26-22y_{2})C^{2}+3(5y_{2}-8)C-3y_{2}+6)-3(1-2C)^{2}(2C(y_{2}-1)-y_{2}+2)\log(\frac{1}{1-2C})}^{-1}}<br>$$<br>and $k_{3}, k_{4}$ ref from <a href="https://arxiv.org/pdf/0906.0096.pdf">Relativistic tidal properties of neutron stars</a>.<br>As we have emphasized earlier, the dimensionless love number $k_{l}(l&#x3D;2,3,4)$ is an important quantity to measure the internal structure of the constituent body. These quantities directly enter into the gravitational wave phase of inspiralling binary neutron star and extract the information of the EOS. Notice that equation contain an overall factor $(1-2C)^{2}$, which tends to zero when the compactness approaches the compactness of the black hole $C^{BH}&#x3D;1&#x2F;2$. Also, it is to be pointed out that the presence of multiplication order factor $C$ with $(1-2C)^{2}$ in the expression of $k_{l}$ that the value of the love number of a black hole simply becomes zero $k_{l}^{BH}&#x3D;0$.</p><h2 id="surficial-love-number"><a href="#surficial-love-number" class="headerlink" title="surficial love number"></a>surficial love number</h2><p>We calculate the surficial love number $h_{l}$ which describes the deformation of the body’s surface in a multipole expansion. Damour and Nagar have given the surficial love number (also known as shape love number)$h_{l}$ for the coordinate displacement $\delta R$ of the body’s surface under the external tidal force<a href="https://arxiv.org/pdf/0906.0096.pdf">surfical love number</a> and Landry and Poisson have proposed the defination of Newtonian love number is terms of a curvature perturbation $\delta R$ instead of a surface displacement $\delta R$<a href="https://arxiv.org/pdf/1404.6798.pdf">Newtonian love number</a>. For a perfect fluid, the relation between the surficial love number $h_{l}$ and tidal love number $k_{l}$ is given as :<br>$$<br>\begin{equation}<br>h_{l}&#x3D;\Gamma_{1}+2\Gamma_{2}k_{l}<br>\end{equation}<br>$$<br>$$<br>\begin{equation}<br>\Gamma_{1}&#x3D;\frac{l+1}{l-1}(1-C)F(-l,-l,-2l;2C)-\frac{2}{l-1}F(-l,-l,-1,-2l;2C)<br>\end{equation}<br>$$<br>$$<br>\begin{equation}<br>\Gamma_{2}&#x3D;\frac{1}{l+2}(1-C)F(l+1,l+1,2l+2;2C)+\frac{2}{l+2}F(l+1,l,2l+2;2C).<br>\end{equation}<br>$$<br>where $F(a,b,c;d)$ is the hypergeometric function .</p><h2 id="magnetic-tidal-love-number"><a href="#magnetic-tidal-love-number" class="headerlink" title="magnetic tidal love number"></a>magnetic tidal love number</h2><p>The quadrupolar case (l&#x3D;2):<br>$$<br>\displaylines{j_{2}&#x3D;{96C^{5}(2C-1)(y_{2}-3)}{5(2C(12(y_{2}+1)C^{4} \<br>+2(y_{2}-3)C^{3}+2(y_{2}-3)C^{2}+3(y_{2}-3)C- \<br>3y_{2}+9)+3(2C-1)(y_{2}-3)\log(1-2C))}^{-1}}<br>$$</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;Tidal deformability of neutron star&lt;/p&gt;</summary>
    
    
    
    <category term="公式推导" scheme="http://marigold0225.github.io/categories/%E5%85%AC%E5%BC%8F%E6%8E%A8%E5%AF%BC/"/>
    
    
    <category term="General_Relativity" scheme="http://marigold0225.github.io/tags/General-Relativity/"/>
    
    <category term="neutron star" scheme="http://marigold0225.github.io/tags/neutron-star/"/>
    
  </entry>
  
  <entry>
    <title>QFT</title>
    <link href="http://marigold0225.github.io/2021/10/09/QFT/"/>
    <id>http://marigold0225.github.io/2021/10/09/QFT/</id>
    <published>2021-10-09T11:23:43.000Z</published>
    <updated>2025-06-12T05:58:11.992Z</updated>
    
    <content type="html"><![CDATA[<p>量子场论学习笔记</p><span id="more"></span><h2 id="相对论量子力学的困难和局限性"><a href="#相对论量子力学的困难和局限性" class="headerlink" title="相对论量子力学的困难和局限性"></a>相对论量子力学的困难和局限性</h2><h3 id="固定粒子数的相对论性量子力学三大困难"><a href="#固定粒子数的相对论性量子力学三大困难" class="headerlink" title="固定粒子数的相对论性量子力学三大困难"></a>固定粒子数的相对论性量子力学三大困难</h3><p>1）负能解问题：导致任意低的基态，没有稳定真空<br>2）负几率问题：<br>$$\psi(x)$$<br>不正定（必须放弃波函数的几率解释）<br>3）破坏因果性</p><h2 id="K-G方程"><a href="#K-G方程" class="headerlink" title="K-G方程"></a>K-G方程</h2><p>连续性方程：<br>$$\frac{\partial \rho}{\partial t} + \nabla \cdot \vec{\jmath}&#x3D;0$$<br>$$\rho&#x3D;NIm(\phi^{<em>}\frac{\partial}{\partial t})$$<br>$$\vec{\jmath}&#x3D;Nc^{2}Im(\phi^{</em>} \nabla \phi)$$<br>其中$\rho$不正定（KG方程包含时间的二阶导）</p><h2 id="Dirac方程"><a href="#Dirac方程" class="headerlink" title="Dirac方程"></a>Dirac方程</h2><p>连续性方程<br>$$\partial_{t} \rho +\nabla \cdot \vec{\jmath}&#x3D;0$$<br>$$\rho&#x3D;\phi^{\dagger} \phi $$<br>$$\vec{\jmath}&#x3D;c\phi^{\dagger} \vec{\alpha} \phi$$<br>其中<br>$$\rho&#x3D;\mid \phi_{1}\mid ^{2}+ \dots +|\phi_{4}|^{2}$$<br>大于零，克服了负几率问题<br>能量<br>$$E&#x3D;\pm \sqrt{p^{2}c^{2}+m^{2}c^{4}}$$<br>存在负能解，Dirac解释为Dirac sea，预言了反粒子，提出空穴的概念<br>两个方程关于氢原子能级的解均能计算到精细结构，但是角动量存在差别<br>Dirac方程语言了电子的磁矩<br>$$\mu&#x3D;\frac{e \hbar}{2mc}$$</p><h3 id="Dirac-方程的困难"><a href="#Dirac-方程的困难" class="headerlink" title="Dirac 方程的困难"></a>Dirac 方程的困难</h3><p>电子的反常磁矩<br>兰姆位移</p><h3 id="因果性讨论"><a href="#因果性讨论" class="headerlink" title="因果性讨论"></a>因果性讨论</h3><p>。。。</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;量子场论学习笔记&lt;/p&gt;</summary>
    
    
    
    <category term="公式推导" scheme="http://marigold0225.github.io/categories/%E5%85%AC%E5%BC%8F%E6%8E%A8%E5%AF%BC/"/>
    
    
    <category term="量子场论" scheme="http://marigold0225.github.io/tags/%E9%87%8F%E5%AD%90%E5%9C%BA%E8%AE%BA/"/>
    
  </entry>
  
  <entry>
    <title>hexo的搭建</title>
    <link href="http://marigold0225.github.io/2021/09/23/hexo/"/>
    <id>http://marigold0225.github.io/2021/09/23/hexo/</id>
    <published>2021-09-23T11:33:51.000Z</published>
    <updated>2025-06-12T05:58:12.002Z</updated>
    
    <content type="html"><![CDATA[<p>heox+github+sublime 搭建博客</p><span id="more"></span><h2 id="必备"><a href="#必备" class="headerlink" title="必备"></a>必备</h2><p>nodejs，npm，git</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> pacman -S npm </span><br></pre></td></tr></table></figure><p>一般会自动下载node，检查下版本号</p><h2 id="命令"><a href="#命令" class="headerlink" title="命令"></a>命令</h2><p>新建blog文件夹 </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g hexo-cli --save</span><br></pre></td></tr></table></figure><p>如果下载失败设置代理</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm config <span class="built_in">set</span> proxy http://xxx.x.x.x::port</span><br><span class="line">npm config <span class="built_in">set</span> registry https://registry.npmjs.org</span><br></pre></td></tr></table></figure><p>初始化</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo init</span><br></pre></td></tr></table></figure><p>下载文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install</span><br></pre></td></tr></table></figure><p>下载主题</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-theme-next</span><br><span class="line">如果下载失败，到github下载</span><br><span class="line">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure><h2 id="站点配置"><a href="#站点配置" class="headerlink" title="站点配置"></a>站点配置</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Hexo Configuration</span></span><br><span class="line"><span class="comment">## Docs: https://hexo.io/docs/configuration.html</span></span><br><span class="line"><span class="comment">## Source: https://github.com/hexojs/hexo/</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Site</span></span><br><span class="line">title: The Seven Heaven</span><br><span class="line">subtitle: <span class="string">&#x27;&#x27;</span></span><br><span class="line">description: 一名科研狗的随手记</span><br><span class="line">keywords:</span><br><span class="line">author: marigold</span><br><span class="line">language: zh-CN</span><br><span class="line">timezone: <span class="string">&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># URL</span></span><br><span class="line"><span class="comment">## Set your site url here. For example, if you use GitHub Page, set url as &#x27;https://username.github.io/project&#x27;</span></span><br><span class="line">url: http://marigold0225.github.io</span><br><span class="line">permalink: :year/:month/:day/:title/</span><br><span class="line">permalink_defaults:</span><br><span class="line">pretty_urls:</span><br><span class="line">  trailing_index: <span class="literal">true</span> <span class="comment"># Set to false to remove trailing &#x27;index.html&#x27; from permalinks</span></span><br><span class="line">  trailing_html: <span class="literal">true</span> <span class="comment"># Set to false to remove trailing &#x27;.html&#x27; from permalinks</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Directory</span></span><br><span class="line">source_dir: <span class="built_in">source</span></span><br><span class="line">public_dir: public</span><br><span class="line">tag_dir: tags</span><br><span class="line">archive_dir: archives</span><br><span class="line">category_dir: categories</span><br><span class="line">code_dir: downloads/code</span><br><span class="line">i18n_dir: :lang</span><br><span class="line">skip_render:</span><br><span class="line"></span><br><span class="line"><span class="comment"># Writing</span></span><br><span class="line">new_post_name: :title.md <span class="comment"># File name of new posts</span></span><br><span class="line">default_layout: post</span><br><span class="line">titlecase: <span class="literal">false</span> <span class="comment"># Transform title into titlecase</span></span><br><span class="line">external_link:</span><br><span class="line">  <span class="built_in">enable</span>: <span class="literal">true</span> <span class="comment"># Open external links in new tab</span></span><br><span class="line">  field: site <span class="comment"># Apply to the whole site</span></span><br><span class="line">  exclude: <span class="string">&#x27;&#x27;</span></span><br><span class="line">filename_case: 0</span><br><span class="line">render_drafts: <span class="literal">false</span></span><br><span class="line">post_asset_folder: <span class="literal">true</span></span><br><span class="line">relative_link: <span class="literal">false</span></span><br><span class="line">future: <span class="literal">true</span></span><br><span class="line">highlight:</span><br><span class="line">  <span class="built_in">enable</span>: <span class="literal">true</span></span><br><span class="line">  line_number: <span class="literal">true</span></span><br><span class="line">  auto_detect: <span class="literal">false</span></span><br><span class="line">  tab_replace: <span class="string">&#x27;&#x27;</span></span><br><span class="line">  wrap: <span class="literal">true</span></span><br><span class="line">  hljs: <span class="literal">false</span></span><br><span class="line">prismjs:</span><br><span class="line">  <span class="built_in">enable</span>: <span class="literal">false</span></span><br><span class="line">  preprocess: <span class="literal">true</span></span><br><span class="line">  line_number: <span class="literal">true</span></span><br><span class="line">  tab_replace: <span class="string">&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Home page setting</span></span><br><span class="line"><span class="comment"># path: Root path for your blogs index page. (default = &#x27;&#x27;)</span></span><br><span class="line"><span class="comment"># per_page: Posts displayed per page. (0 = disable pagination)</span></span><br><span class="line"><span class="comment"># order_by: Posts order. (Order by date descending by default)</span></span><br><span class="line">index_generator:</span><br><span class="line">  path: <span class="string">&#x27;&#x27;</span></span><br><span class="line">  per_page: 10</span><br><span class="line">  order_by: -<span class="built_in">date</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Category &amp; Tag</span></span><br><span class="line">default_category: uncategorized</span><br><span class="line">category_map:</span><br><span class="line">tag_map:</span><br><span class="line"></span><br><span class="line"><span class="comment"># Metadata elements</span></span><br><span class="line"><span class="comment">## https://developer.mozilla.org/en-US/docs/Web/HTML/Element/meta</span></span><br><span class="line">meta_generator: <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Date / Time format</span></span><br><span class="line"><span class="comment">## Hexo uses Moment.js to parse and display date</span></span><br><span class="line"><span class="comment">## You can customize the date format as defined in</span></span><br><span class="line"><span class="comment">## http://momentjs.com/docs/#/displaying/format/</span></span><br><span class="line">date_format: YYYY-MM-DD</span><br><span class="line">time_format: HH:mm:ss</span><br><span class="line"><span class="comment">## updated_option supports &#x27;mtime&#x27;, &#x27;date&#x27;, &#x27;empty&#x27;</span></span><br><span class="line">updated_option: <span class="string">&#x27;mtime&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Pagination</span></span><br><span class="line"><span class="comment">## Set per_page to 0 to disable pagination</span></span><br><span class="line">per_page: 10</span><br><span class="line">pagination_dir: page</span><br><span class="line"></span><br><span class="line"><span class="comment"># Include / Exclude file(s)</span></span><br><span class="line"><span class="comment">## include:/exclude: options only apply to the &#x27;source/&#x27; folder</span></span><br><span class="line">include:</span><br><span class="line">exclude:</span><br><span class="line">ignore:</span><br><span class="line"></span><br><span class="line"><span class="comment"># Extensions</span></span><br><span class="line"><span class="comment">## Plugins: https://hexo.io/plugins/</span></span><br><span class="line"><span class="comment">## Themes: https://hexo.io/themes/</span></span><br><span class="line">theme: next</span><br><span class="line"></span><br><span class="line"><span class="comment"># Deployment</span></span><br><span class="line"><span class="comment">## Docs: https://hexo.io/docs/one-command-deployment</span></span><br><span class="line">deploy:</span><br><span class="line">  <span class="built_in">type</span>: git</span><br><span class="line">  repo: </span><br><span class="line">    github: git@github.com:marigold0225/marigold0225.github.io.git</span><br><span class="line">  branch: master</span><br><span class="line"><span class="comment"># hexo-renderer-pandoc (https://github.com/wzpan/hexo-renderer-pandoc)</span></span><br><span class="line">pandoc:</span><br><span class="line"><span class="comment">#  extra:</span></span><br><span class="line">  <span class="comment">#  - toc: # will be passed as `--toc`. Note the colon，如果不需要自动生成目录无需添加此行</span></span><br><span class="line">  extensions:</span><br><span class="line">    - <span class="string">&#x27;+hard_line_breaks&#x27;</span></span><br><span class="line">    - <span class="string">&#x27;+emoji&#x27;</span></span><br><span class="line">    - <span class="string">&#x27;-implicit_figures&#x27;</span></span><br><span class="line">  mathEngine: mathjax  </span><br><span class="line"><span class="comment">#  template:</span></span><br><span class="line"><span class="comment">#    ./pandoc_template.html # 如果不需要自动生成目录无需添加此行</span></span><br><span class="line"><span class="comment"># -----------------------------------------------------</span></span><br><span class="line">markdown:</span><br><span class="line">  plugins:</span><br><span class="line">    - markdown-it-footnote</span><br><span class="line">    - markdown-it-sup</span><br><span class="line">    - markdown-it-sub</span><br><span class="line">    - markdown-it-abbr</span><br><span class="line">    - markdown-it-emoji</span><br><span class="line">    - hexo-math</span><br></pre></td></tr></table></figure><h2 id="主题配置"><a href="#主题配置" class="headerlink" title="主题配置"></a>主题配置</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br><span class="line">669</span><br><span class="line">670</span><br><span class="line">671</span><br><span class="line">672</span><br><span class="line">673</span><br><span class="line">674</span><br><span class="line">675</span><br><span class="line">676</span><br><span class="line">677</span><br><span class="line">678</span><br><span class="line">679</span><br><span class="line">680</span><br><span class="line">681</span><br><span class="line">682</span><br><span class="line">683</span><br><span class="line">684</span><br><span class="line">685</span><br><span class="line">686</span><br><span class="line">687</span><br><span class="line">688</span><br><span class="line">689</span><br><span class="line">690</span><br><span class="line">691</span><br><span class="line">692</span><br><span class="line">693</span><br><span class="line">694</span><br><span class="line">695</span><br><span class="line">696</span><br><span class="line">697</span><br><span class="line">698</span><br><span class="line">699</span><br><span class="line">700</span><br><span class="line">701</span><br><span class="line">702</span><br><span class="line">703</span><br><span class="line">704</span><br><span class="line">705</span><br><span class="line">706</span><br><span class="line">707</span><br><span class="line">708</span><br><span class="line">709</span><br><span class="line">710</span><br><span class="line">711</span><br><span class="line">712</span><br><span class="line">713</span><br><span class="line">714</span><br><span class="line">715</span><br><span class="line">716</span><br><span class="line">717</span><br><span class="line">718</span><br><span class="line">719</span><br><span class="line">720</span><br><span class="line">721</span><br><span class="line">722</span><br><span class="line">723</span><br><span class="line">724</span><br><span class="line">725</span><br><span class="line">726</span><br><span class="line">727</span><br><span class="line">728</span><br><span class="line">729</span><br><span class="line">730</span><br><span class="line">731</span><br><span class="line">732</span><br><span class="line">733</span><br><span class="line">734</span><br><span class="line">735</span><br><span class="line">736</span><br><span class="line">737</span><br><span class="line">738</span><br><span class="line">739</span><br><span class="line">740</span><br><span class="line">741</span><br><span class="line">742</span><br><span class="line">743</span><br><span class="line">744</span><br><span class="line">745</span><br><span class="line">746</span><br><span class="line">747</span><br><span class="line">748</span><br><span class="line">749</span><br><span class="line">750</span><br><span class="line">751</span><br><span class="line">752</span><br><span class="line">753</span><br><span class="line">754</span><br><span class="line">755</span><br><span class="line">756</span><br><span class="line">757</span><br><span class="line">758</span><br><span class="line">759</span><br><span class="line">760</span><br><span class="line">761</span><br><span class="line">762</span><br><span class="line">763</span><br><span class="line">764</span><br><span class="line">765</span><br><span class="line">766</span><br><span class="line">767</span><br><span class="line">768</span><br><span class="line">769</span><br><span class="line">770</span><br><span class="line">771</span><br><span class="line">772</span><br><span class="line">773</span><br><span class="line">774</span><br><span class="line">775</span><br><span class="line">776</span><br><span class="line">777</span><br><span class="line">778</span><br><span class="line">779</span><br><span class="line">780</span><br><span class="line">781</span><br><span class="line">782</span><br><span class="line">783</span><br><span class="line">784</span><br><span class="line">785</span><br><span class="line">786</span><br><span class="line">787</span><br><span class="line">788</span><br><span class="line">789</span><br><span class="line">790</span><br><span class="line">791</span><br><span class="line">792</span><br><span class="line">793</span><br><span class="line">794</span><br><span class="line">795</span><br><span class="line">796</span><br><span class="line">797</span><br><span class="line">798</span><br><span class="line">799</span><br><span class="line">800</span><br><span class="line">801</span><br><span class="line">802</span><br><span class="line">803</span><br><span class="line">804</span><br><span class="line">805</span><br><span class="line">806</span><br><span class="line">807</span><br><span class="line">808</span><br><span class="line">809</span><br><span class="line">810</span><br><span class="line">811</span><br><span class="line">812</span><br><span class="line">813</span><br><span class="line">814</span><br><span class="line">815</span><br><span class="line">816</span><br><span class="line">817</span><br><span class="line">818</span><br><span class="line">819</span><br><span class="line">820</span><br><span class="line">821</span><br><span class="line">822</span><br><span class="line">823</span><br><span class="line">824</span><br><span class="line">825</span><br><span class="line">826</span><br><span class="line">827</span><br><span class="line">828</span><br><span class="line">829</span><br><span class="line">830</span><br><span class="line">831</span><br><span class="line">832</span><br><span class="line">833</span><br><span class="line">834</span><br><span class="line">835</span><br><span class="line">836</span><br><span class="line">837</span><br><span class="line">838</span><br><span class="line">839</span><br><span class="line">840</span><br><span class="line">841</span><br><span class="line">842</span><br><span class="line">843</span><br><span class="line">844</span><br><span class="line">845</span><br><span class="line">846</span><br><span class="line">847</span><br><span class="line">848</span><br><span class="line">849</span><br><span class="line">850</span><br><span class="line">851</span><br><span class="line">852</span><br><span class="line">853</span><br><span class="line">854</span><br><span class="line">855</span><br><span class="line">856</span><br><span class="line">857</span><br><span class="line">858</span><br><span class="line">859</span><br><span class="line">860</span><br><span class="line">861</span><br><span class="line">862</span><br><span class="line">863</span><br><span class="line">864</span><br><span class="line">865</span><br><span class="line">866</span><br><span class="line">867</span><br><span class="line">868</span><br><span class="line">869</span><br><span class="line">870</span><br><span class="line">871</span><br><span class="line">872</span><br><span class="line">873</span><br><span class="line">874</span><br><span class="line">875</span><br><span class="line">876</span><br><span class="line">877</span><br><span class="line">878</span><br><span class="line">879</span><br><span class="line">880</span><br><span class="line">881</span><br><span class="line">882</span><br><span class="line">883</span><br><span class="line">884</span><br><span class="line">885</span><br><span class="line">886</span><br><span class="line">887</span><br><span class="line">888</span><br><span class="line">889</span><br><span class="line">890</span><br><span class="line">891</span><br><span class="line">892</span><br><span class="line">893</span><br><span class="line">894</span><br><span class="line">895</span><br><span class="line">896</span><br><span class="line">897</span><br><span class="line">898</span><br><span class="line">899</span><br><span class="line">900</span><br><span class="line">901</span><br><span class="line">902</span><br><span class="line">903</span><br><span class="line">904</span><br><span class="line">905</span><br><span class="line">906</span><br><span class="line">907</span><br><span class="line">908</span><br><span class="line">909</span><br><span class="line">910</span><br><span class="line">911</span><br><span class="line">912</span><br><span class="line">913</span><br><span class="line">914</span><br><span class="line">915</span><br><span class="line">916</span><br><span class="line">917</span><br><span class="line">918</span><br><span class="line">919</span><br><span class="line">920</span><br><span class="line">921</span><br><span class="line">922</span><br><span class="line">923</span><br><span class="line">924</span><br><span class="line">925</span><br><span class="line">926</span><br><span class="line">927</span><br><span class="line">928</span><br><span class="line">929</span><br><span class="line">930</span><br><span class="line">931</span><br><span class="line">932</span><br><span class="line">933</span><br><span class="line">934</span><br><span class="line">935</span><br><span class="line">936</span><br><span class="line">937</span><br><span class="line">938</span><br><span class="line">939</span><br><span class="line">940</span><br><span class="line">941</span><br><span class="line">942</span><br><span class="line">943</span><br><span class="line">944</span><br><span class="line">945</span><br><span class="line">946</span><br><span class="line">947</span><br><span class="line">948</span><br><span class="line">949</span><br><span class="line">950</span><br><span class="line">951</span><br><span class="line">952</span><br><span class="line">953</span><br><span class="line">954</span><br><span class="line">955</span><br><span class="line">956</span><br><span class="line">957</span><br><span class="line">958</span><br><span class="line">959</span><br><span class="line">960</span><br><span class="line">961</span><br><span class="line">962</span><br><span class="line">963</span><br><span class="line">964</span><br><span class="line">965</span><br><span class="line">966</span><br><span class="line">967</span><br><span class="line">968</span><br><span class="line">969</span><br><span class="line">970</span><br><span class="line">971</span><br><span class="line">972</span><br><span class="line">973</span><br><span class="line">974</span><br><span class="line">975</span><br><span class="line">976</span><br><span class="line">977</span><br><span class="line">978</span><br><span class="line">979</span><br><span class="line">980</span><br><span class="line">981</span><br><span class="line">982</span><br><span class="line">983</span><br><span class="line">984</span><br><span class="line">985</span><br><span class="line">986</span><br><span class="line">987</span><br><span class="line">988</span><br><span class="line">989</span><br><span class="line">990</span><br><span class="line">991</span><br><span class="line">992</span><br><span class="line">993</span><br><span class="line">994</span><br><span class="line">995</span><br><span class="line">996</span><br><span class="line">997</span><br><span class="line">998</span><br><span class="line">999</span><br><span class="line">1000</span><br><span class="line">1001</span><br></pre></td><td class="code"><pre><span class="line"># ---------------------------------------------------------------</span><br><span class="line"># Theme Core Configuration Settings</span><br><span class="line"># See: https://theme-next.org/docs/theme-settings/</span><br><span class="line"># ---------------------------------------------------------------</span><br><span class="line"></span><br><span class="line"># If false, merge configs from `_data/next.yml` into default configuration (rewrite).</span><br><span class="line"># If true, will fully override default configuration by options from `_data/next.yml` (override). Only for NexT settings.</span><br><span class="line"># And if true, all config from default NexT `_config.yml` have to be copied into `next.yml`. Use if you know what you are doing.</span><br><span class="line"># Useful if you want to comment some options from NexT `_config.yml` by `next.yml` without editing default config.</span><br><span class="line">override: false</span><br><span class="line"></span><br><span class="line"># Console reminder if new version released.</span><br><span class="line">reminder: false</span><br><span class="line"></span><br><span class="line"># Allow to cache content generation. Introduced in NexT v6.0.0.</span><br><span class="line">cache:</span><br><span class="line">  enable: true</span><br><span class="line"></span><br><span class="line"># Remove unnecessary files after hexo generate.</span><br><span class="line">minify: false</span><br><span class="line"></span><br><span class="line"># Define custom file paths.</span><br><span class="line"># Create your custom files in site directory `source/_data` and uncomment needed files below.</span><br><span class="line">custom_file_path:</span><br><span class="line">  #head: source/_data/head.swig</span><br><span class="line">  #header: source/_data/header.swig</span><br><span class="line">  #sidebar: source/_data/sidebar.swig</span><br><span class="line">  #postMeta: source/_data/post-meta.swig</span><br><span class="line">  #postBodyEnd: source/_data/post-body-end.swig</span><br><span class="line">  #footer: source/_data/footer.swig</span><br><span class="line">  #bodyEnd: source/_data/body-end.swig</span><br><span class="line">  #variable: source/_data/variables.styl</span><br><span class="line">  #mixin: source/_data/mixins.styl</span><br><span class="line">  style: source/_data/styles.styl</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># ---------------------------------------------------------------</span><br><span class="line"># Site Information Settings</span><br><span class="line"># See: https://theme-next.org/docs/getting-started/</span><br><span class="line"># ---------------------------------------------------------------</span><br><span class="line"></span><br><span class="line">favicon:</span><br><span class="line">  small: /images/favicon-16x16-next.png</span><br><span class="line">  medium: /images/favicon-32x32-next.png</span><br><span class="line">  apple_touch_icon: /images/apple-touch-icon-next.png</span><br><span class="line">  safari_pinned_tab: /images/logo.svg</span><br><span class="line">  #android_manifest: /images/manifest.json</span><br><span class="line">  #ms_browserconfig: /images/browserconfig.xml</span><br><span class="line"></span><br><span class="line"># Show multilingual switcher in footer.</span><br><span class="line">language_switcher: false</span><br><span class="line"></span><br><span class="line">footer:</span><br><span class="line">  # Specify the date when the site was setup. If not defined, current year will be used.</span><br><span class="line">  since: 2021</span><br><span class="line"></span><br><span class="line">  # Icon between year and copyright info.</span><br><span class="line">  icon:</span><br><span class="line">    # Icon name in Font Awesome. See: https://fontawesome.com/icons</span><br><span class="line">    name: fa fa-heart</span><br><span class="line">    # If you want to animate the icon, set it to true.</span><br><span class="line">    animated: false</span><br><span class="line">    # Change the color of icon, using Hex Code.</span><br><span class="line">    color: &quot;#ff0000&quot;</span><br><span class="line"></span><br><span class="line">  # If not defined, `author` from Hexo `_config.yml` will be used.</span><br><span class="line">  copyright:</span><br><span class="line"></span><br><span class="line">  # Powered by Hexo &amp; NexT</span><br><span class="line">  powered: true</span><br><span class="line"></span><br><span class="line">  # Beian ICP and gongan information for Chinese users. See: https://beian.miit.gov.cn, http://www.beian.gov.cn</span><br><span class="line">  beian:</span><br><span class="line">    enable: false</span><br><span class="line">    icp:</span><br><span class="line">    # The digit in the num of gongan beian.</span><br><span class="line">    gongan_id:</span><br><span class="line">    # The full num of gongan beian.</span><br><span class="line">    gongan_num:</span><br><span class="line">    # The icon for gongan beian. See: http://www.beian.gov.cn/portal/download</span><br><span class="line">    gongan_icon_url:</span><br><span class="line"></span><br><span class="line"># Creative Commons 4.0 International License.</span><br><span class="line"># See: https://creativecommons.org/share-your-work/licensing-types-examples</span><br><span class="line"># Available values of license: by | by-nc | by-nc-nd | by-nc-sa | by-nd | by-sa | zero</span><br><span class="line"># You can set a language value if you prefer a translated version of CC license, e.g. deed.zh</span><br><span class="line"># CC licenses are available in 39 languages, you can find the specific and correct abbreviation you need on https://creativecommons.org</span><br><span class="line">creative_commons:</span><br><span class="line">  license: by-nc-sa</span><br><span class="line">  sidebar: false</span><br><span class="line">  post: false</span><br><span class="line">  language:</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># ---------------------------------------------------------------</span><br><span class="line"># Scheme Settings</span><br><span class="line"># ---------------------------------------------------------------</span><br><span class="line"></span><br><span class="line"># Schemes</span><br><span class="line">#scheme: Muse</span><br><span class="line">#scheme: Mist</span><br><span class="line">#scheme: Pisces</span><br><span class="line">scheme: Gemini</span><br><span class="line"></span><br><span class="line"># Dark Mode</span><br><span class="line">darkmode: false</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># ---------------------------------------------------------------</span><br><span class="line"># Menu Settings</span><br><span class="line"># ---------------------------------------------------------------</span><br><span class="line"></span><br><span class="line"># Usage: `Key: /link/ || icon`</span><br><span class="line"># Key is the name of menu item. If the translation for this item is available, the translated text will be loaded, otherwise the Key name will be used. Key is case-senstive.</span><br><span class="line"># Value before `||` delimiter is the target link, value after `||` delimiter is the name of Font Awesome icon.</span><br><span class="line"># When running the site in a subdirectory (e.g. yoursite.com/blog), remove the leading slash from link value (/archives -&gt; archives).</span><br><span class="line"># External url should start with http:// or https://</span><br><span class="line">menu:</span><br><span class="line">  home: / || fa fa-home</span><br><span class="line">  about: /about/ || fa fa-user</span><br><span class="line">  tags: /tags/ || fa fa-tags</span><br><span class="line">  categories: /categories/ || fa fa-th</span><br><span class="line">  archives: /archives/ || fa fa-archive</span><br><span class="line">  #schedule: /schedule/ || fa fa-calendar</span><br><span class="line">  #sitemap: /sitemap.xml || fa fa-sitemap</span><br><span class="line">  #commonweal: /404/ || fa fa-heartbeat</span><br><span class="line"></span><br><span class="line"># Enable / Disable menu icons / item badges.</span><br><span class="line">menu_settings:</span><br><span class="line">  icons: true</span><br><span class="line">  badges: false</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># ---------------------------------------------------------------</span><br><span class="line"># Sidebar Settings</span><br><span class="line"># See: https://theme-next.org/docs/theme-settings/sidebar</span><br><span class="line"># ---------------------------------------------------------------</span><br><span class="line"></span><br><span class="line">sidebar:</span><br><span class="line">  # Sidebar Position.</span><br><span class="line">  position: left</span><br><span class="line">  #position: right</span><br><span class="line"></span><br><span class="line">  # Manual define the sidebar width. If commented, will be default for:</span><br><span class="line">  # Muse | Mist: 320</span><br><span class="line">  # Pisces | Gemini: 240</span><br><span class="line">  #width: 300</span><br><span class="line"></span><br><span class="line">  # Sidebar Display (only for Muse | Mist), available values:</span><br><span class="line">  #  - post    expand on posts automatically. Default.</span><br><span class="line">  #  - always  expand for all pages automatically.</span><br><span class="line">  #  - hide    expand only when click on the sidebar toggle icon.</span><br><span class="line">  #  - remove  totally remove sidebar including sidebar toggle.</span><br><span class="line">  display: post</span><br><span class="line"></span><br><span class="line">  # Sidebar padding in pixels.</span><br><span class="line">  padding: 18</span><br><span class="line">  # Sidebar offset from top menubar in pixels (only for Pisces | Gemini).</span><br><span class="line">  offset: 12</span><br><span class="line">  # Enable sidebar on narrow view (only for Muse | Mist).</span><br><span class="line">  onmobile: false</span><br><span class="line"></span><br><span class="line"># Sidebar Avatar</span><br><span class="line">avatar:</span><br><span class="line">  # Replace the default image and set the url here.</span><br><span class="line">  url: /images/author.jpg</span><br><span class="line">  # If true, the avatar will be dispalyed in circle.</span><br><span class="line">  rounded: false</span><br><span class="line">  # If true, the avatar will be rotated with the cursor.</span><br><span class="line">  rotated: false</span><br><span class="line"></span><br><span class="line"># Posts / Categories / Tags in sidebar.</span><br><span class="line">site_state: true</span><br><span class="line"></span><br><span class="line"># Social Links</span><br><span class="line"># Usage: `Key: permalink || icon`</span><br><span class="line"># Key is the link label showing to end users.</span><br><span class="line"># Value before `||` delimiter is the target permalink, value after `||` delimiter is the name of Font Awesome icon.</span><br><span class="line">social:</span><br><span class="line">  GitHub: https://github.com/marigold0225 || fab fa-github</span><br><span class="line">  E-Mail: mailto:mflovelky418@gmail.com || fa fa-envelope</span><br><span class="line">  #Weibo: https://weibo.com/yourname || fab fa-weibo</span><br><span class="line">  #Google: https://plus.google.com/yourname || fab fa-google</span><br><span class="line">  #Twitter: https://twitter.com/yourname || fab fa-twitter</span><br><span class="line">  #FB Page: https://www.facebook.com/yourname || fab fa-facebook</span><br><span class="line">  #StackOverflow: https://stackoverflow.com/yourname || fab fa-stack-overflow</span><br><span class="line">  #YouTube: https://youtube.com/yourname || fab fa-youtube</span><br><span class="line">  #Instagram: https://instagram.com/yourname || fab fa-instagram</span><br><span class="line">  #Skype: skype:yourname?call|chat || fab fa-skype</span><br><span class="line"></span><br><span class="line">social_icons:</span><br><span class="line">  enable: true</span><br><span class="line">  icons_only: false</span><br><span class="line">  transition: false</span><br><span class="line"></span><br><span class="line"># Blog rolls</span><br><span class="line">links_settings:</span><br><span class="line">  icon: fa fa-link</span><br><span class="line">  title: Links</span><br><span class="line">  # Available values: block | inline</span><br><span class="line">  layout: block</span><br><span class="line"></span><br><span class="line">links:</span><br><span class="line">  #Title: http://yoursite.com</span><br><span class="line"></span><br><span class="line"># Table of Contents in the Sidebar</span><br><span class="line"># Front-matter variable (unsupport wrap expand_all).</span><br><span class="line">toc:</span><br><span class="line">  enable: true</span><br><span class="line">  # Automatically add list number to toc.</span><br><span class="line">  number: true</span><br><span class="line">  # If true, all words will placed on next lines if header width longer then sidebar width.</span><br><span class="line">  wrap: false</span><br><span class="line">  # If true, all level of TOC in a post will be displayed, rather than the activated part of it.</span><br><span class="line">  expand_all: false</span><br><span class="line">  # Maximum heading depth of generated toc.</span><br><span class="line">  max_depth: 6</span><br><span class="line"></span><br><span class="line"># A button to open designated chat widget in sidebar.</span><br><span class="line"># Firstly, you need enable the chat service you want to activate its sidebar button.</span><br><span class="line">chat:</span><br><span class="line">  enable: false</span><br><span class="line">  #service: chatra</span><br><span class="line">  #service: tidio</span><br><span class="line">  icon: fa fa-comment # Icon name in Font Awesome, set false to disable icon.</span><br><span class="line">  text: Chat # Button text, change it as you wish.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># ---------------------------------------------------------------</span><br><span class="line"># Post Settings</span><br><span class="line"># See: https://theme-next.org/docs/theme-settings/posts</span><br><span class="line"># ---------------------------------------------------------------</span><br><span class="line"></span><br><span class="line"># Automatically excerpt description in homepage as preamble text.</span><br><span class="line">excerpt_description: true</span><br><span class="line"></span><br><span class="line"># Read more button</span><br><span class="line"># If true, the read more button will be displayed in excerpt section.</span><br><span class="line">read_more_btn: true</span><br><span class="line"></span><br><span class="line"># Post meta display settings</span><br><span class="line">post_meta:</span><br><span class="line">  item_text: true</span><br><span class="line">  created_at: true</span><br><span class="line">  updated_at:</span><br><span class="line">    enable: true</span><br><span class="line">    another_day: true</span><br><span class="line">  categories: true</span><br><span class="line"></span><br><span class="line"># Post wordcount display settings</span><br><span class="line"># Dependencies: https://github.com/theme-next/hexo-symbols-count-time</span><br><span class="line">symbols_count_time:</span><br><span class="line">  separated_meta: true</span><br><span class="line">  item_text_post: true</span><br><span class="line">  item_text_total: false</span><br><span class="line"></span><br><span class="line"># Use icon instead of the symbol # to indicate the tag at the bottom of the post</span><br><span class="line">tag_icon: false</span><br><span class="line"></span><br><span class="line"># Reward (Donate)</span><br><span class="line"># Front-matter variable (unsupport animation).</span><br><span class="line">reward_settings:</span><br><span class="line">  # If true, reward will be displayed in every article by default.</span><br><span class="line">  enable: false</span><br><span class="line">  animation: false</span><br><span class="line">  #comment: Donate comment here.</span><br><span class="line"></span><br><span class="line">reward:</span><br><span class="line">  #wechatpay: /images/wechatpay.png</span><br><span class="line">  #alipay: /images/alipay.png</span><br><span class="line">  #paypal: /images/paypal.png</span><br><span class="line">  #bitcoin: /images/bitcoin.png</span><br><span class="line"></span><br><span class="line"># Subscribe through Telegram Channel, Twitter, etc.</span><br><span class="line"># Usage: `Key: permalink || icon` (Font Awesome)</span><br><span class="line">follow_me:</span><br><span class="line">  #Twitter: https://twitter.com/username || fab fa-twitter</span><br><span class="line">  #Telegram: https://t.me/channel_name || fab fa-telegram</span><br><span class="line">  #WeChat: /images/wechat_channel.jpg || fab fa-weixin</span><br><span class="line">  #RSS: /atom.xml || fa fa-rss</span><br><span class="line"></span><br><span class="line"># Related popular posts</span><br><span class="line"># Dependencies: https://github.com/tea3/hexo-related-popular-posts</span><br><span class="line">related_posts:</span><br><span class="line">  enable: false</span><br><span class="line">  title: # Custom header, leave empty to use the default one</span><br><span class="line">  display_in_home: false</span><br><span class="line">  params:</span><br><span class="line">    maxCount: 5</span><br><span class="line">    #PPMixingRate: 0.0</span><br><span class="line">    #isDate: false</span><br><span class="line">    #isImage: false</span><br><span class="line">    #isExcerpt: false</span><br><span class="line"></span><br><span class="line"># Post edit</span><br><span class="line"># Dependencies: https://github.com/hexojs/hexo-deployer-git</span><br><span class="line">post_edit:</span><br><span class="line">  enable: false</span><br><span class="line">  url: https://github.com/user-name/repo-name/tree/branch-name/subdirectory-name # Link for view source</span><br><span class="line">  #url: https://github.com/user-name/repo-name/edit/branch-name/subdirectory-name # Link for fork &amp; edit</span><br><span class="line"></span><br><span class="line"># Show previous post and next post in post footer if exists</span><br><span class="line"># Available values: left | right | false</span><br><span class="line">post_navigation: left</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># ---------------------------------------------------------------</span><br><span class="line"># Custom Page Settings</span><br><span class="line"># See: https://theme-next.org/docs/theme-settings/custom-pages</span><br><span class="line"># ---------------------------------------------------------------</span><br><span class="line"></span><br><span class="line"># TagCloud settings for tags page.</span><br><span class="line">tagcloud:</span><br><span class="line">  # All values below are same as default, change them by yourself.</span><br><span class="line">  min: 12 # Minimun font size in px</span><br><span class="line">  max: 30 # Maxium font size in px</span><br><span class="line">  start: &quot;#ccc&quot; # Start color (hex, rgba, hsla or color keywords)</span><br><span class="line">  end: &quot;#111&quot; # End color (hex, rgba, hsla or color keywords)</span><br><span class="line">  amount: 200 # Amount of tags, change it if you have more than 200 tags</span><br><span class="line"></span><br><span class="line"># Google Calendar</span><br><span class="line"># Share your recent schedule to others via calendar page.</span><br><span class="line">calendar:</span><br><span class="line">  calendar_id: &lt;required&gt; # Your Google account E-Mail</span><br><span class="line">  api_key: &lt;required&gt;</span><br><span class="line">  orderBy: startTime</span><br><span class="line">  offsetMax: 24 # Time Range</span><br><span class="line">  offsetMin: 4 # Time Range</span><br><span class="line">  showDeleted: false</span><br><span class="line">  singleEvents: true</span><br><span class="line">  maxResults: 250</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># ---------------------------------------------------------------</span><br><span class="line"># Misc Theme Settings</span><br><span class="line"># ---------------------------------------------------------------</span><br><span class="line"></span><br><span class="line"># Set the text alignment in posts / pages.</span><br><span class="line">text_align:</span><br><span class="line">  # Available values: start | end | left | right | center | justify | justify-all | match-parent</span><br><span class="line">  desktop: justify</span><br><span class="line">  mobile: justify</span><br><span class="line"></span><br><span class="line"># Reduce padding / margin indents on devices with narrow width.</span><br><span class="line">mobile_layout_economy: false</span><br><span class="line"></span><br><span class="line"># Android Chrome header panel color ($brand-bg / $headband-bg =&gt; $black-deep).</span><br><span class="line">android_chrome_color: &quot;#222&quot;</span><br><span class="line"></span><br><span class="line"># Custom Logo (Do not support scheme Mist)</span><br><span class="line">custom_logo: #/uploads/custom-logo.jpg</span><br><span class="line"></span><br><span class="line">codeblock:</span><br><span class="line">  # Code Highlight theme</span><br><span class="line">  # Available values: normal | night | night eighties | night blue | night bright | solarized | solarized dark | galactic</span><br><span class="line">  # See: https://github.com/chriskempson/tomorrow-theme</span><br><span class="line">  highlight_theme: normal</span><br><span class="line">  # Add copy button on codeblock</span><br><span class="line">  copy_button:</span><br><span class="line">    enable: false</span><br><span class="line">    # Show text copy result.</span><br><span class="line">    show_result: false</span><br><span class="line">    # Available values: default | flat | mac</span><br><span class="line">    style:</span><br><span class="line"></span><br><span class="line">back2top:</span><br><span class="line">  enable: true</span><br><span class="line">  # Back to top in sidebar.</span><br><span class="line">  sidebar: false</span><br><span class="line">  # Scroll percent label in b2t button.</span><br><span class="line">  scrollpercent: false</span><br><span class="line"></span><br><span class="line"># Reading progress bar</span><br><span class="line">reading_progress:</span><br><span class="line">  enable: false</span><br><span class="line">  # Available values: top | bottom</span><br><span class="line">  position: top</span><br><span class="line">  color: &quot;#37c6c0&quot;</span><br><span class="line">  height: 3px</span><br><span class="line"></span><br><span class="line"># Bookmark Support</span><br><span class="line">bookmark:</span><br><span class="line">  enable: false</span><br><span class="line">  # Customize the color of the bookmark.</span><br><span class="line">  color: &quot;#222&quot;</span><br><span class="line">  # If auto, save the reading progress when closing the page or clicking the bookmark-icon.</span><br><span class="line">  # If manual, only save it by clicking the bookmark-icon.</span><br><span class="line">  save: auto</span><br><span class="line"></span><br><span class="line"># `Follow me on GitHub` banner in the top-right corner.</span><br><span class="line">github_banner:</span><br><span class="line">  enable: false</span><br><span class="line">  permalink: https://github.com/yourname</span><br><span class="line">  title: Follow me on GitHub</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># ---------------------------------------------------------------</span><br><span class="line"># Font Settings</span><br><span class="line"># See: https://theme-next.org/docs/theme-settings/#Fonts-Customization</span><br><span class="line"># ---------------------------------------------------------------</span><br><span class="line"># Find fonts on Google Fonts (https://www.google.com/fonts)</span><br><span class="line"># All fonts set here will have the following styles:</span><br><span class="line">#   light | light italic | normal | normal italic | bold | bold italic</span><br><span class="line"># Be aware that setting too much fonts will cause site running slowly</span><br><span class="line"># ---------------------------------------------------------------</span><br><span class="line"># To avoid space between header and sidebar in scheme Pisces / Gemini, Web Safe fonts are recommended for `global` (and `title`):</span><br><span class="line"># Arial | Tahoma | Helvetica | Times New Roman | Courier New | Verdana | Georgia | Palatino | Garamond | Comic Sans MS | Trebuchet MS</span><br><span class="line"># ---------------------------------------------------------------</span><br><span class="line"></span><br><span class="line">font:</span><br><span class="line">  enable: false</span><br><span class="line"></span><br><span class="line">  # Uri of fonts host, e.g. https://fonts.googleapis.com (Default).</span><br><span class="line">  host:</span><br><span class="line"></span><br><span class="line">  # Font options:</span><br><span class="line">  # `external: true` will load this font family from `host` above.</span><br><span class="line">  # `family: Times New Roman`. Without any quotes.</span><br><span class="line">  # `size: x.x`. Use `em` as unit. Default: 1 (16px)</span><br><span class="line"></span><br><span class="line">  # Global font settings used for all elements inside &lt;body&gt;.</span><br><span class="line">  global:</span><br><span class="line">    external: true</span><br><span class="line">    family: Lato</span><br><span class="line">    size:</span><br><span class="line"></span><br><span class="line">  # Font settings for site title (.site-title).</span><br><span class="line">  title:</span><br><span class="line">    external: true</span><br><span class="line">    family:</span><br><span class="line">    size:</span><br><span class="line"></span><br><span class="line">  # Font settings for headlines (&lt;h1&gt; to &lt;h6&gt;).</span><br><span class="line">  headings:</span><br><span class="line">    external: true</span><br><span class="line">    family:</span><br><span class="line">    size:</span><br><span class="line"></span><br><span class="line">  # Font settings for posts (.post-body).</span><br><span class="line">  posts:</span><br><span class="line">    external: true</span><br><span class="line">    family:</span><br><span class="line"></span><br><span class="line">  # Font settings for &lt;code&gt; and code blocks.</span><br><span class="line">  codes:</span><br><span class="line">    external: true</span><br><span class="line">    family:</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># ---------------------------------------------------------------</span><br><span class="line"># SEO Settings</span><br><span class="line"># ---------------------------------------------------------------</span><br><span class="line"></span><br><span class="line"># Disable Baidu transformation on mobile devices.</span><br><span class="line">disable_baidu_transformation: false</span><br><span class="line"></span><br><span class="line"># If true, site-subtitle will be added to index page.</span><br><span class="line"># Remember to set up your site-subtitle in Hexo `_config.yml` (e.g. subtitle: Subtitle)</span><br><span class="line">index_with_subtitle: false</span><br><span class="line"></span><br><span class="line"># Automatically add external URL with Base64 encrypt &amp; decrypt.</span><br><span class="line">exturl: false</span><br><span class="line"></span><br><span class="line"># Google Webmaster tools verification.</span><br><span class="line"># See: https://www.google.com/webmasters</span><br><span class="line">google_site_verification:</span><br><span class="line"></span><br><span class="line"># Bing Webmaster tools verification.</span><br><span class="line"># See: https://www.bing.com/webmaster</span><br><span class="line">bing_site_verification:</span><br><span class="line"></span><br><span class="line"># Yandex Webmaster tools verification.</span><br><span class="line"># See: https://webmaster.yandex.ru</span><br><span class="line">yandex_site_verification:</span><br><span class="line"></span><br><span class="line"># Baidu Webmaster tools verification.</span><br><span class="line"># See: https://ziyuan.baidu.com/site</span><br><span class="line">baidu_site_verification:</span><br><span class="line"></span><br><span class="line"># Enable baidu push so that the blog will push the url to baidu automatically which is very helpful for SEO.</span><br><span class="line">baidu_push: false</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># ---------------------------------------------------------------</span><br><span class="line"># Third Party Plugins &amp; Services Settings</span><br><span class="line"># See: https://theme-next.org/docs/third-party-services/</span><br><span class="line"># More plugins: https://github.com/theme-next/awesome-next</span><br><span class="line"># You may need to install dependencies or set CDN URLs in `vendors`</span><br><span class="line"># There are two different CDN providers by default:</span><br><span class="line">#   - jsDelivr (cdn.jsdelivr.net), works everywhere even in China</span><br><span class="line">#   - CDNJS (cdnjs.cloudflare.com), provided by cloudflare</span><br><span class="line"># ---------------------------------------------------------------</span><br><span class="line"></span><br><span class="line"># Math Formulas Render Support</span><br><span class="line">math:</span><br><span class="line">  # Default (true) will load mathjax / katex script on demand.</span><br><span class="line">  # That is it only render those page which has `mathjax: true` in Front-matter.</span><br><span class="line">  # If you set it to false, it will load mathjax / katex srcipt EVERY PAGE.</span><br><span class="line">  per_page: true</span><br><span class="line"></span><br><span class="line">  # hexo-renderer-pandoc (or hexo-renderer-kramed) required for full MathJax support.</span><br><span class="line">  mathjax:</span><br><span class="line">    enable: true</span><br><span class="line">    # See: https://mhchem.github.io/MathJax-mhchem/</span><br><span class="line">    mhchem: false</span><br><span class="line">    #cdn: //cdn.jsdelivr.net/npm/mathjax@2.7.8/unpacked/MathJax.js?config=TeX-MML-AM_CHTML</span><br><span class="line">    cnd: https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js</span><br><span class="line">  #  per_page: true</span><br><span class="line">  #  cdn: //cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML</span><br><span class="line">  # hexo-renderer-markdown-it-plus (or hexo-renderer-markdown-it with markdown-it-katex plugin) required for full Katex support.</span><br><span class="line">  katex:</span><br><span class="line">    enable: false</span><br><span class="line">    # See: https://github.com/KaTeX/KaTeX/tree/master/contrib/copy-tex</span><br><span class="line">    copy_tex: false</span><br><span class="line"></span><br><span class="line"># Easily enable fast Ajax navigation on your website.</span><br><span class="line"># Dependencies: https://github.com/theme-next/theme-next-pjax</span><br><span class="line">pjax: false</span><br><span class="line"></span><br><span class="line"># FancyBox is a tool that offers a nice and elegant way to add zooming functionality for images.</span><br><span class="line"># For more information: https://fancyapps.com/fancybox</span><br><span class="line">fancybox: false</span><br><span class="line"></span><br><span class="line"># A JavaScript library for zooming images like Medium.</span><br><span class="line"># Do not enable both `fancybox` and `mediumzoom`.</span><br><span class="line"># For more information: https://github.com/francoischalifour/medium-zoom</span><br><span class="line">mediumzoom: false</span><br><span class="line"></span><br><span class="line"># Vanilla JavaScript plugin for lazyloading images.</span><br><span class="line"># For more information: https://github.com/ApoorvSaxena/lozad.js</span><br><span class="line">lazyload: false</span><br><span class="line"></span><br><span class="line"># Pangu Support</span><br><span class="line"># For more information: https://github.com/vinta/pangu.js</span><br><span class="line">pangu: false</span><br><span class="line"></span><br><span class="line"># Quicklink Support</span><br><span class="line"># Do not enable both `pjax` and `quicklink`.</span><br><span class="line"># For more information: https://github.com/GoogleChromeLabs/quicklink</span><br><span class="line"># Front-matter (unsupport home archive).</span><br><span class="line">quicklink:</span><br><span class="line">  enable: false</span><br><span class="line"></span><br><span class="line">  # Home page and archive page can be controlled through home and archive options below.</span><br><span class="line">  # This configuration item is independent of `enable`.</span><br><span class="line">  home: false</span><br><span class="line">  archive: false</span><br><span class="line"></span><br><span class="line">  # Default (true) will initialize quicklink after the load event fires.</span><br><span class="line">  delay: true</span><br><span class="line">  # Custom a time in milliseconds by which the browser must execute prefetching.</span><br><span class="line">  timeout: 3000</span><br><span class="line">  # Default (true) will enable fetch() or falls back to XHR.</span><br><span class="line">  priority: true</span><br><span class="line"></span><br><span class="line">  # For more flexibility you can add some patterns (RegExp, Function, or Array) to ignores.</span><br><span class="line">  # See: https://github.com/GoogleChromeLabs/quicklink#custom-ignore-patterns</span><br><span class="line">  ignores:</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># ---------------------------------------------------------------</span><br><span class="line"># Comments Settings</span><br><span class="line"># See: https://theme-next.org/docs/third-party-services/comments</span><br><span class="line"># ---------------------------------------------------------------</span><br><span class="line"></span><br><span class="line"># Multiple Comment System Support</span><br><span class="line">comments:</span><br><span class="line">  # Available values: tabs | buttons</span><br><span class="line">  style: tabs</span><br><span class="line">  # Choose a comment system to be displayed by default.</span><br><span class="line">  # Available values: changyan | disqus | disqusjs | gitalk | livere | valine</span><br><span class="line">  active:</span><br><span class="line">  # Setting `true` means remembering the comment system selected by the visitor.</span><br><span class="line">  storage: true</span><br><span class="line">  # Lazyload all comment systems.</span><br><span class="line">  lazyload: false</span><br><span class="line">  # Modify texts or order for any navs, here are some examples.</span><br><span class="line">  nav:</span><br><span class="line">    #disqus:</span><br><span class="line">    #  text: Load Disqus</span><br><span class="line">    #  order: -1</span><br><span class="line">    #gitalk:</span><br><span class="line">    #  order: -2</span><br><span class="line"></span><br><span class="line"># Disqus</span><br><span class="line">disqus:</span><br><span class="line">  enable: false</span><br><span class="line">  shortname:</span><br><span class="line">  count: true</span><br><span class="line">  #post_meta_order: 0</span><br><span class="line"></span><br><span class="line"># DisqusJS</span><br><span class="line"># Alternative Disqus - Render comment component using Disqus API.</span><br><span class="line"># Demo: https://suka.js.org/DisqusJS/</span><br><span class="line"># For more information: https://github.com/SukkaW/DisqusJS</span><br><span class="line">disqusjs:</span><br><span class="line">  enable: false</span><br><span class="line">  # API Endpoint of Disqus API (https://disqus.com/api/).</span><br><span class="line">  # Leave api empty if you are able to connect to Disqus API. Otherwise you need a reverse proxy for it.</span><br><span class="line">  # For example:</span><br><span class="line">  # api: https://disqus.skk.moe/disqus/</span><br><span class="line">  api:</span><br><span class="line">  apikey: # Register new application from https://disqus.com/api/applications/</span><br><span class="line">  shortname: # See: https://disqus.com/admin/settings/general/</span><br><span class="line"></span><br><span class="line"># Changyan</span><br><span class="line">changyan:</span><br><span class="line">  enable: false</span><br><span class="line">  appid:</span><br><span class="line">  appkey:</span><br><span class="line">  #post_meta_order: 0</span><br><span class="line"></span><br><span class="line"># Valine</span><br><span class="line"># For more information: https://valine.js.org, https://github.com/xCss/Valine</span><br><span class="line">valine:</span><br><span class="line">  enable: false</span><br><span class="line">  appid: # Your leancloud application appid</span><br><span class="line">  appkey: # Your leancloud application appkey</span><br><span class="line">  notify: false # Mail notifier</span><br><span class="line">  verify: false # Verification code</span><br><span class="line">  placeholder: Just go go # Comment box placeholder</span><br><span class="line">  avatar: mm # Gravatar style</span><br><span class="line">  guest_info: nick,mail,link # Custom comment header</span><br><span class="line">  pageSize: 10 # Pagination size</span><br><span class="line">  language: # Language, available values: en, zh-cn</span><br><span class="line">  visitor: false # Article reading statistic</span><br><span class="line">  comment_count: true # If false, comment count will only be displayed in post page, not in home page</span><br><span class="line">  recordIP: false # Whether to record the commenter IP</span><br><span class="line">  serverURLs: # When the custom domain name is enabled, fill it in here (it will be detected automatically by default, no need to fill in)</span><br><span class="line">  #post_meta_order: 0</span><br><span class="line"></span><br><span class="line"># LiveRe comments system</span><br><span class="line"># You can get your uid from https://livere.com/insight/myCode (General web site)</span><br><span class="line">livere_uid: # &lt;your_uid&gt;</span><br><span class="line"></span><br><span class="line"># Gitalk</span><br><span class="line"># For more information: https://gitalk.github.io, https://github.com/gitalk/gitalk</span><br><span class="line">gitalk:</span><br><span class="line">  enable: false</span><br><span class="line">  github_id: # GitHub repo owner</span><br><span class="line">  repo: # Repository name to store issues</span><br><span class="line">  client_id: # GitHub Application Client ID</span><br><span class="line">  client_secret: # GitHub Application Client Secret</span><br><span class="line">  admin_user: # GitHub repo owner and collaborators, only these guys can initialize gitHub issues</span><br><span class="line">  distraction_free_mode: true # Facebook-like distraction free mode</span><br><span class="line">  # Gitalk&#x27;s display language depends on user&#x27;s browser or system environment</span><br><span class="line">  # If you want everyone visiting your site to see a uniform language, you can set a force language value</span><br><span class="line">  # Available values: en | es-ES | fr | ru | zh-CN | zh-TW</span><br><span class="line">  language:</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># ---------------------------------------------------------------</span><br><span class="line"># Post Widgets &amp; Content Sharing Services</span><br><span class="line"># See: https://theme-next.org/docs/third-party-services/post-widgets</span><br><span class="line"># ---------------------------------------------------------------</span><br><span class="line"></span><br><span class="line"># Star rating support to each article.</span><br><span class="line"># To get your ID visit https://widgetpack.com</span><br><span class="line">rating:</span><br><span class="line">  enable: false</span><br><span class="line">  id:     # &lt;app_id&gt;</span><br><span class="line">  color:  fc6423</span><br><span class="line"></span><br><span class="line"># AddThis Share. See: https://www.addthis.com</span><br><span class="line"># Go to https://www.addthis.com/dashboard to customize your tools.</span><br><span class="line">add_this_id:</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># ---------------------------------------------------------------</span><br><span class="line"># Statistics and Analytics</span><br><span class="line"># See: https://theme-next.org/docs/third-party-services/statistics-and-analytics</span><br><span class="line"># ---------------------------------------------------------------</span><br><span class="line"></span><br><span class="line"># Google Analytics</span><br><span class="line">google_analytics:</span><br><span class="line">  tracking_id: # &lt;app_id&gt;</span><br><span class="line">  # By default, NexT will load an external gtag.js script on your site.</span><br><span class="line">  # If you only need the pageview feature, set the following option to true to get a better performance.</span><br><span class="line">  only_pageview: false</span><br><span class="line"></span><br><span class="line"># Baidu Analytics</span><br><span class="line">baidu_analytics: # &lt;app_id&gt;</span><br><span class="line"></span><br><span class="line"># Growingio Analytics</span><br><span class="line">growingio_analytics: # &lt;project_id&gt;</span><br><span class="line"></span><br><span class="line"># CNZZ count</span><br><span class="line">cnzz_siteid:</span><br><span class="line"></span><br><span class="line"># Show number of visitors of each article.</span><br><span class="line"># You can visit https://leancloud.cn to get AppID and AppKey.</span><br><span class="line"># AppID and AppKey are recommended to be the same as valine&#x27;s for counter compatibility.</span><br><span class="line"># Do not enable both `valine.visitor` and `leancloud_visitors`.</span><br><span class="line">leancloud_visitors:</span><br><span class="line">  enable: false</span><br><span class="line">  app_id: # &lt;your app id&gt;</span><br><span class="line">  app_key: # &lt;your app key&gt;</span><br><span class="line">  # Required for apps from CN region</span><br><span class="line">  server_url: # &lt;your server url&gt;</span><br><span class="line">  # Dependencies: https://github.com/theme-next/hexo-leancloud-counter-security</span><br><span class="line">  # If you don&#x27;t care about security in leancloud counter and just want to use it directly</span><br><span class="line">  # (without hexo-leancloud-counter-security plugin), set `security` to `false`.</span><br><span class="line">  security: true</span><br><span class="line"></span><br><span class="line"># Another tool to show number of visitors to each article.</span><br><span class="line"># Visit https://console.firebase.google.com/u/0/ to get apiKey and projectId.</span><br><span class="line"># Visit https://firebase.google.com/docs/firestore/ to get more information about firestore.</span><br><span class="line">firestore:</span><br><span class="line">  enable: false</span><br><span class="line">  collection: articles # Required, a string collection name to access firestore database</span><br><span class="line">  apiKey: # Required</span><br><span class="line">  projectId: # Required</span><br><span class="line"></span><br><span class="line"># Show Views / Visitors of the website / page with busuanzi.</span><br><span class="line"># Get more information on http://ibruce.info/2015/04/04/busuanzi</span><br><span class="line">busuanzi_count:</span><br><span class="line">  enable: false</span><br><span class="line">  total_visitors: true</span><br><span class="line">  total_visitors_icon: fa fa-user</span><br><span class="line">  total_views: true</span><br><span class="line">  total_views_icon: fa fa-eye</span><br><span class="line">  post_views: true</span><br><span class="line">  post_views_icon: fa fa-eye</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># ---------------------------------------------------------------</span><br><span class="line"># Search Services</span><br><span class="line"># See: https://theme-next.org/docs/third-party-services/search-services</span><br><span class="line"># ---------------------------------------------------------------</span><br><span class="line"></span><br><span class="line"># Algolia Search</span><br><span class="line"># For more information: https://www.algolia.com</span><br><span class="line">algolia_search:</span><br><span class="line">  enable: false</span><br><span class="line">  hits:</span><br><span class="line">    per_page: 10</span><br><span class="line">  labels:</span><br><span class="line">    input_placeholder: Search for Posts</span><br><span class="line">    hits_empty: &quot;We didn&#x27;t find any results for the search: $&#123;query&#125;&quot;</span><br><span class="line">    hits_stats: &quot;$&#123;hits&#125; results found in $&#123;time&#125; ms&quot;</span><br><span class="line"></span><br><span class="line"># Local Search</span><br><span class="line"># Dependencies: https://github.com/theme-next/hexo-generator-searchdb</span><br><span class="line">local_search:</span><br><span class="line">  enable: false</span><br><span class="line">  # If auto, trigger search by changing input.</span><br><span class="line">  # If manual, trigger search by pressing enter key or search button.</span><br><span class="line">  trigger: auto</span><br><span class="line">  # Show top n results per article, show all results by setting to -1</span><br><span class="line">  top_n_per_article: 1</span><br><span class="line">  # Unescape html strings to the readable one.</span><br><span class="line">  unescape: false</span><br><span class="line">  # Preload the search data when the page loads.</span><br><span class="line">  preload: false</span><br><span class="line"></span><br><span class="line"># Swiftype Search API Key</span><br><span class="line">swiftype_key:</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># ---------------------------------------------------------------</span><br><span class="line"># Chat Services</span><br><span class="line"># See: https://theme-next.org/docs/third-party-services/chat-services</span><br><span class="line"># ---------------------------------------------------------------</span><br><span class="line"></span><br><span class="line"># Chatra Support</span><br><span class="line"># See: https://chatra.io</span><br><span class="line"># Dashboard: https://app.chatra.io/settings/general</span><br><span class="line">chatra:</span><br><span class="line">  enable: false</span><br><span class="line">  async: true</span><br><span class="line">  id: # Visit Dashboard to get your ChatraID</span><br><span class="line">  #embed: # Unfinished experimental feature for developers. See: https://chatra.io/help/api/#injectto</span><br><span class="line"></span><br><span class="line"># Tidio Support</span><br><span class="line"># See: https://www.tidiochat.com</span><br><span class="line"># Dashboard: https://www.tidiochat.com/panel/dashboard</span><br><span class="line">tidio:</span><br><span class="line">  enable: false</span><br><span class="line">  key: # Public Key, get it from dashboard. See: https://www.tidiochat.com/panel/settings/developer</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># ---------------------------------------------------------------</span><br><span class="line"># Tags Settings</span><br><span class="line"># See: https://theme-next.org/docs/tag-plugins/</span><br><span class="line"># ---------------------------------------------------------------</span><br><span class="line"></span><br><span class="line"># Note tag (bs-callout)</span><br><span class="line">note:</span><br><span class="line">  # Note tag style values:</span><br><span class="line">  #  - simple    bs-callout old alert style. Default.</span><br><span class="line">  #  - modern    bs-callout new (v2-v3) alert style.</span><br><span class="line">  #  - flat      flat callout style with background, like on Mozilla or StackOverflow.</span><br><span class="line">  #  - disabled  disable all CSS styles import of note tag.</span><br><span class="line">  style: simple</span><br><span class="line">  icons: false</span><br><span class="line">  # Offset lighter of background in % for modern and flat styles (modern: -12 | 12; flat: -18 | 6).</span><br><span class="line">  # Offset also applied to label tag variables. This option can work with disabled note tag.</span><br><span class="line">  light_bg_offset: 0</span><br><span class="line"></span><br><span class="line"># Tabs tag</span><br><span class="line">tabs:</span><br><span class="line">  transition:</span><br><span class="line">    tabs: false</span><br><span class="line">    labels: true</span><br><span class="line"></span><br><span class="line"># PDF tag</span><br><span class="line"># NexT will try to load pdf files natively, if failed, pdf.js will be used.</span><br><span class="line"># So, you have to install the dependency of pdf.js if you want to use pdf tag and make it available to all browsers.</span><br><span class="line"># See: https://github.com/theme-next/theme-next-pdf</span><br><span class="line">pdf:</span><br><span class="line">  enable: false</span><br><span class="line">  # Default height</span><br><span class="line">  height: 500px</span><br><span class="line"></span><br><span class="line"># Mermaid tag</span><br><span class="line">mermaid:</span><br><span class="line">  enable: false</span><br><span class="line">  # Available themes: default | dark | forest | neutral</span><br><span class="line">  theme: forest</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># ---------------------------------------------------------------</span><br><span class="line"># Animation Settings</span><br><span class="line"># ---------------------------------------------------------------</span><br><span class="line"></span><br><span class="line"># Use velocity to animate everything.</span><br><span class="line"># For more information: http://velocityjs.org</span><br><span class="line">motion:</span><br><span class="line">  enable: true</span><br><span class="line">  async: false</span><br><span class="line">  transition:</span><br><span class="line">    # Transition variants:</span><br><span class="line">    # fadeIn | flipXIn | flipYIn | flipBounceXIn | flipBounceYIn</span><br><span class="line">    # swoopIn | whirlIn | shrinkIn | expandIn</span><br><span class="line">    # bounceIn | bounceUpIn | bounceDownIn | bounceLeftIn | bounceRightIn</span><br><span class="line">    # slideUpIn | slideDownIn | slideLeftIn | slideRightIn</span><br><span class="line">    # slideUpBigIn | slideDownBigIn | slideLeftBigIn | slideRightBigIn</span><br><span class="line">    # perspectiveUpIn | perspectiveDownIn | perspectiveLeftIn | perspectiveRightIn</span><br><span class="line">    post_block: fadeIn</span><br><span class="line">    post_header: slideDownIn</span><br><span class="line">    post_body: slideDownIn</span><br><span class="line">    coll_header: slideLeftIn</span><br><span class="line">    # Only for Pisces | Gemini.</span><br><span class="line">    sidebar: slideUpIn</span><br><span class="line"></span><br><span class="line"># Progress bar in the top during page loading.</span><br><span class="line"># Dependencies: https://github.com/theme-next/theme-next-pace</span><br><span class="line"># For more information: https://github.com/HubSpot/pace</span><br><span class="line">pace:</span><br><span class="line">  enable: false</span><br><span class="line">  # Themes list:</span><br><span class="line">  # big-counter | bounce | barber-shop | center-atom | center-circle | center-radar | center-simple</span><br><span class="line">  # corner-indicator | fill-left | flat-top | flash | loading-bar | mac-osx | material | minimal</span><br><span class="line">  theme: minimal</span><br><span class="line"></span><br><span class="line"># JavaScript 3D library.</span><br><span class="line"># Dependencies: https://github.com/theme-next/theme-next-three</span><br><span class="line">three:</span><br><span class="line">  enable: false</span><br><span class="line">  three_waves: false</span><br><span class="line">  canvas_lines: false</span><br><span class="line">  canvas_sphere: false</span><br><span class="line"></span><br><span class="line"># Canvas-ribbon</span><br><span class="line"># Dependencies: https://github.com/theme-next/theme-next-canvas-ribbon</span><br><span class="line"># For more information: https://github.com/zproo/canvas-ribbon</span><br><span class="line">canvas_ribbon:</span><br><span class="line">  enable: false</span><br><span class="line">  size: 300 # The width of the ribbon</span><br><span class="line">  alpha: 0.6 # The transparency of the ribbon</span><br><span class="line">  zIndex: -1 # The display level of the ribbon</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#! ---------------------------------------------------------------</span><br><span class="line">#! DO NOT EDIT THE FOLLOWING SETTINGS</span><br><span class="line">#! UNLESS YOU KNOW WHAT YOU ARE DOING</span><br><span class="line">#! See: https://theme-next.org/docs/advanced-settings</span><br><span class="line">#! ---------------------------------------------------------------</span><br><span class="line"></span><br><span class="line"># Script Vendors. Set a CDN address for the vendor you want to customize.</span><br><span class="line"># Be aware that you would better use the same version as internal ones to avoid potential problems.</span><br><span class="line"># Remember to use the https protocol of CDN files when you enable https on your site.</span><br><span class="line">vendors:</span><br><span class="line">  # Internal path prefix.</span><br><span class="line">  _internal: lib</span><br><span class="line"></span><br><span class="line">  # Internal version: 3.1.0</span><br><span class="line">  # anime: //cdn.jsdelivr.net/npm/animejs@3.1.0/lib/anime.min.js</span><br><span class="line">  anime:</span><br><span class="line"></span><br><span class="line">  # Internal version: 5.13.0</span><br><span class="line">  # fontawesome: //cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css</span><br><span class="line">  # fontawesome: //cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css</span><br><span class="line">  fontawesome:</span><br><span class="line"></span><br><span class="line">  # MathJax</span><br><span class="line">  # mathjax: //cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js</span><br><span class="line">  mathjax:</span><br><span class="line"></span><br><span class="line">  # KaTeX</span><br><span class="line">  # katex: //cdn.jsdelivr.net/npm/katex@0/dist/katex.min.css</span><br><span class="line">  # katex: //cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css</span><br><span class="line">  # copy_tex_js: //cdn.jsdelivr.net/npm/katex@0/dist/contrib/copy-tex.min.js</span><br><span class="line">  # copy_tex_css: //cdn.jsdelivr.net/npm/katex@0/dist/contrib/copy-tex.min.css</span><br><span class="line">  katex:</span><br><span class="line">  copy_tex_js:</span><br><span class="line">  copy_tex_css:</span><br><span class="line"></span><br><span class="line">  # Internal version: 0.2.8</span><br><span class="line">  # pjax: //cdn.jsdelivr.net/gh/theme-next/theme-next-pjax@0/pjax.min.js</span><br><span class="line">  pjax:</span><br><span class="line"></span><br><span class="line">  # FancyBox</span><br><span class="line">  # jquery: //cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js</span><br><span class="line">  # fancybox: //cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js</span><br><span class="line">  # fancybox_css: //cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css</span><br><span class="line">  jquery:</span><br><span class="line">  fancybox:</span><br><span class="line">  fancybox_css:</span><br><span class="line"></span><br><span class="line">  # Medium-zoom</span><br><span class="line">  # mediumzoom: //cdn.jsdelivr.net/npm/medium-zoom@1/dist/medium-zoom.min.js</span><br><span class="line">  mediumzoom:</span><br><span class="line"></span><br><span class="line">  # Lazyload</span><br><span class="line">  # lazyload: //cdn.jsdelivr.net/npm/lozad@1/dist/lozad.min.js</span><br><span class="line">  # lazyload: //cdnjs.cloudflare.com/ajax/libs/lozad.js/1.14.0/lozad.min.js</span><br><span class="line">  lazyload:</span><br><span class="line"></span><br><span class="line">  # Pangu</span><br><span class="line">  # pangu: //cdn.jsdelivr.net/npm/pangu@4/dist/browser/pangu.min.js</span><br><span class="line">  # pangu: //cdnjs.cloudflare.com/ajax/libs/pangu/4.0.7/pangu.min.js</span><br><span class="line">  pangu:</span><br><span class="line"></span><br><span class="line">  # Quicklink</span><br><span class="line">  # quicklink: //cdn.jsdelivr.net/npm/quicklink@1/dist/quicklink.umd.js</span><br><span class="line">  quicklink:</span><br><span class="line"></span><br><span class="line">  # DisqusJS</span><br><span class="line">  # disqusjs_js: //cdn.jsdelivr.net/npm/disqusjs@1/dist/disqus.js</span><br><span class="line">  # disqusjs_css: //cdn.jsdelivr.net/npm/disqusjs@1/dist/disqusjs.css</span><br><span class="line">  disqusjs_js:</span><br><span class="line">  disqusjs_css:</span><br><span class="line"></span><br><span class="line">  # Valine</span><br><span class="line">  # valine: //cdn.jsdelivr.net/npm/valine@1/dist/Valine.min.js</span><br><span class="line">  # valine: //cdnjs.cloudflare.com/ajax/libs/valine/1.3.10/Valine.min.js</span><br><span class="line">  valine:</span><br><span class="line"></span><br><span class="line">  # Gitalk</span><br><span class="line">  # gitalk_js: //cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js</span><br><span class="line">  # gitalk_css: //cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.css</span><br><span class="line">  gitalk_js:</span><br><span class="line">  gitalk_css:</span><br><span class="line"></span><br><span class="line">  # Algolia Search</span><br><span class="line">  # algolia_search: //cdn.jsdelivr.net/npm/algoliasearch@4/dist/algoliasearch-lite.umd.js</span><br><span class="line">  # instant_search: //cdn.jsdelivr.net/npm/instantsearch.js@4/dist/instantsearch.production.min.js</span><br><span class="line">  algolia_search:</span><br><span class="line">  instant_search:</span><br><span class="line"></span><br><span class="line">  # Mermaid</span><br><span class="line">  # mermaid: //cdn.jsdelivr.net/npm/mermaid@8/dist/mermaid.min.js</span><br><span class="line">  # mermaid: //cdnjs.cloudflare.com/ajax/libs/mermaid/8.4.8/mermaid.min.js</span><br><span class="line">  mermaid:</span><br><span class="line"></span><br><span class="line">  # Internal version: 1.2.1</span><br><span class="line">  # velocity: //cdn.jsdelivr.net/npm/velocity-animate@1/velocity.min.js</span><br><span class="line">  # velocity: //cdnjs.cloudflare.com/ajax/libs/velocity/1.2.1/velocity.min.js</span><br><span class="line">  # velocity_ui: //cdn.jsdelivr.net/npm/velocity-animate@1/velocity.ui.min.js</span><br><span class="line">  # velocity_ui: //cdnjs.cloudflare.com/ajax/libs/velocity/1.2.1/velocity.ui.min.js</span><br><span class="line">  velocity:</span><br><span class="line">  velocity_ui:</span><br><span class="line"></span><br><span class="line">  # Internal version: 1.0.2</span><br><span class="line">  # pace: //cdn.jsdelivr.net/npm/pace-js@1/pace.min.js</span><br><span class="line">  # pace: //cdnjs.cloudflare.com/ajax/libs/pace/1.0.2/pace.min.js</span><br><span class="line">  # pace_css: //cdn.jsdelivr.net/npm/pace-js@1/themes/blue/pace-theme-minimal.css</span><br><span class="line">  # pace_css: //cdnjs.cloudflare.com/ajax/libs/pace/1.0.2/themes/blue/pace-theme-minimal.min.css</span><br><span class="line">  pace:</span><br><span class="line">  pace_css:</span><br><span class="line"></span><br><span class="line">  # Internal version: 1.0.0</span><br><span class="line">  # three: //cdn.jsdelivr.net/gh/theme-next/theme-next-three@1/three.min.js</span><br><span class="line">  # three_waves: //cdn.jsdelivr.net/gh/theme-next/theme-next-three@1/three-waves.min.js</span><br><span class="line">  # canvas_lines: //cdn.jsdelivr.net/gh/theme-next/theme-next-three@1/canvas_lines.min.js</span><br><span class="line">  # canvas_sphere: //cdn.jsdelivr.net/gh/theme-next/theme-next-three@1/canvas_sphere.min.js</span><br><span class="line">  three:</span><br><span class="line">  three_waves:</span><br><span class="line">  canvas_lines:</span><br><span class="line">  canvas_sphere:</span><br><span class="line"></span><br><span class="line">  # Internal version: 1.0.0</span><br><span class="line">  # canvas_ribbon: //cdn.jsdelivr.net/gh/theme-next/theme-next-canvas-ribbon@1/canvas-ribbon.js</span><br><span class="line">  canvas_ribbon:</span><br><span class="line"></span><br><span class="line"># Assets</span><br><span class="line">css: css</span><br><span class="line">js: js</span><br><span class="line">images: images</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="超级坑跌"><a href="#超级坑跌" class="headerlink" title="超级坑跌"></a>超级坑跌</h2><p>折磨了我很久的东西，卸载原来的公式渲染marked，下载pandoc，换行用diplaylines：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$$</span><br><span class="line">\displaylines&#123;k_&#123;2&#125;=\frac&#123;8&#125;&#123;5&#125;(1-2C)^&#123;2&#125;C^&#123;5&#125;[2C(y_&#123;2&#125;-1)-y_&#123;2&#125;+2]\&#123;2C(4(y_&#123;2&#125;+1)C^&#123;4&#125;+(6y_&#123;2&#125;-4)C^&#123;3&#125;+ \\</span><br><span class="line">(26-22y_&#123;2&#125;)C^&#123;2&#125;+3(5y_&#123;2&#125;-8)C-3y_&#123;2&#125;+6)-3(1-2C)^&#123;2&#125;(2C(y_&#123;2&#125;-1)-y_&#123;2&#125;+2)\log(\frac&#123;1&#125;&#123;1-2C&#125;)\&#125;^&#123;-1&#125;&#125;</span><br><span class="line">$$</span><br></pre></td></tr></table></figure><p>$$<br>\displaylines{k_{2}&#x3D;\frac{8}{5}(1-2C)^{2}C^{5}[2C(y_{2}-1)-y_{2}+2]{2C(4(y_{2}+1)C^{4}+(6y_{2}-4)C^{3}+ \<br>(26-22y_{2})C^{2}+3(5y_{2}-8)C-3y_{2}+6)-3(1-2C)^{2}(2C(y_{2}-1)-y_{2}+2)\log(\frac{1}{1-2C})}^{-1}}<br>$$<br>鬼知道下次更新版本又有什么依赖问题会报错。。。</p><h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">hexo new post title</span><br><span class="line">hexo clean</span><br><span class="line">hexo g</span><br><span class="line">hexo d</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;p&gt;heox+github+sublime 搭建博客&lt;/p&gt;</summary>
    
    
    
    <category term="linux" scheme="http://marigold0225.github.io/categories/linux/"/>
    
    
    <category term="manjaro" scheme="http://marigold0225.github.io/tags/manjaro/"/>
    
  </entry>
  
  <entry>
    <title>General_Relativity</title>
    <link href="http://marigold0225.github.io/2021/07/06/Special-Relativity/"/>
    <id>http://marigold0225.github.io/2021/07/06/Special-Relativity/</id>
    <published>2021-07-06T06:42:15.000Z</published>
    <updated>2025-06-12T05:58:11.992Z</updated>
    
    <content type="html"><![CDATA[<p>关于广义相对论的一点数学知识和概念</p><span id="more"></span><h2 id="等效原理"><a href="#等效原理" class="headerlink" title="等效原理"></a>等效原理</h2><p>弱等效原理：引力场与惯性场的力学效应是局域不可区分的<br>强等效原理：引力场和惯性场的一切物理效应是局域不可区分的<br>惯性系：在引力场中自由下落的无自转的无穷小的参考系</p><h2 id="黎曼几何和张量分析"><a href="#黎曼几何和张量分析" class="headerlink" title="黎曼几何和张量分析"></a>黎曼几何和张量分析</h2><h3 id="在SR下的定义-（lorentz变化）"><a href="#在SR下的定义-（lorentz变化）" class="headerlink" title="在SR下的定义 （lorentz变化）"></a>在SR下的定义 （lorentz变化）</h3><p>$$x^{\prime}<em>{\mu}&#x3D;a</em>{\mu \nu}x_{\nu}$$<br>$$dx_{\nu}&#x3D;(a^{-1})<em>{\nu \mu}dx^{\prime}</em>{\mu}$$<br>$aa^{-1}&#x3D;I$   (坐标变化线性正交) <br /><br>标量：坐标变化下不变<br /><br>矢量：坐标变化下和坐标微分元一样变的量.<br /><br>$${V^{\prime}<em>{\mu}&#x3D;a</em>{\mu \nu}V_{\nu}}$$<br>$${dV^{\prime}<em>{\mu}&#x3D;a</em>{\mu \nu}dV_{\nu}}$$<br>张量：坐标变化下,按如下变化的：<br>$$T^{\prime}<em>{\mu \nu}&#x3D;a</em>{\mu \alpha}a_{\nu \beta}T_{\alpha \beta}$$   </p><h3 id="在GR下的定义（广义坐标变化）"><a href="#在GR下的定义（广义坐标变化）" class="headerlink" title="在GR下的定义（广义坐标变化）"></a>在GR下的定义（广义坐标变化）</h3><p>$x^{\prime \mu}&#x3D;x^{\prime \mu}(x^{\nu})$  ,坐标变化既不正交也不线性<br>$$dx^{\prime \mu}&#x3D;\frac{\partial x^{\prime \mu}}{\partial x^{\nu}}dx^{\nu}$$<br>标量：在广义坐标变化下不变的量<br>矢量：在广义坐标变化下和坐标微分元一样变的量（逆变和协变之分）<br>张量：$T^{\prime \mu \nu}&#x3D;\frac{\partial x^{\prime \mu}}{\partial x^{\alpha}}\frac{\partial x^{\prime \nu}}{\partial x^{\beta}}T^{\alpha \beta}$   (逆变协变之分)<br /><br>克罗内克尔符号：二阶混合张量（证明）   </p><h3 id="张量代数"><a href="#张量代数" class="headerlink" title="张量代数"></a>张量代数</h3><p>缩并,对称性</p><h2 id="平移和联络"><a href="#平移和联络" class="headerlink" title="平移和联络"></a>平移和联络</h2><p>联络定义矢量的平移（计算）<br>i）联络不是张量<br>ii）两个联络之差是张量<br>iii）联络的反对称部分是张量</p><h2 id="协变微商"><a href="#协变微商" class="headerlink" title="协变微商"></a>协变微商</h2><p>标量场的协变微商就是普通微商,且结果是逆变矢量<br>协变矢量的协变微商：$$A_{\mu ; \nu}&#x3D;A_{\mu , \nu}-\Gamma^{\lambda}<em>{\mu \nu}A</em>{\lambda}$$<br /><br>逆变矢量的协变微商：$$A^{\mu}<em>{ ; \nu}&#x3D;A^{\mu}</em>{ , \nu}+\Gamma^{\mu}_{\lambda \nu}A^{\lambda}$$<br /><br>再用莱布尼兹可以算出其他张量的微商</p><h2 id="测地线和仿射参量"><a href="#测地线和仿射参量" class="headerlink" title="测地线和仿射参量"></a>测地线和仿射参量</h2><p>曲线的参数方程：$x^{\mu}&#x3D;x^{\mu}(\lambda)$<br /><br>切矢：$A^{\mu}&#x3D;\frac{dx^{\mu}}{d \lambda}$<br /><br>要求矢量平移后方向相同,可以得到测地线方程：<br>$\frac{d^{2}x^{\mu}}{d\sigma^{2}}+\Gamma^{\mu}_{\alpha \beta}\frac{dx^{\alpha}}{d\sigma}\frac{dx^{\beta}}{d\sigma}&#x3D;0$<br /><br>曲线上两点平移后切矢量重合,该曲线是测地线。</p><h2 id="曲率与绕率"><a href="#曲率与绕率" class="headerlink" title="曲率与绕率"></a>曲率与绕率</h2><p>两者之差：$$A_{\lambda ; \mu ; \nu}-A_{\lambda ; \nu ; \mu}&#x3D;R^{\rho}<em>{\lambda \mu ; \nu}A</em>{\rho}-2\Gamma^{\rho}<em>{[\nu \mu]}A</em>{\lambda ; \rho}$$<br>前者曲率,后者绕率<br>绕率：矢量平移一周后不能形成封闭空间,空间是扭曲的<br>曲率：矢量平移一周后会有角度差   </p><h3 id="曲率的性质"><a href="#曲率的性质" class="headerlink" title="曲率的性质"></a>曲率的性质</h3><p>i）后一对指标反对称<br>ii）两种独立的缩并方式（13缩并,12缩并）</p><h2 id="度规和距离"><a href="#度规和距离" class="headerlink" title="度规和距离"></a>度规和距离</h2><p>平直时空：$g_{\mu \nu}$ 是对角元-1和1<br /><br>度规能升降指标<br>矢量的平移：计算联络<br>平移切矢方向不变：计算出测地线<br>平移长度不变：计算联络（克式符）<br>$$\Gamma^{\alpha}<em>{\mu \nu}&#x3D;\frac{1}{2}g^{\alpha \lambda}(g</em>{\mu \lambda , \nu}+g_{\nu \lambda , \mu}-g_{\mu \nu , \lambda})$$<br>度规的协变微商等于0<br>在一个无绕空间,总能找到一个坐标变化,将时空任意一点的克式符变为0<br>短程线：对两点曲线做变分,计算欧拉拉格朗日方程<br>$$\frac{d^{2}x^{\mu}}{ds^{2}}+\Gamma^{\mu}_{\alpha \beta}\frac{dx^{\alpha}}{ds}\frac{dx^{\beta}}{ds}&#x3D;0$$  </p><h2 id="黎曼时空的曲率张量"><a href="#黎曼时空的曲率张量" class="headerlink" title="黎曼时空的曲率张量"></a>黎曼时空的曲率张量</h2><p>$$R^{\rho}<em>{\lambda [\mu \nu]}$$<br>i）后一对指标反对称<br>ii）存在两种缩并<br>克式符下的曲率张量的对称性<br>$$R</em>{\rho \lambda \mu \nu}&#x3D;g_{\rho \sigma}R^{\sigma}<em>{\lambda \mu \nu}$$<br>i)后一对指标反对称<br>ii）前一对指标反对称<br>iii）前一对指标与后一对指标对称<br>iiii）里奇恒等式：$$R^{\rho}</em>{\lambda \mu \nu}+R^{\rho}<em>{\mu \nu \lambda}+R^{\sigma}</em>{\nu \lambda \mu}&#x3D;0$$(后三个指标轮转)<br /><br>三个重要派生张量：<br>里奇张量：$$R_{\mu \nu}$$  (缩并得到)<br /><br>曲率标量：R（再次缩并）<br /><br>爱因斯坦张量：$$G_{\mu \nu}&#x3D;R_{\mu \nu}-\frac{1}{2}R$$<br /><br>毕安基恒等式：（后三个指标轮转的协变微商）<br /><br>$$G^{\mu \nu}<em>{ ; \nu}&#x3D;0$$<br>$$(R</em>{\mu \nu}-\frac{1}{2}R)^{ ; \nu}&#x3D;0$$</p><h2 id="重要运算"><a href="#重要运算" class="headerlink" title="重要运算"></a>重要运算</h2><p>度规的微分,广义相对论就是算度规的一阶导数和二阶导数（度规-联络-曲率）<br /><br>特殊的克式符：$$\Gamma^{\mu}<em>{\alpha \mu}&#x3D;\frac{\partial}{\partial x^{\alpha}}(\ln \sqrt{-g})$$<br /><br>散度运算：$$div A^{\mu}&#x3D;A^{\mu}</em>{ ; \mu}&#x3D;\frac{1}{\sqrt{-g}}\frac{\partial}{\partial x^{\mu}}(\sqrt{-g}A^{\mu})$$<br /><br>达郎贝尔算符:$$\Box&#x3D;div(grad\Psi)$$<br /><br>旋度运算:$$A_{\mu ; \nu}-A_{\nu ; \mu}&#x3D;A_{\mu , \nu}-A_{\nu , \mu}$$</p><h2 id="爱因斯坦方程"><a href="#爱因斯坦方程" class="headerlink" title="爱因斯坦方程"></a>爱因斯坦方程</h2><p>坐标时和固有时的区别<br>坐标时：$t&#x3D;\frac{x^{0}}{c}$,没有意义,用与计算和逻辑分析 <br /><br>固有时：$$ds^{2}&#x3D;g_{\mu \nu}dx^{\mu}dx^{\nu}$$,$dT&#x3D;\frac{ids}{c}&#x3D;d \tau$<br /><br>两者联系：$$d\tau&#x3D;\sqrt{-g_{00}}dt$$<br /><br>这也是地球太阳时间间隔区别,太阳附近要乘以太阳的度规：$${g_{00}}$$<br /><br>能量动量张量：<br>电磁场：$$T^{\mu \nu}&#x3D;\frac{1}{4\pi}(F^{\mu}<em>{\lambda}F^{\lambda \nu}-\frac{1}{4}g^{\mu \nu}F</em>{\rho \lambda}F^{\rho \lambda})$$<br /><br>理想流体：$T^{\mu \nu}&#x3D;(\rho+\frac{P}{c^{2}})u^{\mu}u^{\nu}+Pg^{\mu \nu}$<br /><br>松散介质,非相对论理想流体：$T^{\mu \nu}&#x3D;\rho u^{\mu}u^{\nu}$<br /><br>坐标条件和边界条件:<br /><br>协和坐标系：$g^{\mu \nu}\Gamma^{\lambda}_{\mu \nu}&#x3D;0$   </p><h2 id="应用"><a href="#应用" class="headerlink" title="应用"></a>应用</h2><h3 id="史瓦西解"><a href="#史瓦西解" class="headerlink" title="史瓦西解"></a>史瓦西解</h3><p>静态球对称物体,解出度规：<br>$$ds^{2}&#x3D;-c^{2}(1-\frac{2GM}{c^{2}r})dt^{2}+(1-\frac{2GM}{c^{2}r})^{-1}dr^{2}+r^{2}d\theta^{2}+r^{2}sin^{2}\theta d\phi^{2}$$<br>地球上的钟:$$d\tau_{2}$$ <br /><br>太阳上的钟:$$d\tau_{1}$$ <br /><br>两者差距$g_{00}$:<br>$$d\tau_{2}&#x3D;(1-\frac{2GM}{c^{2}r})^{-1&#x2F;2}d\tau_{2}$$<br>引力红移: $$v&#x3D;v_{0}\sqrt{1-\frac{2GM}{c^{2}r}}$$<br>水星进动<br>史瓦西黑洞：静态球对称<br>克尔纽曼黑洞：带电旋转</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;关于广义相对论的一点数学知识和概念&lt;/p&gt;</summary>
    
    
    
    <category term="公式推导" scheme="http://marigold0225.github.io/categories/%E5%85%AC%E5%BC%8F%E6%8E%A8%E5%AF%BC/"/>
    
    
    <category term="General_Relativity" scheme="http://marigold0225.github.io/tags/General-Relativity/"/>
    
  </entry>
  
  <entry>
    <title>ftp服务器开启</title>
    <link href="http://marigold0225.github.io/2021/06/29/ftp/"/>
    <id>http://marigold0225.github.io/2021/06/29/ftp/</id>
    <published>2021-06-29T06:05:54.000Z</published>
    <updated>2025-06-12T05:58:12.002Z</updated>
    
    <content type="html"><![CDATA[<p>linux开启ftp服务器，并配合客户端filezilla实现文件传输</p><span id="more"></span><h2 id="下载vsftpd"><a href="#下载vsftpd" class="headerlink" title="下载vsftpd"></a>下载vsftpd</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> pacman -S vsftpd</span><br><span class="line"><span class="built_in">sudo</span> vim /etc/vsftpd.conf</span><br></pre></td></tr></table></figure><p>打开配置文件，设置如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">anonymous_enable=NO</span><br><span class="line">local_enable=YES</span><br><span class="line">write_enable=YES</span><br><span class="line">allow_writeable_chroot=YES</span><br><span class="line">local_umask=022</span><br><span class="line">dirmessage_enable=YES</span><br><span class="line">xferlog_enable=YES</span><br><span class="line">connect_from_port_20=YES</span><br><span class="line">chroot_local_user=YES</span><br><span class="line">chroot_list_enable=NO(禁止访问home以上的区域)</span><br><span class="line">listen=YES</span><br><span class="line">pam_service_name=vsftpd</span><br><span class="line">seccomp_sandbox=NO</span><br><span class="line">isolate_network=NO</span><br></pre></td></tr></table></figure><p>最后重启服务</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> systemctl restart vsftpd</span><br></pre></td></tr></table></figure><p>windows下载filezilla，新建站点，输入ip，用户名密码，连接即可，愉快的拖文件吧<br>可以看到我们只能访问用户目录，进不了root区，进去也是一片问号啥也看不了，再也不用U盘拷过来拷过去，手机文件用kdeconnect，kde桌面自带的和西欧<br><img src="/2021/06/29/ftp/filezilla.png"></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;linux开启ftp服务器，并配合客户端filezilla实现文件传输&lt;/p&gt;</summary>
    
    
    
    <category term="linux" scheme="http://marigold0225.github.io/categories/linux/"/>
    
    
    <category term="ftp" scheme="http://marigold0225.github.io/tags/ftp/"/>
    
  </entry>
  
  <entry>
    <title>manjaro的安装与配置</title>
    <link href="http://marigold0225.github.io/2021/06/28/manjaro/"/>
    <id>http://marigold0225.github.io/2021/06/28/manjaro/</id>
    <published>2021-06-28T10:14:11.000Z</published>
    <updated>2025-06-12T05:58:12.002Z</updated>
    
    <content type="html"><![CDATA[<p>由于经常用到linux系统，相比之下manjaro深得人心，避免以后换电脑又到处折腾，在这里记录一下自己的配置和走过的弯路。</p><span id="more"></span><p><img src="/2021/06/28/manjaro/neofetch.png"></p><h2 id="manjaro安装"><a href="#manjaro安装" class="headerlink" title="manjaro安装"></a>manjaro安装</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">manjaro.org/download/</span><br></pre></td></tr></table></figure><p>rufus制作启动盘，安装没什么好说的，一直下一步就行了，分区root得多给一些空间，网上很多说20g就够了，当用包管理器下载爽了就发现一会就满了，相比之下home目录根本用不了那么大，500G硬盘建议给root150G的空间</p><h2 id="换源和基本安装"><a href="#换源和基本安装" class="headerlink" title="换源和基本安装"></a>换源和基本安装</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> pacman-mirrors -i -c China -m rank</span><br></pre></td></tr></table></figure><p>选择延迟最低的一个源即可</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> pacman -Syu</span><br><span class="line"><span class="built_in">sudo</span> pacman -Syy</span><br></pre></td></tr></table></figure><p>更新一下</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> pacman -S yay</span><br><span class="line">yay -S base-devel</span><br></pre></td></tr></table></figure><p>打包工具下载</p><h2 id="中文输入法"><a href="#中文输入法" class="headerlink" title="中文输入法"></a>中文输入法</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> pacman -S fcitx-im</span><br><span class="line"><span class="built_in">sudo</span> pacman -S fcitx-configtool</span><br><span class="line"><span class="built_in">sudo</span> pacman -S fcitx-googlepinyin</span><br></pre></td></tr></table></figure><p>下载vim，打开~&#x2F;.xprofile</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> GTK_IM_MODULE=fcitx</span><br><span class="line"><span class="built_in">export</span> QT_IM_MODULE=fcitx</span><br><span class="line"><span class="built_in">export</span> XMODIFIERS=<span class="string">&quot;@im=fcitx&quot;</span></span><br></pre></td></tr></table></figure><p>写入重启就能输入中文了</p><h2 id="zsh和ohmyzsh"><a href="#zsh和ohmyzsh" class="headerlink" title="zsh和ohmyzsh"></a>zsh和ohmyzsh</h2><p>manjaro自带zsh，omz因为某些原因下载不了，我们要进入以下网址：<a href="https://www.ipaddress.com/">https://www.ipaddress.com/</a> 输入githubusercontent.com查询ip，修改host</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> vim /etc/hosts</span><br></pre></td></tr></table></figure><p>在里面加入查询到的ip</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xxx.xxx.xx.xxx raw.githubusercontent.com</span><br></pre></td></tr></table></figure><p>终端输入</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sh -c <span class="string">&quot;<span class="subst">$(curl -fsSL https://raw.github.com/robbyrussell/oh-my-zsh/master/tools/install.sh)</span>&quot;</span></span><br></pre></td></tr></table></figure><p>安装语法高亮和自动补全插件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/zsh-users/zsh-autosuggestions <span class="variable">$ZSH_CUSTOM</span>/plugins/zsh-autosuggestions</span><br><span class="line">git <span class="built_in">clone</span> https://github.com/zsh-users/zsh-syntax-highlighting.git <span class="variable">$ZSH_CUSTOM</span>/plugins/zsh-syntax-highlighting</span><br></pre></td></tr></table></figure><p>打开.zshrc，导入插件，最后source一下</p><h2 id="软件下载"><a href="#软件下载" class="headerlink" title="软件下载"></a>软件下载</h2><p>sublime</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yay -S sublime-text-3</span><br></pre></td></tr></table></figure><p>edge浏览器</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yay -S microsoft-edge</span><br></pre></td></tr></table></figure><p>安装完zsh后tab补全就知道下载哪个了。</p><h2 id="vim-配置"><a href="#vim-配置" class="headerlink" title="vim 配置"></a>vim 配置</h2><p>下载插件管理器</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/VundleVim/Vundle.vim.git ~/.vim/bundle/Vundle.vim</span><br></pre></td></tr></table></figure><p>到bundle目录下，下载ycm插件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/Valloric/YouCompleteMe.git</span><br></pre></td></tr></table></figure><p>下载打包工具</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yay -S cmake</span><br><span class="line">yay -S go</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git submodule update --init --recursive</span><br></pre></td></tr></table></figure><p>到Youcompleteme目录下</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> ./install.py --all</span><br></pre></td></tr></table></figure><p>等待编译完成,可能会遇到的错误</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">export GOPROXY=http://goproxy.io(&quot;go 模块设置代理&quot;)</span><br><span class="line">sudo pacman -S openjdk-11-jdk （安装java）</span><br></pre></td></tr></table></figure><p>最后copy以下vim配置</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">set</span> nocompatible</span><br><span class="line">filetype on</span><br><span class="line">syntax <span class="built_in">enable</span> </span><br><span class="line"><span class="built_in">set</span> nu</span><br><span class="line"><span class="built_in">set</span> rtp+=~/.vim/bundle/Vundle.vim</span><br><span class="line">call vundle#begin()</span><br><span class="line"><span class="string">&quot; 这里根据自己需要的插件来设置，以下是我的配置 &quot;</span></span><br><span class="line"><span class="string">&quot; YouCompleteMe:语句补全插件</span></span><br><span class="line"><span class="string">set runtimepath+=~/.vim/bundle/YouCompleteMe</span></span><br><span class="line"><span class="string">autocmd InsertLeave * if pumvisible() == 0|pclose|endif &quot;</span>离开插入模式后自动关闭预览窗口<span class="string">&quot;</span></span><br><span class="line"><span class="string">let g:ycm_collect_identifiers_from_tags_files = 1           &quot;</span> 开启 YCM基于标签引擎</span><br><span class="line"><span class="built_in">let</span> g:ycm_collect_identifiers_from_comments_and_strings = 1 <span class="string">&quot; 注释与字符串中的内容也用于补全</span></span><br><span class="line"><span class="string">let g:syntastic_ignore_files=[&quot;</span>.*\.py$<span class="string">&quot;]</span></span><br><span class="line"><span class="string">let g:ycm_seed_identifiers_with_syntax = 1                  &quot;</span> 语法关键字补全</span><br><span class="line"><span class="built_in">let</span> g:ycm_complete_in_comments = 1</span><br><span class="line"><span class="built_in">let</span> g:ycm_confirm_extra_conf = 0                            <span class="string">&quot; 关闭加载.ycm_extra_conf.py提示</span></span><br><span class="line"><span class="string">let g:ycm_key_list_select_completion = [&#x27;&lt;c-n&gt;&#x27;, &#x27;&lt;Down&gt;&#x27;]  &quot;</span> 映射按键,没有这个会拦截掉tab, 导致其他插件的tab不能用.</span><br><span class="line"><span class="built_in">let</span> g:ycm_key_list_previous_completion = [<span class="string">&#x27;&lt;c-p&gt;&#x27;</span>, <span class="string">&#x27;&lt;Up&gt;&#x27;</span>]</span><br><span class="line"><span class="built_in">let</span> g:ycm_complete_in_comments = 1                          <span class="string">&quot; 在注释输入中也能补全</span></span><br><span class="line"><span class="string">let g:ycm_complete_in_strings = 1                           &quot;</span> 在字符串输入中也能补全</span><br><span class="line"><span class="built_in">let</span> g:ycm_collect_identifiers_from_comments_and_strings = 1 <span class="string">&quot; 注释和字符串中的文字也会被收入补全</span></span><br><span class="line"><span class="string">let g:ycm_global_ycm_extra_conf=&#x27;~/.vim/bundle/YouCompleteMe/third_party/ycmd/cpp/ycm/.ycm_extra_conf.py&#x27;</span></span><br><span class="line"><span class="string">let g:ycm_show_diagnostics_ui = 0                           &quot;</span> 禁用语法检查</span><br><span class="line">inoremap &lt;<span class="built_in">expr</span>&gt; &lt;CR&gt; pumvisible() ? <span class="string">&quot;\&lt;C-y&gt;&quot;</span> : <span class="string">&quot;\&lt;CR&gt;&quot;</span>             <span class="string">&quot; 回车即选中当前项</span></span><br><span class="line"><span class="string">nnoremap &lt;c-j&gt; :YcmCompleter GoToDefinitionElseDeclaration&lt;CR&gt;     &quot;</span> 跳转到定义处</span><br><span class="line"><span class="built_in">let</span> g:ycm_min_num_of_chars_for_completion=2                 <span class="string">&quot; 从第2个键入字符就开始罗列匹配项</span></span><br><span class="line"><span class="string">&quot;</span></span><br><span class="line"><span class="string">&quot; github 仓库中的插件 &quot;</span></span><br><span class="line">Plugin <span class="string">&#x27;VundleVim/Vundle.vim&#x27;</span> </span><br><span class="line">Plugin <span class="string">&#x27;vim-airline/vim-airline&#x27;</span></span><br><span class="line"><span class="string">&quot;vim-airline配置:优化vim界面&quot;</span></span><br><span class="line"><span class="string">&quot;let g:airline#extensions#tabline#enabled = 1</span></span><br><span class="line"><span class="string">&quot;</span> airline设置</span><br><span class="line"><span class="string">&quot; 显示颜色</span></span><br><span class="line"><span class="string">set t_Co=256</span></span><br><span class="line"><span class="string">set laststatus=2</span></span><br><span class="line"><span class="string">&quot;</span> 使用powerline打过补丁的字体</span><br><span class="line"><span class="built_in">let</span> g:airline_powerline_fonts = 1</span><br><span class="line"><span class="string">&quot; 开启tabline</span></span><br><span class="line"><span class="string">let g:airline#extensions#tabline#enabled = 1</span></span><br><span class="line"><span class="string">&quot;</span> tabline中当前buffer两端的分隔字符</span><br><span class="line"><span class="built_in">let</span> g:airline#extensions#tabline#left_sep = <span class="string">&#x27; &#x27;</span></span><br><span class="line"><span class="string">&quot; tabline中未激活buffer两端的分隔字符</span></span><br><span class="line"><span class="string">let g:airline#extensions#tabline#left_alt_sep = &#x27; &#x27;</span></span><br><span class="line"><span class="string">&quot;</span> tabline中buffer显示编号</span><br><span class="line"><span class="built_in">let</span> g:airline#extensions#tabline#buffer_nr_show = 1</span><br><span class="line"><span class="string">&quot; 映射切换buffer的键位</span></span><br><span class="line"><span class="string">nnoremap [b :bp&lt;CR&gt;</span></span><br><span class="line"><span class="string">nnoremap ]b :bn&lt;CR&gt;</span></span><br><span class="line"><span class="string">&quot;</span> 映射&lt;leader&gt;num到num buffer</span><br><span class="line">map &lt;leader&gt;1 :b 1&lt;CR&gt;</span><br><span class="line">map &lt;leader&gt;2 :b 2&lt;CR&gt;</span><br><span class="line">map &lt;leader&gt;3 :b 3&lt;CR&gt;</span><br><span class="line">map &lt;leader&gt;4 :b 4&lt;CR&gt;</span><br><span class="line">map &lt;leader&gt;5 :b 5&lt;CR&gt;</span><br><span class="line">map &lt;leader&gt;6 :b 6&lt;CR&gt;</span><br><span class="line">map &lt;leader&gt;7 :b 7&lt;CR&gt;</span><br><span class="line">map &lt;leader&gt;8 :b 8&lt;CR&gt;</span><br><span class="line">map &lt;leader&gt;9 :b 9&lt;CR&gt;</span><br><span class="line"><span class="string">&quot; vim-scripts 中的插件 &quot;</span></span><br><span class="line">Plugin <span class="string">&#x27;taglist.vim&#x27;</span></span><br><span class="line"><span class="string">&quot;ctags 配置:F3快捷键显示程序中的各种tags，包括变量和函数等。</span></span><br><span class="line"><span class="string">map &lt;F3&gt; :TlistToggle&lt;CR&gt;</span></span><br><span class="line"><span class="string">let Tlist_Use_Right_Window=1</span></span><br><span class="line"><span class="string">let Tlist_Show_One_File=1</span></span><br><span class="line"><span class="string">let Tlist_Exit_OnlyWindow=1</span></span><br><span class="line"><span class="string">let Tlist_WinWidt=25</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">Plugin &#x27;The-NERD-tree&#x27;</span></span><br><span class="line"><span class="string">&quot;</span>NERDTree 配置:F2快捷键显示当前目录树</span><br><span class="line">map &lt;F2&gt; :NERDTreeToggle&lt;CR&gt;</span><br><span class="line"><span class="built_in">let</span> NERDTreeWinSize=25 </span><br><span class="line"> </span><br><span class="line">Plugin <span class="string">&#x27;indentLine.vim&#x27;</span></span><br><span class="line">Plugin <span class="string">&#x27;delimitMate.vim&#x27;</span></span><br><span class="line"> </span><br><span class="line"><span class="string">&quot; 非 github 仓库的插件&quot;</span></span><br><span class="line"><span class="string">&quot; Plugin &#x27;git://git.wincent.com/command-t.git&#x27;</span></span><br><span class="line"><span class="string">&quot;</span> 本地仓库的插件 <span class="string">&quot;</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">call vundle#end()</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">set fileencodings=ucs-bom,utf-8,utf-16,gbk,big5,gb18030,shift-jis,euc-jp,euc-kr,latin1</span></span><br><span class="line"><span class="string">set fileencoding=utf-8</span></span><br><span class="line"><span class="string">let s:extfname=expand(&quot;</span>%:e<span class="string">&quot;)</span></span><br><span class="line"><span class="string">if s:extfname==?&quot;</span>f90<span class="string">&quot;</span></span><br><span class="line"><span class="string">        let fortran_free_source=1</span></span><br><span class="line"><span class="string">        unlet! fortran_fixed_source</span></span><br><span class="line"><span class="string">else</span></span><br><span class="line"><span class="string">        let fortran_fixed_source=1</span></span><br><span class="line"><span class="string">        unlet! fortran_free_source</span></span><br><span class="line"><span class="string">endif</span></span><br><span class="line"><span class="string">filetype plugin indent on</span></span><br><span class="line"><span class="string">let g:UltiSnipsExpandTrigger=&#x27;&lt;tab&gt;&#x27;</span></span><br><span class="line"><span class="string">let g:UltiSnipsJumpForwardTrigger=&#x27;&lt;tab&gt;&#x27;</span></span><br><span class="line"><span class="string">let g:UltiSnipsJumpBackwardTrigger=&#x27;&lt;s-tab&gt;&#x27;</span></span><br><span class="line"><span class="string">let fortran_more_precise=1</span></span><br><span class="line"><span class="string">let fortran_do_enddo=1</span></span><br><span class="line"><span class="string">let fortran_have_tabs=1</span></span><br><span class="line"><span class="string">let fortran_fold=1</span></span><br><span class="line"><span class="string">let fortran_fold_conditionals=1</span></span><br><span class="line"><span class="string">set foldmethod=syntax</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span></span><br><span class="line"><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;新文件标题</span></span><br><span class="line"><span class="string">&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;</span></span><br><span class="line"><span class="string">&quot;</span>新建.c,.h,.sh,.java文件，自动插入文件头 </span><br><span class="line">autocmd BufNewFile *.cpp,*.[ch],*.sh,*.java <span class="built_in">exec</span> <span class="string">&quot;:call SetTitle()&quot;</span> </span><br><span class="line"><span class="string">&quot;&quot;</span>定义函数SetTitle，自动插入文件头 </span><br><span class="line">func SetTitle() </span><br><span class="line">        <span class="string">&quot;如果文件类型为.sh文件 </span></span><br><span class="line"><span class="string">        if &amp;filetype == &#x27;sh&#x27; </span></span><br><span class="line"><span class="string">                call setline(1, &quot;</span>##########################################################################<span class="string">&quot;) </span></span><br><span class="line"><span class="string">                call append(line(&quot;</span>.<span class="string">&quot;), &quot;</span># File Name: <span class="string">&quot;.expand(&quot;</span>%<span class="string">&quot;)) </span></span><br><span class="line"><span class="string">                call append(line(&quot;</span>.<span class="string">&quot;)+1, &quot;</span># Author: amoscykl<span class="string">&quot;) </span></span><br><span class="line"><span class="string">                call append(line(&quot;</span>.<span class="string">&quot;)+2, &quot;</span># mail: amoscykl980629@163.com<span class="string">&quot;) </span></span><br><span class="line"><span class="string">                call append(line(&quot;</span>.<span class="string">&quot;)+3, &quot;</span># Created Time: <span class="string">&quot;.strftime(&quot;</span>%c<span class="string">&quot;)) </span></span><br><span class="line"><span class="string">                call append(line(&quot;</span>.<span class="string">&quot;)+4, &quot;</span>#########################################################################<span class="string">&quot;) </span></span><br><span class="line"><span class="string">                call append(line(&quot;</span>.<span class="string">&quot;)+5, &quot;</span>#!/bin/zsh<span class="string">&quot;)</span></span><br><span class="line"><span class="string">                call append(line(&quot;</span>.<span class="string">&quot;)+6, &quot;</span>PATH=/home/edison/bin:/home/edison/.local/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin:/work/tools/gcc-3.4.5-glibc-2.3.6/bin<span class="string">&quot;)</span></span><br><span class="line"><span class="string">                call append(line(&quot;</span>.<span class="string">&quot;)+7, &quot;</span><span class="built_in">export</span> PATH<span class="string">&quot;)</span></span><br><span class="line"><span class="string">                call append(line(&quot;</span>.<span class="string">&quot;)+8, &quot;</span><span class="string">&quot;)</span></span><br><span class="line"><span class="string">        else </span></span><br><span class="line"><span class="string">                call setline(1, &quot;</span>/*************************************************************************<span class="string">&quot;) </span></span><br><span class="line"><span class="string">                call append(line(&quot;</span>.<span class="string">&quot;), &quot;</span>        &gt; File Name: <span class="string">&quot;.expand(&quot;</span>%<span class="string">&quot;)) </span></span><br><span class="line"><span class="string">                call append(line(&quot;</span>.<span class="string">&quot;)+1, &quot;</span>      &gt; Author: amoscykl<span class="string">&quot;) </span></span><br><span class="line"><span class="string">                call append(line(&quot;</span>.<span class="string">&quot;)+2, &quot;</span>      &gt; Mail: amoscykl@163.com <span class="string">&quot;) </span></span><br><span class="line"><span class="string">                call append(line(&quot;</span>.<span class="string">&quot;)+3, &quot;</span>      &gt; Created Time: <span class="string">&quot;.strftime(&quot;</span>%c<span class="string">&quot;)) </span></span><br><span class="line"><span class="string">                call append(line(&quot;</span>.<span class="string">&quot;)+4, &quot;</span> ************************************************************************/<span class="string">&quot;) </span></span><br><span class="line"><span class="string">                call append(line(&quot;</span>.<span class="string">&quot;)+5, &quot;</span><span class="string">&quot;)</span></span><br><span class="line"><span class="string">        endif</span></span><br><span class="line"><span class="string">        if &amp;filetype == &#x27;cpp&#x27;</span></span><br><span class="line"><span class="string">                call append(line(&quot;</span>.<span class="string">&quot;)+6, &quot;</span>#include&lt;iostream&gt;<span class="string">&quot;)</span></span><br><span class="line"><span class="string">        call append(line(&quot;</span>.<span class="string">&quot;)+7, &quot;</span>using namespace std;<span class="string">&quot;)</span></span><br><span class="line"><span class="string">                call append(line(&quot;</span>.<span class="string">&quot;)+8, &quot;</span><span class="string">&quot;)</span></span><br><span class="line"><span class="string">        endif</span></span><br><span class="line"><span class="string">        if &amp;filetype == &#x27;c&#x27;</span></span><br><span class="line"><span class="string">                call append(line(&quot;</span>.<span class="string">&quot;)+6, &quot;</span>#include&lt;stdio.h&gt;<span class="string">&quot;)</span></span><br><span class="line"><span class="string">                call append(line(&quot;</span>.<span class="string">&quot;)+7, &quot;</span><span class="string">&quot;)</span></span><br><span class="line"><span class="string">        endif</span></span><br><span class="line"><span class="string">        &quot;</span>       <span class="keyword">if</span> &amp;filetype == <span class="string">&#x27;java&#x27;</span></span><br><span class="line">        <span class="string">&quot;               call append(line(&quot;</span>.<span class="string">&quot;)+6,&quot;</span>public class <span class="string">&quot;.expand(&quot;</span>%<span class="string">&quot;))</span></span><br><span class="line"><span class="string">        &quot;</span>               call append(line(<span class="string">&quot;.&quot;</span>)+7,<span class="string">&quot;&quot;</span>)</span><br><span class="line">        <span class="string">&quot;       endif</span></span><br><span class="line"><span class="string">        &quot;</span>新建文件后，自动定位到文件末尾</span><br><span class="line">        autocmd BufNewFile * normal G</span><br><span class="line">endfunc </span><br><span class="line"><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span></span><br><span class="line"><span class="string">&quot;键盘命令</span></span><br><span class="line"><span class="string">&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">nmap &lt;leader&gt;w :w!&lt;cr&gt;</span></span><br><span class="line"><span class="string">nmap &lt;leader&gt;f :find&lt;cr&gt;</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">&quot;</span> 映射全选+复制 ctrl+a</span><br><span class="line">map &lt;C-A&gt; ggVGY</span><br><span class="line">map! &lt;C-A&gt; &lt;Esc&gt;ggVGY</span><br><span class="line">map &lt;F12&gt; gg=G</span><br><span class="line"><span class="string">&quot; 选中状态下 Ctrl+c 复制</span></span><br><span class="line"><span class="string">vmap &lt;C-c&gt; &quot;</span>+y</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span></span><br><span class="line"><span class="string">&quot;&quot;</span>实用设置</span><br><span class="line"><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;</span></span><br><span class="line"><span class="string">&quot;</span> 设置当文件被改动时自动载入</span><br><span class="line"><span class="built_in">set</span> autoread</span><br><span class="line"><span class="string">&quot; quickfix模式</span></span><br><span class="line"><span class="string">autocmd FileType c,cpp map &lt;buffer&gt; &lt;leader&gt;&lt;space&gt; :w&lt;cr&gt;:make&lt;cr&gt;</span></span><br><span class="line"><span class="string">&quot;</span>代码补全 </span><br><span class="line"><span class="built_in">set</span> completeopt=preview,menu </span><br><span class="line"><span class="string">&quot;允许插件  </span></span><br><span class="line"><span class="string">filetype plugin on</span></span><br><span class="line"><span class="string">&quot;</span>共享剪贴板  </span><br><span class="line"><span class="built_in">set</span> clipboard=unnamed </span><br><span class="line"><span class="string">&quot;从不备份  </span></span><br><span class="line"><span class="string">set nobackup</span></span><br><span class="line"><span class="string">&quot;</span>make 运行</span><br><span class="line">:<span class="built_in">set</span> makeprg=g++\ -Wall\ \ %</span><br><span class="line"><span class="string">&quot;自动保存</span></span><br><span class="line"><span class="string">set autowrite</span></span><br><span class="line"><span class="string">set ruler                   &quot;</span> 打开状态栏标尺</span><br><span class="line"><span class="built_in">set</span> cursorline              <span class="string">&quot; 突出显示当前行</span></span><br><span class="line"><span class="string">set magic                   &quot;</span> 设置魔术</span><br><span class="line"><span class="built_in">set</span> guioptions-=T           <span class="string">&quot; 隐藏工具栏</span></span><br><span class="line"><span class="string">set guioptions-=m           &quot;</span> 隐藏菜单栏</span><br><span class="line"><span class="string">&quot;set statusline=\ %&lt;%F[%1*%M%*%n%R%H]%=\ %y\ %0(%&#123;&amp;fileformat&#125;\ %&#123;&amp;encoding&#125;\ %c:%l/%L%)\</span></span><br><span class="line"><span class="string">&quot;</span> 设置在状态行显示的信息</span><br><span class="line"><span class="built_in">set</span> foldcolumn=0</span><br><span class="line"><span class="built_in">set</span> foldmethod=indent </span><br><span class="line"><span class="built_in">set</span> foldlevel=3 </span><br><span class="line"><span class="built_in">set</span> foldenable              <span class="string">&quot; 开始折叠</span></span><br><span class="line"><span class="string">&quot;</span> 不要使用vi的键盘模式，而是vim自己的</span><br><span class="line"><span class="built_in">set</span> nocompatible</span><br><span class="line"><span class="string">&quot; 语法高亮</span></span><br><span class="line"><span class="string">set syntax=on</span></span><br><span class="line"><span class="string">&quot;</span> 去掉输入错误的提示声音</span><br><span class="line"><span class="built_in">set</span> noeb</span><br><span class="line"><span class="string">&quot; 在处理未保存或只读文件的时候，弹出确认</span></span><br><span class="line"><span class="string">set confirm</span></span><br><span class="line"><span class="string">&quot;</span> 自动缩进</span><br><span class="line"><span class="built_in">set</span> autoindent</span><br><span class="line"><span class="built_in">set</span> cindent</span><br><span class="line"><span class="string">&quot; Tab键的宽度</span></span><br><span class="line"><span class="string">set tabstop=4</span></span><br><span class="line"><span class="string">&quot;</span> 统一缩进为4</span><br><span class="line"><span class="built_in">set</span> softtabstop=4</span><br><span class="line"><span class="built_in">set</span> shiftwidth=4</span><br><span class="line"><span class="string">&quot; 不要用空格代替制表符</span></span><br><span class="line"><span class="string">set noexpandtab</span></span><br><span class="line"><span class="string">&quot;</span> 在行和段开始处使用制表符</span><br><span class="line"><span class="built_in">set</span> smarttab</span><br><span class="line"><span class="string">&quot; 显示行号</span></span><br><span class="line"><span class="string">set number</span></span><br><span class="line"><span class="string">&quot;</span> 历史记录数</span><br><span class="line"><span class="built_in">set</span> <span class="built_in">history</span>=1000</span><br><span class="line"><span class="string">&quot;禁止生成临时文件</span></span><br><span class="line"><span class="string">set nobackup</span></span><br><span class="line"><span class="string">set noswapfile</span></span><br><span class="line"><span class="string">&quot;</span>搜索忽略大小写</span><br><span class="line"><span class="built_in">set</span> ignorecase</span><br><span class="line"><span class="string">&quot;搜索逐字符高亮</span></span><br><span class="line"><span class="string">set hlsearch</span></span><br><span class="line"><span class="string">set incsearch</span></span><br><span class="line"><span class="string">&quot;</span>行内替换</span><br><span class="line"><span class="built_in">set</span> gdefault</span><br><span class="line"><span class="string">&quot;编码设置</span></span><br><span class="line"><span class="string">set enc=utf-8</span></span><br><span class="line"><span class="string">set fencs=utf-8,ucs-bom,shift-jis,gb18030,gbk,gb2312,cp936</span></span><br><span class="line"><span class="string">&quot;</span>语言设置</span><br><span class="line"><span class="built_in">set</span> langmenu=zh_CN.UTF-8</span><br><span class="line"><span class="built_in">set</span> helplang=cn</span><br><span class="line"><span class="string">&quot; 我的状态行显示的内容（包括文件类型和解码）</span></span><br><span class="line"><span class="string">set statusline=%F%m%r%h%w\ [FORMAT=%&#123;&amp;ff&#125;]\ [TYPE=%Y]\ [POS=%l,%v][%p%%]\ %&#123;strftime(\&quot;%d/%m/%y\ -\ %H:%M\&quot;)&#125;</span></span><br><span class="line"><span class="string">set statusline=[%F]%y%r%m%*%=[Line:%l/%L,Column:%c][%p%%]</span></span><br><span class="line"><span class="string">&quot;</span> 总是显示状态行</span><br><span class="line"><span class="built_in">set</span> laststatus=2</span><br><span class="line"><span class="string">&quot; 命令行（在状态行下）的高度，默认为1，这里是2</span></span><br><span class="line"><span class="string">set cmdheight=2</span></span><br><span class="line"><span class="string">&quot;</span> 侦测文件类型</span><br><span class="line">filetype on</span><br><span class="line"><span class="string">&quot; 载入文件类型插件</span></span><br><span class="line"><span class="string">filetype plugin on</span></span><br><span class="line"><span class="string">&quot;</span> 为特定文件类型载入相关缩进文件</span><br><span class="line">filetype indent on</span><br><span class="line"><span class="string">&quot; 保存全局变量</span></span><br><span class="line"><span class="string">set viminfo+=!</span></span><br><span class="line"><span class="string">&quot;</span> 带有如下符号的单词不要被换行分割</span><br><span class="line"><span class="built_in">set</span> iskeyword+=_,$,@,%,#,-</span><br><span class="line"><span class="string">&quot; 字符间插入的像素行数目</span></span><br><span class="line"><span class="string">set linespace=0</span></span><br><span class="line"><span class="string">&quot;</span> 增强模式中的命令行自动完成操作</span><br><span class="line"><span class="built_in">set</span> wildmenu</span><br><span class="line"><span class="string">&quot; 使回格键（backspace）正常处理indent, eol, start等</span></span><br><span class="line"><span class="string">set backspace=2</span></span><br><span class="line"><span class="string">&quot;</span> 允许backspace和光标键跨越行边界</span><br><span class="line"><span class="built_in">set</span> whichwrap+=&lt;,&gt;,h,l</span><br><span class="line"><span class="string">&quot; 可以在buffer的任何地方使用鼠标（类似office中在工作区双击鼠标定位）</span></span><br><span class="line"><span class="string">set mouse=a</span></span><br><span class="line"><span class="string">set selection=exclusive</span></span><br><span class="line"><span class="string">set selectmode=mouse,key</span></span><br><span class="line"><span class="string">&quot;</span> 通过使用: commands命令，告诉我们文件的哪一行被改变过</span><br><span class="line"><span class="built_in">set</span> report=0</span><br><span class="line"><span class="string">&quot; 在被分割的窗口间显示空白，便于阅读</span></span><br><span class="line"><span class="string">set fillchars=vert:\ ,stl:\ ,stlnc:\</span></span><br><span class="line"><span class="string">&quot;</span> 高亮显示匹配的括号</span><br><span class="line"><span class="built_in">set</span> showmatch</span><br><span class="line"><span class="string">&quot; 匹配括号高亮的时间（单位是十分之一秒）</span></span><br><span class="line"><span class="string">set matchtime=1</span></span><br><span class="line"><span class="string">&quot;</span> 光标移动到buffer的顶部和底部时保持3行距离</span><br><span class="line"><span class="built_in">set</span> scrolloff=3</span><br><span class="line"><span class="string">&quot; 为C程序提供自动缩进</span></span><br><span class="line"><span class="string">set smartindent</span></span><br><span class="line"><span class="string">&quot;</span> 高亮显示普通txt文件（需要txt.vim脚本）</span><br><span class="line"> au BufRead,BufNewFile *  setfiletype txt</span><br><span class="line"><span class="string">&quot;自动补全</span></span><br><span class="line"><span class="string">:inoremap ( ()&lt;ESC&gt;i</span></span><br><span class="line"><span class="string">:inoremap ) &lt;c-r&gt;=ClosePair(&#x27;)&#x27;)&lt;CR&gt;</span></span><br><span class="line"><span class="string">&quot;</span>:inoremap &#123; &#123;&lt;CR&gt;&#125;&lt;ESC&gt;O</span><br><span class="line"><span class="string">&quot;:inoremap &#125; &lt;c-r&gt;=ClosePair(&#x27;&#125;&#x27;)&lt;CR&gt;</span></span><br><span class="line"><span class="string">:inoremap [ []&lt;ESC&gt;i</span></span><br><span class="line"><span class="string">:inoremap ] &lt;c-r&gt;=ClosePair(&#x27;]&#x27;)&lt;CR&gt;</span></span><br><span class="line"><span class="string">:inoremap &quot;</span> <span class="string">&quot;&quot;</span>&lt;ESC&gt;i</span><br><span class="line">:inoremap <span class="string">&#x27; &#x27;</span><span class="string">&#x27;&lt;ESC&gt;i</span></span><br><span class="line"><span class="string">function! ClosePair(char)</span></span><br><span class="line"><span class="string">        if getline(&#x27;</span>.<span class="string">&#x27;)[col(&#x27;</span>.<span class="string">&#x27;) - 1] == a:char</span></span><br><span class="line"><span class="string">                return &quot;\&lt;Right&gt;&quot;</span></span><br><span class="line"><span class="string">        else</span></span><br><span class="line"><span class="string">                return a:char</span></span><br><span class="line"><span class="string">        endif</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string">filetype plugin indent on </span></span><br><span class="line"><span class="string">&quot;打开文件类型检测, 加了这句才可以用智能补全</span></span><br><span class="line"><span class="string">set completeopt=longest,menu</span></span><br></pre></td></tr></table></figure><p>taglist插件需要ctags，没有要先下载，最后打开vim</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PluginInstall</span><br></pre></td></tr></table></figure><p>等安装完成，失败多试几次<br>我加了fortran语法，F2打开目录，F3显示函数，zc自动折叠函数<br><img src="/2021/06/28/manjaro/vim.png"></p><h2 id="clash-及开机自启动"><a href="#clash-及开机自启动" class="headerlink" title="clash 及开机自启动"></a>clash 及开机自启动</h2><p>下载clash</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pacman -S clash</span><br></pre></td></tr></table></figure><p>将下面写入到 &#x2F;etc&#x2F;systemd&#x2F;system&#x2F;clash.service</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[Unit]</span><br><span class="line">Description=Clash service</span><br><span class="line">After=network.target</span><br><span class="line">[Service]</span><br><span class="line">Type=simple</span><br><span class="line">User=marigold</span><br><span class="line">ExecStart=/usr/bin/clash  </span><br><span class="line">Restart=on-failure</span><br><span class="line">RestartPreventExitStatus=23</span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure><p>运行clash，生成配置文件到<br>~&#x2F;config&#x2F;clash&#x2F;,包含config.yaml和country.mmdb</p><pre><code>#开机启动systemctl enable clash.service关闭systemctl disable clash.service查看systemctl status clash.service```## 其他的软件自行下载![](screen.png)</code></pre>]]></content>
    
    
    <summary type="html">&lt;p&gt;由于经常用到linux系统，相比之下manjaro深得人心，避免以后换电脑又到处折腾，在这里记录一下自己的配置和走过的弯路。&lt;/p&gt;</summary>
    
    
    
    <category term="linux" scheme="http://marigold0225.github.io/categories/linux/"/>
    
    
    <category term="manjaro" scheme="http://marigold0225.github.io/tags/manjaro/"/>
    
    <category term="vim" scheme="http://marigold0225.github.io/tags/vim/"/>
    
  </entry>
  
</feed>
